/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={583:(e,t,n)=>{var r=n(66);e.exports=function(e,t,n){t="number"==typeof t?t:1,n=n||": ";var o=e.split(/\r?\n/),a=String(o.length+t-1).length;return o.map((function(e,o){var i=o+t,s=String(i).length;return r(i,a-s)+n+e})).join("\n")}},668:e=>{e.exports=function(e){return atob(e)}},738:e=>{e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},488:(e,t,n)=>{var r=n(738);e.exports=function(e){return r[e]}},779:(e,t,n)=>{var r=n(975).sprintf,o=n(488),a=n(973),i=n(583);e.exports=function(e,t,n){"use strict";var s=a(t)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==n&&(u=n===o.FRAGMENT_SHADER?"fragment":"vertex");for(var c=r("Error compiling %s shader %s:\n",u,s),f=r("%s%s",c,e),l=e.split("\n"),p={},d=0;d<l.length;d++){var h=l[d];if(""!==h&&"\0"!==h){var m=parseInt(h.split(":")[2]);if(isNaN(m))throw new Error(r("Could not parse error: %s",h));p[m]=h}}var v=i(t).split("\n");for(d=0;d<v.length;d++)if(p[d+3]||p[d+2]||p[d+1]){if(c+=v[d]+"\n",p[d+1]){var g=p[d+1];g=g.substr(g.split(":",3).join(":").length+1).trim(),c+=r("^^^ %s\n\n",g)}}return{long:c.trim(),short:f.trim()}}},57:(e,t,n)=>{"use strict";var r=n(985),o=n(552),a=n(397),i=n(273),s=n(175),u=n(306);function c(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=c.prototype;function l(e,t){return e.name<t.name?-1:1}f.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},f.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(e,t,n,c){if(!t||1===arguments.length){var f=e;e=f.vertex,t=f.fragment,n=f.uniforms,c=f.attributes}var p=this,d=p.gl,h=p._vref;p._vref=i.shader(d,d.VERTEX_SHADER,e),h&&h.dispose(),p.vertShader=p._vref.shader;var m=this._fref;if(p._fref=i.shader(d,d.FRAGMENT_SHADER,t),m&&m.dispose(),p.fragShader=p._fref.shader,!n||!c){var v=d.createProgram();if(d.attachShader(v,p.fragShader),d.attachShader(v,p.vertShader),d.linkProgram(v),!d.getProgramParameter(v,d.LINK_STATUS)){var g=d.getProgramInfoLog(v);throw new u(g,"Error linking program:"+g)}n=n||s.uniforms(d,v),c=c||s.attributes(d,v),d.deleteProgram(v)}(c=c.slice()).sort(l);var y,b=[],_=[],x=[];for(y=0;y<c.length;++y){var T=c[y];if(T.type.indexOf("mat")>=0){for(var A=0|T.type.charAt(T.type.length-1),E=new Array(A),w=0;w<A;++w)E[w]=x.length,_.push(T.name+"["+w+"]"),"number"==typeof T.location?x.push(T.location+w):Array.isArray(T.location)&&T.location.length===A&&"number"==typeof T.location[w]?x.push(0|T.location[w]):x.push(-1);b.push({name:T.name,type:T.type,locations:E})}else b.push({name:T.name,type:T.type,locations:[x.length]}),_.push(T.name),"number"==typeof T.location?x.push(0|T.location):x.push(-1)}var S=0;for(y=0;y<x.length;++y)if(x[y]<0){for(;x.indexOf(S)>=0;)S+=1;x[y]=S}var C=new Array(n.length);function I(){p.program=i.program(d,p._vref,p._fref,_,x);for(var e=0;e<n.length;++e)C[e]=d.getUniformLocation(p.program,n[e].name)}I(),p._relink=I,p.types={uniforms:a(n),attributes:a(c)},p.attributes=o(d,p,b,x),Object.defineProperty(p,"uniforms",r(d,p,n,C))},e.exports=function(e,t,n,r,o){var a=new c(e);return a.update(t,n,r,o),a}},306:e=>{function t(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,e.exports=t},552:(e,t,n)=>{"use strict";e.exports=function(e,t,n,o){for(var a={},i=0,c=n.length;i<c;++i){var f=n[i],l=f.name,p=f.type,d=f.locations;switch(p){case"bool":case"int":case"float":s(e,t,d[0],o,1,a,l);break;default:if(p.indexOf("vec")>=0){if((h=p.charCodeAt(p.length-1)-48)<2||h>4)throw new r("","Invalid data type for attribute "+l+": "+p);s(e,t,d[0],o,h,a,l)}else{if(!(p.indexOf("mat")>=0))throw new r("","Unknown data type for attribute "+l+": "+p);var h;if((h=p.charCodeAt(p.length-1)-48)<2||h>4)throw new r("","Invalid data type for attribute "+l+": "+p);u(e,t,d,o,h,a,l)}}}return a};var r=n(306);function o(e,t,n,r,o,a){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=o,this._constFunc=a}var a=o.prototype;a.pointer=function(e,t,n,r){var o=this,a=o._gl,i=o._locations[o._index];a.vertexAttribPointer(i,o._dimension,e||a.FLOAT,!!t,n||0,r||0),a.enableVertexAttribArray(i)},a.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}});var i=[function(e,t,n){return void 0===n.length?e.vertexAttrib1f(t,n):e.vertexAttrib1fv(t,n)},function(e,t,n,r){return void 0===n.length?e.vertexAttrib2f(t,n,r):e.vertexAttrib2fv(t,n)},function(e,t,n,r,o){return void 0===n.length?e.vertexAttrib3f(t,n,r,o):e.vertexAttrib3fv(t,n)},function(e,t,n,r,o,a){return void 0===n.length?e.vertexAttrib4f(t,n,r,o,a):e.vertexAttrib4fv(t,n)}];function s(e,t,n,r,a,s,u){var c=i[a],f=new o(e,t,n,r,a,c);Object.defineProperty(s,u,{set:function(t){return e.disableVertexAttribArray(r[n]),c(e,r[n],t),t},get:function(){return f},enumerable:!0})}function u(e,t,n,r,o,a,i){for(var u=new Array(o),c=new Array(o),f=0;f<o;++f)s(e,t,n[f],r,o,u,f),c[f]=u[f];Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<o;++t)c[t].location=e[t];else for(t=0;t<o;++t)c[t].location=e+t;return e},get:function(){for(var e=new Array(o),t=0;t<o;++t)e[t]=r[n[t]];return e},enumerable:!0}),u.pointer=function(t,a,i,s){t=t||e.FLOAT,a=!!a,i=i||o*o,s=s||0;for(var u=0;u<o;++u){var c=r[n[u]];e.vertexAttribPointer(c,o,t,a,i,s+u*o),e.enableVertexAttribArray(c)}};var l=new Array(o),p=e["vertexAttrib"+o+"fv"];Object.defineProperty(a,i,{set:function(t){for(var a=0;a<o;++a){var i=r[n[a]];if(e.disableVertexAttribArray(i),Array.isArray(t[0]))p.call(e,i,t[a]);else{for(var s=0;s<o;++s)l[s]=t[o*a+s];p.call(e,i,l)}}return t},get:function(){return u},enumerable:!0})}},985:(e,t,n)=>{"use strict";var r=n(397),o=n(306);function a(e){return function(){return e}}function i(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}e.exports=function(e,t,n,s){function u(t){return function(r){for(var a=c("",t),i=0;i<a.length;++i){var u=a[i],f=u[0],l=u[1];if(s[l]){var p=r;if("string"==typeof f&&(0===f.indexOf(".")||0===f.indexOf("["))){var d=f;if(0===f.indexOf(".")&&(d=f.slice(1)),d.indexOf("]")===d.length-1){var h=d.indexOf("["),m=d.slice(0,h),v=d.slice(h+1,d.length-1);p=m?r[m][v]:r[v]}else p=r[d]}var g,y=n[l].type;switch(y){case"bool":case"int":case"sampler2D":case"samplerCube":e.uniform1i(s[l],p);break;case"float":e.uniform1f(s[l],p);break;default:var b=y.indexOf("vec");if(!(0<=b&&b<=1&&y.length===4+b)){if(0===y.indexOf("mat")&&4===y.length){if((g=y.charCodeAt(y.length-1)-48)<2||g>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+y);e["uniformMatrix"+g+"fv"](s[l],!1,p);break}throw new o("","Unknown uniform data type for "+name+": "+y)}if((g=y.charCodeAt(y.length-1)-48)<2||g>4)throw new o("","Invalid data type");switch(y.charAt(0)){case"b":case"i":e["uniform"+g+"iv"](s[l],p);break;case"v":e["uniform"+g+"fv"](s[l],p);break;default:throw new o("","Unrecognized data type for vector "+name+": "+y)}}}}}}function c(e,t){if("object"!=typeof t)return[[e,t]];var n=[];for(var r in t){var o=t[r],a=e;parseInt(r)+""===r?a+="["+r+"]":a+="."+r,"object"==typeof o?n.push.apply(n,c(a,o)):n.push([a,o])}return n}function f(e,t,r){if("object"==typeof r){var c=l(r);Object.defineProperty(e,t,{get:a(c),set:u(r),enumerable:!0,configurable:!1})}else s[r]?Object.defineProperty(e,t,{get:(f=r,function(e,t,n){return e.getUniform(t.program,n[f])}),set:u(r),enumerable:!0,configurable:!1}):e[t]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){if((n=e.charCodeAt(e.length-1)-48)<2||n>4)throw new o("","Invalid data type");return"b"===e.charAt(0)?i(n,!1):i(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n;if((n=e.charCodeAt(e.length-1)-48)<2||n>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+e);return i(n*n,0)}throw new o("","Unknown uniform data type for "+name+": "+e)}}(n[r].type);var f}function l(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)f(t,n,e[n])}else for(var r in t={},e)f(t,r,e[r]);return t}var p=r(n,!0);return{get:a(l(p)),set:u(p),enumerable:!0,configurable:!0}}},397:e=>{"use strict";e.exports=function(e,t){for(var n={},r=0;r<e.length;++r)for(var o=e[r].name.split("."),a=n,i=0;i<o.length;++i){var s=o[i].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var u=1;u<s.length;++u){var c=parseInt(s[u]);u<s.length-1||i<o.length-1?(c in a||(u<s.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?r:e[r].type}}else i<o.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=t?r:e[r].type}return n}},175:(e,t)=>{"use strict";t.uniforms=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],a=0;a<n;++a){var i=e.getActiveUniform(t,a);if(i){var s=o(e,i.type);if(i.size>1)for(var u=0;u<i.size;++u)r.push({name:i.name.replace("[0]","["+u+"]"),type:s});else r.push({name:i.name,type:s})}}return r},t.attributes=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=[],a=0;a<n;++a){var i=e.getActiveAttrib(t,a);i&&r.push({name:i.name,type:o(e,i.type)})}return r};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function o(e,t){if(!r){var o=Object.keys(n);r={};for(var a=0;a<o.length;++a){var i=o[a];r[e[i]]=n[i]}}return r[t]}},273:(e,t,n)=>{"use strict";t.shader=function(e,t,n){return f(e).getShaderReference(t,n)},t.program=function(e,t,n,r,o){return f(e).getProgram(t,n,r,o)};var r=n(306),o=n(779),a=new("undefined"==typeof WeakMap?n(501):WeakMap),i=0;function s(e,t,n,r,o,a,i){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=a,this.programs=[],this.cache=i}function u(e){this.gl=e,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,o=n.length;r<o;++r){var a=e.programs[n[r]];a&&(delete e.programs[r],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var c=u.prototype;function f(e){var t=a.get(e);return t||(t=new u(e),a.set(e,t)),t}c.getShaderReference=function(e,t){var n=this.gl,a=this.shaders[e===n.FRAGMENT_SHADER|0],u=a[t];if(u&&n.isShader(u.shader))u.count+=1;else{var c=function(e,t,n){var a=e.createShader(t);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(a);try{var s=o(i,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new r(i,"Error compiling shader:\n"+i)}throw new r(i,s.short,s.long)}return a}(n,e,t);u=a[t]=new s(i++,t,e,c,[],1,this)}return u},c.getProgram=function(e,t,n,o){var a=[e.id,t.id,n.join(":"),o.join(":")].join("@"),i=this.programs[a];return i&&this.gl.isProgram(i)||(this.programs[a]=i=function(e,t,n,o,a){var i=e.createProgram();e.attachShader(i,t),e.attachShader(i,n);for(var s=0;s<o.length;++s)e.bindAttribLocation(i,a[s],o[s]);if(e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var u=e.getProgramInfoLog(i);throw new r(u,"Error linking program: "+u)}return i}(this.gl,e.shader,t.shader,n,o),e.programs.push(a),t.programs.push(a)),i}},986:e=>{e.exports=[{name:"Bounce",paramsTypes:{shadow_colour:"vec4",shadow_height:"float",bounces:"float"},defaultParams:{shadow_colour:[0,0,0,.6],shadow_height:.075,bounces:3},glsl:"// Author: Adrian Purser\n// License: MIT\n\nuniform vec4 shadow_colour; // = vec4(0.,0.,0.,.6)\nuniform float shadow_height; // = 0.075\nuniform float bounces; // = 3.0\n\nconst float PI = 3.14159265358;\n\nvec4 transition (vec2 uv) {\n  float time = progress;\n  float stime = sin(time * PI / 2.);\n  float phase = time * PI * bounces;\n  float y = (abs(cos(phase))) * (1.0 - stime);\n  float d = uv.y - y;\n  return mix(\n    mix(\n      getToColor(uv),\n      shadow_colour,\n      step(d, shadow_height) * (1. - mix(\n        ((d / shadow_height) * shadow_colour.a) + (1.0 - shadow_colour.a),\n        1.0,\n        smoothstep(0.95, 1., progress) // fade-out the shadow at the end\n      ))\n    ),\n    getFromColor(vec2(uv.x, uv.y + (1.0 - y))),\n    step(d, 0.0)\n  );\n}\n",author:"Adrian Purser",license:"MIT",createdAt:"Fri, 10 Nov 2017 17:01:45 +0000",updatedAt:"Sat, 11 Nov 2017 08:50:40 +0100"},{name:"BowTieHorizontal",paramsTypes:{},defaultParams:{},glsl:"// Author: huynx\n// License: MIT\n\nvec2 bottom_left = vec2(0.0, 1.0);\nvec2 bottom_right = vec2(1.0, 1.0);\nvec2 top_left = vec2(0.0, 0.0);\nvec2 top_right = vec2(1.0, 0.0);\nvec2 center = vec2(0.5, 0.5);\n\nfloat check(vec2 p1, vec2 p2, vec2 p3)\n{\n  return (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\n}\n\nbool PointInTriangle (vec2 pt, vec2 p1, vec2 p2, vec2 p3)\n{\n    bool b1, b2, b3;\n    b1 = check(pt, p1, p2) < 0.0;\n    b2 = check(pt, p2, p3) < 0.0;\n    b3 = check(pt, p3, p1) < 0.0;\n    return ((b1 == b2) && (b2 == b3));\n}\n\nbool in_left_triangle(vec2 p){\n  vec2 vertex1, vertex2, vertex3;\n  vertex1 = vec2(progress, 0.5);\n  vertex2 = vec2(0.0, 0.5-progress);\n  vertex3 = vec2(0.0, 0.5+progress);\n  if (PointInTriangle(p, vertex1, vertex2, vertex3))\n  {\n    return true;\n  }\n  return false;\n}\n\nbool in_right_triangle(vec2 p){\n  vec2 vertex1, vertex2, vertex3;\n  vertex1 = vec2(1.0-progress, 0.5);\n  vertex2 = vec2(1.0, 0.5-progress);\n  vertex3 = vec2(1.0, 0.5+progress);\n  if (PointInTriangle(p, vertex1, vertex2, vertex3))\n  {\n    return true;\n  }\n  return false;\n}\n\nfloat blur_edge(vec2 bot1, vec2 bot2, vec2 top, vec2 testPt)\n{\n  vec2 lineDir = bot1 - top;\n  vec2 perpDir = vec2(lineDir.y, -lineDir.x);\n  vec2 dirToPt1 = bot1 - testPt;\n  float dist1 = abs(dot(normalize(perpDir), dirToPt1));\n  \n  lineDir = bot2 - top;\n  perpDir = vec2(lineDir.y, -lineDir.x);\n  dirToPt1 = bot2 - testPt;\n  float min_dist = min(abs(dot(normalize(perpDir), dirToPt1)), dist1);\n  \n  if (min_dist < 0.005) {\n    return min_dist / 0.005;\n  }\n  else  {\n    return 1.0;\n  };\n}\n\n\nvec4 transition (vec2 uv) {\n  if (in_left_triangle(uv))\n  {\n    if (progress < 0.1)\n    {\n      return getFromColor(uv);\n    }\n    if (uv.x < 0.5)\n    {\n      vec2 vertex1 = vec2(progress, 0.5);\n      vec2 vertex2 = vec2(0.0, 0.5-progress);\n      vec2 vertex3 = vec2(0.0, 0.5+progress);\n      return mix(\n        getFromColor(uv),\n        getToColor(uv),\n        blur_edge(vertex2, vertex3, vertex1, uv)\n      );\n    }\n    else\n    {\n      if (progress > 0.0)\n      {\n        return getToColor(uv);\n      }\n      else\n      {\n        return getFromColor(uv);\n      }\n    }    \n  }\n  else if (in_right_triangle(uv))\n  {\n    if (uv.x >= 0.5)\n    {\n      vec2 vertex1 = vec2(1.0-progress, 0.5);\n      vec2 vertex2 = vec2(1.0, 0.5-progress);\n      vec2 vertex3 = vec2(1.0, 0.5+progress);\n      return mix(\n        getFromColor(uv),\n        getToColor(uv),\n        blur_edge(vertex2, vertex3, vertex1, uv)\n      );  \n    }\n    else\n    {\n      return getFromColor(uv);\n    }\n  }\n  else {\n    return getFromColor(uv);\n  }\n}",author:"huynx",license:"MIT",createdAt:"Sat, 24 Mar 2018 12:54:26 +0100",updatedAt:"Sat, 24 Mar 2018 12:54:26 +0100"},{name:"BowTieVertical",paramsTypes:{},defaultParams:{},glsl:"// Author: huynx\r\n// License: MIT\r\n\r\nfloat check(vec2 p1, vec2 p2, vec2 p3)\r\n{\r\n  return (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\r\n}\r\n\r\nbool PointInTriangle (vec2 pt, vec2 p1, vec2 p2, vec2 p3)\r\n{\r\n    bool b1, b2, b3;\r\n    b1 = check(pt, p1, p2) < 0.0;\r\n    b2 = check(pt, p2, p3) < 0.0;\r\n    b3 = check(pt, p3, p1) < 0.0;\r\n    return ((b1 == b2) && (b2 == b3));\r\n}\r\n\r\nbool in_top_triangle(vec2 p){\r\n  vec2 vertex1, vertex2, vertex3;\r\n  vertex1 = vec2(0.5, progress);\r\n  vertex2 = vec2(0.5-progress, 0.0);\r\n  vertex3 = vec2(0.5+progress, 0.0);\r\n  if (PointInTriangle(p, vertex1, vertex2, vertex3))\r\n  {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nbool in_bottom_triangle(vec2 p){\r\n  vec2 vertex1, vertex2, vertex3;\r\n  vertex1 = vec2(0.5, 1.0 - progress);\r\n  vertex2 = vec2(0.5-progress, 1.0);\r\n  vertex3 = vec2(0.5+progress, 1.0);\r\n  if (PointInTriangle(p, vertex1, vertex2, vertex3))\r\n  {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfloat blur_edge(vec2 bot1, vec2 bot2, vec2 top, vec2 testPt)\r\n{\r\n  vec2 lineDir = bot1 - top;\r\n  vec2 perpDir = vec2(lineDir.y, -lineDir.x);\r\n  vec2 dirToPt1 = bot1 - testPt;\r\n  float dist1 = abs(dot(normalize(perpDir), dirToPt1));\r\n  \r\n  lineDir = bot2 - top;\r\n  perpDir = vec2(lineDir.y, -lineDir.x);\r\n  dirToPt1 = bot2 - testPt;\r\n  float min_dist = min(abs(dot(normalize(perpDir), dirToPt1)), dist1);\r\n  \r\n  if (min_dist < 0.005) {\r\n    return min_dist / 0.005;\r\n  }\r\n  else  {\r\n    return 1.0;\r\n  };\r\n}\r\n\r\n\r\nvec4 transition (vec2 uv) {\r\n  if (in_top_triangle(uv))\r\n  {\r\n    if (progress < 0.1)\r\n    {\r\n      return getFromColor(uv);\r\n    }\r\n    if (uv.y < 0.5)\r\n    {\r\n      vec2 vertex1 = vec2(0.5, progress);\r\n      vec2 vertex2 = vec2(0.5-progress, 0.0);\r\n      vec2 vertex3 = vec2(0.5+progress, 0.0);\r\n      return mix(\r\n        getFromColor(uv),\r\n        getToColor(uv),\r\n        blur_edge(vertex2, vertex3, vertex1, uv)\r\n      );\r\n    }\r\n    else\r\n    {\r\n      if (progress > 0.0)\r\n      {\r\n        return getToColor(uv);\r\n      }\r\n      else\r\n      {\r\n        return getFromColor(uv);\r\n      }\r\n    }    \r\n  }\r\n  else if (in_bottom_triangle(uv))\r\n  {\r\n    if (uv.y >= 0.5)\r\n    {\r\n      vec2 vertex1 = vec2(0.5, 1.0-progress);\r\n      vec2 vertex2 = vec2(0.5-progress, 1.0);\r\n      vec2 vertex3 = vec2(0.5+progress, 1.0);\r\n      return mix(\r\n        getFromColor(uv),\r\n        getToColor(uv),\r\n        blur_edge(vertex2, vertex3, vertex1, uv)\r\n      );  \r\n    }\r\n    else\r\n    {\r\n      return getFromColor(uv);\r\n    }\r\n  }\r\n  else {\r\n    return getFromColor(uv);\r\n  }\r\n}",author:"huynx",license:"MIT",createdAt:"Tue, 27 Mar 2018 10:07:54 +0700",updatedAt:"Tue, 27 Mar 2018 10:07:54 +0700"},{name:"ButterflyWaveScrawler",paramsTypes:{amplitude:"float",waves:"float",colorSeparation:"float"},defaultParams:{amplitude:1,waves:30,colorSeparation:.3},glsl:"// Author: mandubian\n// License: MIT\nuniform float amplitude; // = 1.0\nuniform float waves; // = 30.0\nuniform float colorSeparation; // = 0.3\nfloat PI = 3.14159265358979323846264;\nfloat compute(vec2 p, float progress, vec2 center) {\nvec2 o = p*sin(progress * amplitude)-center;\n// horizontal vector\nvec2 h = vec2(1., 0.);\n// butterfly polar function (don't ask me why this one :))\nfloat theta = acos(dot(o, h)) * waves;\nreturn (exp(cos(theta)) - 2.*cos(4.*theta) + pow(sin((2.*theta - PI) / 24.), 5.)) / 10.;\n}\nvec4 transition(vec2 uv) {\n  vec2 p = uv.xy / vec2(1.0).xy;\n  float inv = 1. - progress;\n  vec2 dir = p - vec2(.5);\n  float dist = length(dir);\n  float disp = compute(p, progress, vec2(0.5, 0.5)) ;\n  vec4 texTo = getToColor(p + inv*disp);\n  vec4 texFrom = vec4(\n  getFromColor(p + progress*disp*(1.0 - colorSeparation)).r,\n  getFromColor(p + progress*disp).g,\n  getFromColor(p + progress*disp*(1.0 + colorSeparation)).b,\n  1.0);\n  return texTo*progress + texFrom*inv;\n}\n",author:"mandubian",license:"MIT",createdAt:"Thu, 1 Jun 2017 11:47:17 +0200",updatedAt:"Thu, 1 Jun 2017 11:47:17 +0200"},{name:"CircleCrop",paramsTypes:{bgcolor:"vec4"},defaultParams:{bgcolor:[0,0,0,1]},glsl:"// License: MIT\n// Author: fkuteken\n// ported by gre from https://gist.github.com/fkuteken/f63e3009c1143950dee9063c3b83fb88\n\nuniform vec4 bgcolor; // = vec4(0.0, 0.0, 0.0, 1.0)\n\nvec2 ratio2 = vec2(1.0, 1.0 / ratio);\nfloat s = pow(2.0 * abs(progress - 0.5), 3.0);\n\nvec4 transition(vec2 p) {\n  float dist = length((vec2(p) - 0.5) * ratio2);\n  return mix(\n    progress < 0.5 ? getFromColor(p) : getToColor(p), // branching is ok here as we statically depend on progress uniform (branching won't change over pixels)\n    bgcolor,\n    step(s, dist)\n  );\n}\n",license:"MIT",author:"fkuteken",createdAt:"Mon, 12 Jun 2017 12:52:34 +0800",updatedAt:"Mon, 12 Jun 2017 12:52:34 +0800"},{name:"ColourDistance",paramsTypes:{power:"float"},defaultParams:{power:5},glsl:"// License: MIT\n// Author: P-Seebauer\n// ported by gre from https://gist.github.com/P-Seebauer/2a5fa2f77c883dd661f9\n\nuniform float power; // = 5.0\n\nvec4 transition(vec2 p) {\n  vec4 fTex = getFromColor(p);\n  vec4 tTex = getToColor(p);\n  float m = step(distance(fTex, tTex), progress);\n  return mix(\n    mix(fTex, tTex, m),\n    tTex,\n    pow(progress, power)\n  );\n}\n",license:"MIT",author:"P-Seebauer",createdAt:"Mon, 12 Jun 2017 12:57:42 +0800",updatedAt:"Mon, 12 Jun 2017 12:57:42 +0800"},{name:"CrazyParametricFun",paramsTypes:{a:"float",b:"float",amplitude:"float",smoothness:"float"},defaultParams:{a:4,b:1,amplitude:120,smoothness:.1},glsl:"// Author: mandubian\n// License: MIT\n\nuniform float a; // = 4\nuniform float b; // = 1\nuniform float amplitude; // = 120\nuniform float smoothness; // = 0.1\n\nvec4 transition(vec2 uv) {\n  vec2 p = uv.xy / vec2(1.0).xy;\n  vec2 dir = p - vec2(.5);\n  float dist = length(dir);\n  float x = (a - b) * cos(progress) + b * cos(progress * ((a / b) - 1.) );\n  float y = (a - b) * sin(progress) - b * sin(progress * ((a / b) - 1.));\n  vec2 offset = dir * vec2(sin(progress  * dist * amplitude * x), sin(progress * dist * amplitude * y)) / smoothness;\n  return mix(getFromColor(p + offset), getToColor(p), smoothstep(0.2, 1.0, progress));\n}\n",author:"mandubian",license:"MIT",createdAt:"Thu, 1 Jun 2017 13:03:12 +0200",updatedAt:"Thu, 1 Jun 2017 13:03:12 +0200"},{name:"CrossZoom",paramsTypes:{strength:"float"},defaultParams:{strength:.4},glsl:"// License: MIT\n// Author: rectalogic\n// ported by gre from https://gist.github.com/rectalogic/b86b90161503a0023231\n\n// Converted from https://github.com/rectalogic/rendermix-basic-effects/blob/master/assets/com/rendermix/CrossZoom/CrossZoom.frag\n// Which is based on https://github.com/evanw/glfx.js/blob/master/src/filters/blur/zoomblur.js\n// With additional easing functions from https://github.com/rectalogic/rendermix-basic-effects/blob/master/assets/com/rendermix/Easing/Easing.glsllib\n\nuniform float strength; // = 0.4\n\nconst float PI = 3.141592653589793;\n\nfloat Linear_ease(in float begin, in float change, in float duration, in float time) {\n    return change * time / duration + begin;\n}\n\nfloat Exponential_easeInOut(in float begin, in float change, in float duration, in float time) {\n    if (time == 0.0)\n        return begin;\n    else if (time == duration)\n        return begin + change;\n    time = time / (duration / 2.0);\n    if (time < 1.0)\n        return change / 2.0 * pow(2.0, 10.0 * (time - 1.0)) + begin;\n    return change / 2.0 * (-pow(2.0, -10.0 * (time - 1.0)) + 2.0) + begin;\n}\n\nfloat Sinusoidal_easeInOut(in float begin, in float change, in float duration, in float time) {\n    return -change / 2.0 * (cos(PI * time / duration) - 1.0) + begin;\n}\n\nfloat rand (vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 crossFade(in vec2 uv, in float dissolve) {\n    return mix(getFromColor(uv).rgb, getToColor(uv).rgb, dissolve);\n}\n\nvec4 transition(vec2 uv) {\n    vec2 texCoord = uv.xy / vec2(1.0).xy;\n\n    // Linear interpolate center across center half of the image\n    vec2 center = vec2(Linear_ease(0.25, 0.5, 1.0, progress), 0.5);\n    float dissolve = Exponential_easeInOut(0.0, 1.0, 1.0, progress);\n\n    // Mirrored sinusoidal loop. 0->strength then strength->0\n    float strength = Sinusoidal_easeInOut(0.0, strength, 0.5, progress);\n\n    vec3 color = vec3(0.0);\n    float total = 0.0;\n    vec2 toCenter = center - texCoord;\n\n    /* randomize the lookup values to hide the fixed number of samples */\n    float offset = rand(uv);\n\n    for (float t = 0.0; t <= 40.0; t++) {\n        float percent = (t + offset) / 40.0;\n        float weight = 4.0 * (percent - percent * percent);\n        color += crossFade(texCoord + toCenter * percent * strength, dissolve) * weight;\n        total += weight;\n    }\n    return vec4(color / total, 1.0);\n}\n",license:"MIT",author:"rectalogic",createdAt:"Mon, 12 Jun 2017 12:33:07 +0800",updatedAt:"Mon, 12 Jun 2017 12:33:07 +0800"},{name:"Directional",paramsTypes:{direction:"vec2"},defaultParams:{direction:[0,1]},glsl:"// Author: Gaëtan Renaudeau\n// License: MIT\n\nuniform vec2 direction; // = vec2(0.0, 1.0)\n\nvec4 transition (vec2 uv) {\n  vec2 p = uv + progress * sign(direction);\n  vec2 f = fract(p);\n  return mix(\n    getToColor(f),\n    getFromColor(f),\n    step(0.0, p.y) * step(p.y, 1.0) * step(0.0, p.x) * step(p.x, 1.0)\n  );\n}\n",author:"Gaëtan Renaudeau",license:"MIT",createdAt:"Thu, 19 Apr 2018 12:20:29 +0200",updatedAt:"Thu, 19 Apr 2018 12:20:29 +0200"},{name:"DoomScreenTransition",paramsTypes:{bars:"int",amplitude:"float",noise:"float",frequency:"float",dripScale:"float"},defaultParams:{bars:30,amplitude:2,noise:.1,frequency:.5,dripScale:.5},glsl:'// Author: Zeh Fernando\n// License: MIT\n\n\n// Transition parameters --------\n\n// Number of total bars/columns\nuniform int bars; // = 30\n\n// Multiplier for speed ratio. 0 = no variation when going down, higher = some elements go much faster\nuniform float amplitude; // = 2\n\n// Further variations in speed. 0 = no noise, 1 = super noisy (ignore frequency)\nuniform float noise; // = 0.1\n\n// Speed variation horizontally. the bigger the value, the shorter the waves\nuniform float frequency; // = 0.5\n\n// How much the bars seem to "run" from the middle of the screen first (sticking to the sides). 0 = no drip, 1 = curved drip\nuniform float dripScale; // = 0.5\n\n\n// The code proper --------\n\nfloat rand(int num) {\n  return fract(mod(float(num) * 67123.313, 12.0) * sin(float(num) * 10.3) * cos(float(num)));\n}\n\nfloat wave(int num) {\n  float fn = float(num) * frequency * 0.1 * float(bars);\n  return cos(fn * 0.5) * cos(fn * 0.13) * sin((fn+10.0) * 0.3) / 2.0 + 0.5;\n}\n\nfloat drip(int num) {\n  return sin(float(num) / float(bars - 1) * 3.141592) * dripScale;\n}\n\nfloat pos(int num) {\n  return (noise == 0.0 ? wave(num) : mix(wave(num), rand(num), noise)) + (dripScale == 0.0 ? 0.0 : drip(num));\n}\n\nvec4 transition(vec2 uv) {\n  int bar = int(uv.x * (float(bars)));\n  float scale = 1.0 + pos(bar) * amplitude;\n  float phase = progress * scale;\n  float posY = uv.y / vec2(1.0).y;\n  vec2 p;\n  vec4 c;\n  if (phase + posY < 1.0) {\n    p = vec2(uv.x, uv.y + mix(0.0, vec2(1.0).y, phase)) / vec2(1.0).xy;\n    c = getFromColor(p);\n  } else {\n    p = uv.xy / vec2(1.0).xy;\n    c = getToColor(p);\n  }\n\n  // Finally, apply the color\n  return c;\n}\n',author:"Zeh Fernando",license:"MIT",createdAt:"Tue, 30 May 2017 09:39:09 -0700",updatedAt:"Tue, 30 May 2017 09:39:09 -0700"},{name:"Dreamy",paramsTypes:{},defaultParams:{},glsl:"// Author: mikolalysenko\n// License: MIT\n\nvec2 offset(float progress, float x, float theta) {\n  float phase = progress*progress + progress + theta;\n  float shifty = 0.03*progress*cos(10.0*(progress+x));\n  return vec2(0, shifty);\n}\nvec4 transition(vec2 p) {\n  return mix(getFromColor(p + offset(progress, p.x, 0.0)), getToColor(p + offset(1.0-progress, p.x, 3.14)), progress);\n}\n",author:"mikolalysenko",license:"MIT",createdAt:"Mon, 12 Jun 2017 12:27:38 +0800",updatedAt:"Mon, 12 Jun 2017 12:27:38 +0800"},{name:"DreamyZoom",paramsTypes:{rotation:"float",scale:"float"},defaultParams:{rotation:6,scale:1.2},glsl:"// Author: Zeh Fernando\n// License: MIT\n\n// Definitions --------\n#define DEG2RAD 0.03926990816987241548078304229099 // 1/180*PI\n\n\n// Transition parameters --------\n\n// In degrees\nuniform float rotation; // = 6\n\n// Multiplier\nuniform float scale; // = 1.2\n\n\n// The code proper --------\n\nvec4 transition(vec2 uv) {\n  // Massage parameters\n  float phase = progress < 0.5 ? progress * 2.0 : (progress - 0.5) * 2.0;\n  float angleOffset = progress < 0.5 ? mix(0.0, rotation * DEG2RAD, phase) : mix(-rotation * DEG2RAD, 0.0, phase);\n  float newScale = progress < 0.5 ? mix(1.0, scale, phase) : mix(scale, 1.0, phase);\n  \n  vec2 center = vec2(0, 0);\n\n  // Calculate the source point\n  vec2 assumedCenter = vec2(0.5, 0.5);\n  vec2 p = (uv.xy - vec2(0.5, 0.5)) / newScale * vec2(ratio, 1.0);\n\n  // This can probably be optimized (with distance())\n  float angle = atan(p.y, p.x) + angleOffset;\n  float dist = distance(center, p);\n  p.x = cos(angle) * dist / ratio + 0.5;\n  p.y = sin(angle) * dist + 0.5;\n  vec4 c = progress < 0.5 ? getFromColor(p) : getToColor(p);\n\n  // Finally, apply the color\n  return c + (progress < 0.5 ? mix(0.0, 1.0, phase) : mix(1.0, 0.0, phase));\n}\n",author:"Zeh Fernando",license:"MIT",createdAt:"Tue, 30 May 2017 10:44:06 -0700",updatedAt:"Tue, 30 May 2017 10:44:06 -0700"},{name:"GlitchDisplace",paramsTypes:{},defaultParams:{},glsl:"// Author: Matt DesLauriers\n// License: MIT\n\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\nfloat voronoi( in vec2 x ) {\n    vec2 p = floor( x );\n    vec2 f = fract( x );\n    float res = 8.0;\n    for( float j=-1.; j<=1.; j++ )\n    for( float i=-1.; i<=1.; i++ ) {\n        vec2  b = vec2( i, j );\n        vec2  r = b - f + random( p + b );\n        float d = dot( r, r );\n        res = min( res, d );\n    }\n    return sqrt( res );\n}\n\nvec2 displace(vec4 tex, vec2 texCoord, float dotDepth, float textureDepth, float strength) {\n    float b = voronoi(.003 * texCoord + 2.0);\n    float g = voronoi(0.2 * texCoord);\n    float r = voronoi(texCoord - 1.0);\n    vec4 dt = tex * 1.0;\n    vec4 dis = dt * dotDepth + 1.0 - tex * textureDepth;\n\n    dis.x = dis.x - 1.0 + textureDepth*dotDepth;\n    dis.y = dis.y - 1.0 + textureDepth*dotDepth;\n    dis.x *= strength;\n    dis.y *= strength;\n    vec2 res_uv = texCoord ;\n    res_uv.x = res_uv.x + dis.x - 0.0;\n    res_uv.y = res_uv.y + dis.y;\n    return res_uv;\n}\n\nfloat ease1(float t) {\n  return t == 0.0 || t == 1.0\n    ? t\n    : t < 0.5\n      ? +0.5 * pow(2.0, (20.0 * t) - 10.0)\n      : -0.5 * pow(2.0, 10.0 - (t * 20.0)) + 1.0;\n}\nfloat ease2(float t) {\n  return t == 1.0 ? t : 1.0 - pow(2.0, -10.0 * t);\n}\n\n\n\nvec4 transition(vec2 uv) {\n  vec2 p = uv.xy / vec2(1.0).xy;\n  vec4 color1 = getFromColor(p);\n  vec4 color2 = getToColor(p);\n  vec2 disp = displace(color1, p, 0.33, 0.7, 1.0-ease1(progress));\n  vec2 disp2 = displace(color2, p, 0.33, 0.5, ease2(progress));\n  vec4 dColor1 = getToColor(disp);\n  vec4 dColor2 = getFromColor(disp2);\n  float val = ease1(progress);\n  vec3 gray = vec3(dot(min(dColor2, dColor1).rgb, vec3(0.299, 0.587, 0.114)));\n  dColor2 = vec4(gray, 1.0);\n  dColor2 *= 2.0;\n  color1 = mix(color1, dColor2, smoothstep(0.0, 0.5, progress));\n  color2 = mix(color2, dColor1, smoothstep(1.0, 0.5, progress));\n  return mix(color1, color2, val);\n  //gl_FragColor = mix(gl_FragColor, dColor, smoothstep(0.0, 0.5, progress));\n  \n   //gl_FragColor = mix(texture2D(from, p), texture2D(to, p), progress);\n}\n",author:"Matt DesLauriers",license:"MIT",createdAt:"Tue, 30 May 2017 14:53:04 -0400",updatedAt:"Tue, 30 May 2017 14:53:04 -0400"},{name:"GlitchMemories",paramsTypes:{},defaultParams:{},glsl:"// author: Gunnar Roth\n// based on work from natewave\n// license: MIT\nvec4 transition(vec2 p) {\n  vec2 block = floor(p.xy / vec2(16));\n  vec2 uv_noise = block / vec2(64);\n  uv_noise += floor(vec2(progress) * vec2(1200.0, 3500.0)) / vec2(64);\n  vec2 dist = progress > 0.0 ? (fract(uv_noise) - 0.5) * 0.3 *(1.0 -progress) : vec2(0.0);\n  vec2 red = p + dist * 0.2;\n  vec2 green = p + dist * .3;\n  vec2 blue = p + dist * .5;\n\n  return vec4(mix(getFromColor(red), getToColor(red), progress).r,mix(getFromColor(green), getToColor(green), progress).g,mix(getFromColor(blue), getToColor(blue), progress).b,1.0);\n}\n\n",author:"Gunnar Roth",license:"MIT",createdAt:"Wed, 21 Feb 2018 00:52:15 +0100",updatedAt:"Wed, 21 Feb 2018 19:32:02 +0100"},{name:"GridFlip",paramsTypes:{size:"ivec2",pause:"float",dividerWidth:"float",bgcolor:"vec4",randomness:"float"},defaultParams:{size:[4,4],pause:.1,dividerWidth:.05,bgcolor:[0,0,0,1],randomness:.1},glsl:"// License: MIT\n// Author: TimDonselaar\n// ported by gre from https://gist.github.com/TimDonselaar/9bcd1c4b5934ba60087bdb55c2ea92e5\n\nuniform ivec2 size; // = ivec2(4)\nuniform float pause; // = 0.1\nuniform float dividerWidth; // = 0.05\nuniform vec4 bgcolor; // = vec4(0.0, 0.0, 0.0, 1.0)\nuniform float randomness; // = 0.1\n \nfloat rand (vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat getDelta(vec2 p) {\n  vec2 rectanglePos = floor(vec2(size) * p);\n  vec2 rectangleSize = vec2(1.0 / vec2(size).x, 1.0 / vec2(size).y);\n  float top = rectangleSize.y * (rectanglePos.y + 1.0);\n  float bottom = rectangleSize.y * rectanglePos.y;\n  float left = rectangleSize.x * rectanglePos.x;\n  float right = rectangleSize.x * (rectanglePos.x + 1.0);\n  float minX = min(abs(p.x - left), abs(p.x - right));\n  float minY = min(abs(p.y - top), abs(p.y - bottom));\n  return min(minX, minY);\n}\n\nfloat getDividerSize() {\n  vec2 rectangleSize = vec2(1.0 / vec2(size).x, 1.0 / vec2(size).y);\n  return min(rectangleSize.x, rectangleSize.y) * dividerWidth;\n}\n\nvec4 transition(vec2 p) {\n  if(progress < pause) {\n    float currentProg = progress / pause;\n    float a = 1.0;\n    if(getDelta(p) < getDividerSize()) {\n      a = 1.0 - currentProg;\n    }\n    return mix(bgcolor, getFromColor(p), a);\n  }\n  else if(progress < 1.0 - pause){\n    if(getDelta(p) < getDividerSize()) {\n      return bgcolor;\n    } else {\n      float currentProg = (progress - pause) / (1.0 - pause * 2.0);\n      vec2 q = p;\n      vec2 rectanglePos = floor(vec2(size) * q);\n      \n      float r = rand(rectanglePos) - randomness;\n      float cp = smoothstep(0.0, 1.0 - r, currentProg);\n    \n      float rectangleSize = 1.0 / vec2(size).x;\n      float delta = rectanglePos.x * rectangleSize;\n      float offset = rectangleSize / 2.0 + delta;\n      \n      p.x = (p.x - offset)/abs(cp - 0.5)*0.5 + offset;\n      vec4 a = getFromColor(p);\n      vec4 b = getToColor(p);\n      \n      float s = step(abs(vec2(size).x * (q.x - delta) - 0.5), abs(cp - 0.5));\n      return mix(bgcolor, mix(b, a, step(cp, 0.5)), s);\n    }\n  }\n  else {\n    float currentProg = (progress - 1.0 + pause) / pause;\n    float a = 1.0;\n    if(getDelta(p) < getDividerSize()) {\n      a = currentProg;\n    }\n    return mix(bgcolor, getToColor(p), a);\n  }\n}\n",license:"MIT",author:"TimDonselaar",createdAt:"Mon, 12 Jun 2017 11:32:51 +0800",updatedAt:"Mon, 12 Jun 2017 11:32:51 +0800"},{name:"InvertedPageCurl",paramsTypes:{},defaultParams:{},glsl:'// author: Hewlett-Packard\n// license: BSD 3 Clause\n// Adapted by Sergey Kosarevsky from:\n// http://rectalogic.github.io/webvfx/examples_2transition-shader-pagecurl_8html-example.html\n\n/*\nCopyright (c) 2010 Hewlett-Packard Development Company, L.P. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n   * Redistributions of source code must retain the above copyright\n     notice, this list of conditions and the following disclaimer.\n   * Redistributions in binary form must reproduce the above\n     copyright notice, this list of conditions and the following disclaimer\n     in the documentation and/or other materials provided with the\n     distribution.\n   * Neither the name of Hewlett-Packard nor the names of its\n     contributors may be used to endorse or promote products derived from\n     this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\nin vec2 texCoord;\n*/\n\nconst float MIN_AMOUNT = -0.16;\nconst float MAX_AMOUNT = 1.5;\nfloat amount = progress * (MAX_AMOUNT - MIN_AMOUNT) + MIN_AMOUNT;\n\nconst float PI = 3.141592653589793;\n\nconst float scale = 512.0;\nconst float sharpness = 3.0;\n\nfloat cylinderCenter = amount;\n// 360 degrees * amount\nfloat cylinderAngle = 2.0 * PI * amount;\n\nconst float cylinderRadius = 1.0 / PI / 2.0;\n\nvec3 hitPoint(float hitAngle, float yc, vec3 point, mat3 rrotation)\n{\n        float hitPoint = hitAngle / (2.0 * PI);\n        point.y = hitPoint;\n        return rrotation * point;\n}\n\nvec4 antiAlias(vec4 color1, vec4 color2, float distanc)\n{\n        distanc *= scale;\n        if (distanc < 0.0) return color2;\n        if (distanc > 2.0) return color1;\n        float dd = pow(1.0 - distanc / 2.0, sharpness);\n        return ((color2 - color1) * dd) + color1;\n}\n\nfloat distanceToEdge(vec3 point)\n{\n        float dx = abs(point.x > 0.5 ? 1.0 - point.x : point.x);\n        float dy = abs(point.y > 0.5 ? 1.0 - point.y : point.y);\n        if (point.x < 0.0) dx = -point.x;\n        if (point.x > 1.0) dx = point.x - 1.0;\n        if (point.y < 0.0) dy = -point.y;\n        if (point.y > 1.0) dy = point.y - 1.0;\n        if ((point.x < 0.0 || point.x > 1.0) && (point.y < 0.0 || point.y > 1.0)) return sqrt(dx * dx + dy * dy);\n        return min(dx, dy);\n}\n\nvec4 seeThrough(float yc, vec2 p, mat3 rotation, mat3 rrotation)\n{\n        float hitAngle = PI - (acos(yc / cylinderRadius) - cylinderAngle);\n        vec3 point = hitPoint(hitAngle, yc, rotation * vec3(p, 1.0), rrotation);\n        if (yc <= 0.0 && (point.x < 0.0 || point.y < 0.0 || point.x > 1.0 || point.y > 1.0))\n        {\n            return getToColor(p);\n        }\n\n        if (yc > 0.0) return getFromColor(p);\n\n        vec4 color = getFromColor(point.xy);\n        vec4 tcolor = vec4(0.0);\n\n        return antiAlias(color, tcolor, distanceToEdge(point));\n}\n\nvec4 seeThroughWithShadow(float yc, vec2 p, vec3 point, mat3 rotation, mat3 rrotation)\n{\n        float shadow = distanceToEdge(point) * 30.0;\n        shadow = (1.0 - shadow) / 3.0;\n\n        if (shadow < 0.0) shadow = 0.0; else shadow *= amount;\n\n        vec4 shadowColor = seeThrough(yc, p, rotation, rrotation);\n        shadowColor.r -= shadow;\n        shadowColor.g -= shadow;\n        shadowColor.b -= shadow;\n\n        return shadowColor;\n}\n\nvec4 backside(float yc, vec3 point)\n{\n        vec4 color = getFromColor(point.xy);\n        float gray = (color.r + color.b + color.g) / 15.0;\n        gray += (8.0 / 10.0) * (pow(1.0 - abs(yc / cylinderRadius), 2.0 / 10.0) / 2.0 + (5.0 / 10.0));\n        color.rgb = vec3(gray);\n        return color;\n}\n\nvec4 behindSurface(vec2 p, float yc, vec3 point, mat3 rrotation)\n{\n        float shado = (1.0 - ((-cylinderRadius - yc) / amount * 7.0)) / 6.0;\n        shado *= 1.0 - abs(point.x - 0.5);\n\n        yc = (-cylinderRadius - cylinderRadius - yc);\n\n        float hitAngle = (acos(yc / cylinderRadius) + cylinderAngle) - PI;\n        point = hitPoint(hitAngle, yc, point, rrotation);\n\n        if (yc < 0.0 && point.x >= 0.0 && point.y >= 0.0 && point.x <= 1.0 && point.y <= 1.0 && (hitAngle < PI || amount > 0.5))\n        {\n                shado = 1.0 - (sqrt(pow(point.x - 0.5, 2.0) + pow(point.y - 0.5, 2.0)) / (71.0 / 100.0));\n                shado *= pow(-yc / cylinderRadius, 3.0);\n                shado *= 0.5;\n        }\n        else\n        {\n                shado = 0.0;\n        }\n        return vec4(getToColor(p).rgb - shado, 1.0);\n}\n\nvec4 transition(vec2 p) {\n\n  const float angle = 100.0 * PI / 180.0;\n        float c = cos(-angle);\n        float s = sin(-angle);\n\n        mat3 rotation = mat3( c, s, 0,\n                                                                -s, c, 0,\n                                                                -0.801, 0.8900, 1\n                                                                );\n        c = cos(angle);\n        s = sin(angle);\n\n        mat3 rrotation = mat3(\tc, s, 0,\n                                                                        -s, c, 0,\n                                                                        0.98500, 0.985, 1\n                                                                );\n\n        vec3 point = rotation * vec3(p, 1.0);\n\n        float yc = point.y - cylinderCenter;\n\n        if (yc < -cylinderRadius)\n        {\n                // Behind surface\n                return behindSurface(p,yc, point, rrotation);\n        }\n\n        if (yc > cylinderRadius)\n        {\n                // Flat surface\n                return getFromColor(p);\n        }\n\n        float hitAngle = (acos(yc / cylinderRadius) + cylinderAngle) - PI;\n\n        float hitAngleMod = mod(hitAngle, 2.0 * PI);\n        if ((hitAngleMod > PI && amount < 0.5) || (hitAngleMod > PI/2.0 && amount < 0.0))\n        {\n                return seeThrough(yc, p, rotation, rrotation);\n        }\n\n        point = hitPoint(hitAngle, yc, point, rrotation);\n\n        if (point.x < 0.0 || point.y < 0.0 || point.x > 1.0 || point.y > 1.0)\n        {\n                return seeThroughWithShadow(yc, p, point, rotation, rrotation);\n        }\n\n        vec4 color = backside(yc, point);\n\n        vec4 otherColor;\n        if (yc < 0.0)\n        {\n                float shado = 1.0 - (sqrt(pow(point.x - 0.5, 2.0) + pow(point.y - 0.5, 2.0)) / 0.71);\n                shado *= pow(-yc / cylinderRadius, 3.0);\n                shado *= 0.5;\n                otherColor = vec4(0.0, 0.0, 0.0, shado);\n        }\n        else\n        {\n                otherColor = getFromColor(p);\n        }\n\n        color = antiAlias(color, otherColor, cylinderRadius - abs(yc));\n\n        vec4 cl = seeThroughWithShadow(yc, p, point, rotation, rrotation);\n        float dist = distanceToEdge(point);\n\n        return antiAlias(color, cl, dist);\n}\n',author:"Hewlett-Packard",license:"BSD 3 Clause",createdAt:"Wed, 21 Feb 2018 01:13:49 +0100",updatedAt:"Wed, 21 Feb 2018 16:00:02 +0100"},{name:"LinearBlur",paramsTypes:{intensity:"float"},defaultParams:{intensity:.1},glsl:"// author: gre\n// license: MIT\nuniform float intensity; // = 0.1\nconst int passes = 6;\n\nvec4 transition(vec2 uv) {\n    vec4 c1 = vec4(0.0);\n    vec4 c2 = vec4(0.0);\n\n    float disp = intensity*(0.5-distance(0.5, progress));\n    for (int xi=0; xi<passes; xi++)\n    {\n        float x = float(xi) / float(passes) - 0.5;\n        for (int yi=0; yi<passes; yi++)\n        {\n            float y = float(yi) / float(passes) - 0.5;\n            vec2 v = vec2(x,y);\n            float d = disp;\n            c1 += getFromColor( uv + d*v);\n            c2 += getToColor( uv + d*v);\n        }\n    }\n    c1 /= float(passes*passes);\n    c2 /= float(passes*passes);\n    return mix(c1, c2, progress);\n}\n",author:"gre",license:"MIT",createdAt:"Fri, 23 Feb 2018 15:18:22 +0100",updatedAt:"Fri, 23 Feb 2018 15:18:22 +0100"},{name:"Mosaic",paramsTypes:{endx:"int",endy:"int"},defaultParams:{endx:2,endy:-1},glsl:"// License: MIT\n// Author: Xaychru\n// ported by gre from https://gist.github.com/Xaychru/130bb7b7affedbda9df5\n\n#define PI 3.14159265358979323\n#define POW2(X) X*X\n#define POW3(X) X*X*X\nuniform int endx; // = 2\nuniform int endy; // = -1\n\nfloat Rand(vec2 v) {\n  return fract(sin(dot(v.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvec2 Rotate(vec2 v, float a) {\n  mat2 rm = mat2(cos(a), -sin(a),\n                 sin(a), cos(a));\n  return rm*v;\n}\nfloat CosInterpolation(float x) {\n  return -cos(x*PI)/2.+.5;\n}\nvec4 transition(vec2 uv) {\n  vec2 p = uv.xy / vec2(1.0).xy - .5;\n  vec2 rp = p;\n  float rpr = (progress*2.-1.);\n  float z = -(rpr*rpr*2.) + 3.;\n  float az = abs(z);\n  rp *= az;\n  rp += mix(vec2(.5, .5), vec2(float(endx) + .5, float(endy) + .5), POW2(CosInterpolation(progress)));\n  vec2 mrp = mod(rp, 1.);\n  vec2 crp = rp;\n  bool onEnd = int(floor(crp.x))==endx&&int(floor(crp.y))==endy;\n  if(!onEnd) {\n    float ang = float(int(Rand(floor(crp))*4.))*.5*PI;\n    mrp = vec2(.5) + Rotate(mrp-vec2(.5), ang);\n  }\n  if(onEnd || Rand(floor(crp))>.5) {\n    return getToColor(mrp);\n  } else {\n    return getFromColor(mrp);\n  }\n}\n",license:"MIT",author:"Xaychru",createdAt:"Mon, 12 Jun 2017 10:26:51 +0800",updatedAt:"Mon, 12 Jun 2017 10:26:51 +0800"},{name:"PolkaDotsCurtain",paramsTypes:{dots:"float",center:"vec2"},defaultParams:{dots:20,center:[0,0]},glsl:"// author: bobylito\n// license: MIT\nconst float SQRT_2 = 1.414213562373;\nuniform float dots;// = 20.0;\nuniform vec2 center;// = vec2(0, 0);\n\nvec4 transition(vec2 uv) {\n  bool nextImage = distance(fract(uv * dots), vec2(0.5, 0.5)) < ( progress / distance(uv, center));\n  return nextImage ? getToColor(uv) : getFromColor(uv);\n}\n",author:"bobylito",license:"MIT",createdAt:"Tue, 20 Feb 2018 23:41:45 +0100",updatedAt:"Tue, 20 Feb 2018 23:41:45 +0100"},{name:"Radial",paramsTypes:{smoothness:"float"},defaultParams:{smoothness:1},glsl:"// License: MIT\n// Author: Xaychru\n// ported by gre from https://gist.github.com/Xaychru/ce1d48f0ce00bb379750\n\nuniform float smoothness; // = 1.0\n\nconst float PI = 3.141592653589;\n\nvec4 transition(vec2 p) {\n  vec2 rp = p*2.-1.;\n  return mix(\n    getToColor(p),\n    getFromColor(p),\n    smoothstep(0., smoothness, atan(rp.y,rp.x) - (progress-.5) * PI * 2.5)\n  );\n}\n",license:"MIT",author:"Xaychru",createdAt:"Mon, 12 Jun 2017 10:36:24 +0800",updatedAt:"Mon, 12 Jun 2017 10:36:24 +0800"},{name:"SimpleZoom",paramsTypes:{zoom_quickness:"float"},defaultParams:{zoom_quickness:.8},glsl:"// Author: 0gust1\n// License: MIT\n\nuniform float zoom_quickness; // = 0.8\nfloat nQuick = clamp(zoom_quickness,0.2,1.0);\n\nvec2 zoom(vec2 uv, float amount) {\n  return 0.5 + ((uv - 0.5) * (1.0-amount));\t\n}\n\nvec4 transition (vec2 uv) {\n  return mix(\n    getFromColor(zoom(uv, smoothstep(0.0, nQuick, progress))),\n    getToColor(uv),\n   smoothstep(nQuick-0.2, 1.0, progress)\n  );\n}",author:"0gust1",license:"MIT",createdAt:"Tue, 6 Mar 2018 00:43:47 +0100",updatedAt:"Tue, 6 Mar 2018 00:43:47 +0100"},{name:"StereoViewer",paramsTypes:{zoom:"float",corner_radius:"float"},defaultParams:{zoom:.88,corner_radius:.22},glsl:"// Tunable parameters\n// How much to zoom (out) for the effect ~ 0.5 - 1.0\nuniform float zoom; // = 0.88\n// Corner radius as a fraction of the image height\nuniform float corner_radius;  // = 0.22\n\n// author: Ted Schundler\n// license: BSD 2 Clause\n// Free for use and modification by anyone with credit\n\n// Copyright (c) 2016, Theodore K Schundler\n// All rights reserved.\n\n// Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n// 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n///////////////////////////////////////////////////////////////////////////////\n// Stereo Viewer Toy Transition                                              //\n//                                                                           //\n// Inspired by ViewMaster / Image3D image viewer devices.                    //\n// This effect is similar to what you see when you press the device's lever. //\n// There is a quick zoom in / out to make the transition 'valid' for GLSL.io //\n///////////////////////////////////////////////////////////////////////////////\n\nconst vec4 black = vec4(0.0, 0.0, 0.0, 1.0);\nconst vec2 c00 = vec2(0.0, 0.0); // the four corner points\nconst vec2 c01 = vec2(0.0, 1.0);\nconst vec2 c11 = vec2(1.0, 1.0);\nconst vec2 c10 = vec2(1.0, 0.0);\n\n// Check if a point is within a given corner\nbool in_corner(vec2 p, vec2 corner, vec2 radius) {\n  // determine the direction we want to be filled\n  vec2 axis = (c11 - corner) - corner;\n\n  // warp the point so we are always testing the bottom left point with the\n  // circle centered on the origin\n  p = p - (corner + axis * radius);\n  p *= axis / radius;\n  return (p.x > 0.0 && p.y > -1.0) || (p.y > 0.0 && p.x > -1.0) || dot(p, p) < 1.0;\n}\n\n// Check all four corners\n// return a float for v2 for anti-aliasing?\nbool test_rounded_mask(vec2 p, vec2 corner_size) {\n  return\n      in_corner(p, c00, corner_size) &&\n      in_corner(p, c01, corner_size) &&\n      in_corner(p, c10, corner_size) &&\n      in_corner(p, c11, corner_size);\n}\n\n// Screen blend mode - https://en.wikipedia.org/wiki/Blend_modes\n// This more closely approximates what you see than linear blending\nvec4 screen(vec4 a, vec4 b) {\n  return 1.0 - (1.0 - a) * (1.0 -b);\n}\n\n// Given RGBA, find a value that when screened with itself\n// will yield the original value.\nvec4 unscreen(vec4 c) {\n  return 1.0 - sqrt(1.0 - c);\n}\n\n// Grab a pixel, only if it isn't masked out by the rounded corners\nvec4 sample_with_corners_from(vec2 p, vec2 corner_size) {\n  p = (p - 0.5) / zoom + 0.5;\n  if (!test_rounded_mask(p, corner_size)) {\n    return black;\n  }\n  return unscreen(getFromColor(p));\n}\n\nvec4 sample_with_corners_to(vec2 p, vec2 corner_size) {\n  p = (p - 0.5) / zoom + 0.5;\n  if (!test_rounded_mask(p, corner_size)) {\n    return black;\n  }\n  return unscreen(getToColor(p));\n}\n\n// special sampling used when zooming - extra zoom parameter and don't unscreen\nvec4 simple_sample_with_corners_from(vec2 p, vec2 corner_size, float zoom_amt) {\n  p = (p - 0.5) / (1.0 - zoom_amt + zoom * zoom_amt) + 0.5;\n  if (!test_rounded_mask(p, corner_size)) {\n    return black;\n  }\n  return getFromColor(p);\n}\n\nvec4 simple_sample_with_corners_to(vec2 p, vec2 corner_size, float zoom_amt) {\n  p = (p - 0.5) / (1.0 - zoom_amt + zoom * zoom_amt) + 0.5;\n  if (!test_rounded_mask(p, corner_size)) {\n    return black;\n  }\n  return getToColor(p);\n}\n\n// Basic 2D affine transform matrix helpers\n// These really shouldn't be used in a fragment shader - I should work out the\n// the math for a translate & rotate function as a pair of dot products instead\n\nmat3 rotate2d(float angle, float ratio) {\n  float s = sin(angle);\n  float c = cos(angle);\n  return mat3(\n    c, s ,0.0,\n    -s, c, 0.0,\n    0.0, 0.0, 1.0);\n}\n\nmat3 translate2d(float x, float y) {\n  return mat3(\n    1.0, 0.0, 0,\n    0.0, 1.0, 0,\n    -x, -y, 1.0);\n}\n\nmat3 scale2d(float x, float y) {\n  return mat3(\n    x, 0.0, 0,\n    0.0, y, 0,\n    0, 0, 1.0);\n}\n\n// Split an image and rotate one up and one down along off screen pivot points\nvec4 get_cross_rotated(vec3 p3, float angle, vec2 corner_size, float ratio) {\n  angle = angle * angle; // easing\n  angle /= 2.4; // works out to be a good number of radians\n\n  mat3 center_and_scale = translate2d(-0.5, -0.5) * scale2d(1.0, ratio);\n  mat3 unscale_and_uncenter = scale2d(1.0, 1.0/ratio) * translate2d(0.5,0.5);\n  mat3 slide_left = translate2d(-2.0,0.0);\n  mat3 slide_right = translate2d(2.0,0.0);\n  mat3 rotate = rotate2d(angle, ratio);\n\n  mat3 op_a = center_and_scale * slide_right * rotate * slide_left * unscale_and_uncenter;\n  mat3 op_b = center_and_scale * slide_left * rotate * slide_right * unscale_and_uncenter;\n\n  vec4 a = sample_with_corners_from((op_a * p3).xy, corner_size);\n  vec4 b = sample_with_corners_from((op_b * p3).xy, corner_size);\n\n  return screen(a, b);\n}\n\n// Image stays put, but this time move two masks\nvec4 get_cross_masked(vec3 p3, float angle, vec2 corner_size, float ratio) {\n  angle = 1.0 - angle;\n  angle = angle * angle; // easing\n  angle /= 2.4;\n\n  vec4 img;\n\n  mat3 center_and_scale = translate2d(-0.5, -0.5) * scale2d(1.0, ratio);\n  mat3 unscale_and_uncenter = scale2d(1.0 / zoom, 1.0 / (zoom * ratio)) * translate2d(0.5,0.5);\n  mat3 slide_left = translate2d(-2.0,0.0);\n  mat3 slide_right = translate2d(2.0,0.0);\n  mat3 rotate = rotate2d(angle, ratio);\n\n  mat3 op_a = center_and_scale * slide_right * rotate * slide_left * unscale_and_uncenter;\n  mat3 op_b = center_and_scale * slide_left * rotate * slide_right * unscale_and_uncenter;\n\n  bool mask_a = test_rounded_mask((op_a * p3).xy, corner_size);\n  bool mask_b = test_rounded_mask((op_b * p3).xy, corner_size);\n\n  if (mask_a || mask_b) {\n    img = sample_with_corners_to(p3.xy, corner_size);\n    return screen(mask_a ? img : black, mask_b ? img : black);\n  } else {\n    return black;\n  }\n}\n\nvec4 transition(vec2 uv) {\n  float a;\n  vec2 p=uv.xy/vec2(1.0).xy;\n  vec3 p3 = vec3(p.xy, 1.0); // for 2D matrix transforms\n\n  // corner is warped to represent to size after mapping to 1.0, 1.0\n  vec2 corner_size = vec2(corner_radius / ratio, corner_radius);\n\n  if (progress <= 0.0) {\n    // 0.0: start with the base frame always\n    return getFromColor(p);\n  } else if (progress < 0.1) {\n    // 0.0-0.1: zoom out and add rounded corners\n    a = progress / 0.1;\n    return  simple_sample_with_corners_from(p, corner_size * a, a);\n  } else if (progress < 0.48) {\n    // 0.1-0.48: Split original image apart\n    a = (progress - 0.1)/0.38;\n    return get_cross_rotated(p3, a, corner_size, ratio);\n  } else if (progress < 0.9) {\n    // 0.48-0.52: black\n    // 0.52 - 0.9: unmask new image\n    return get_cross_masked(p3, (progress - 0.52)/0.38, corner_size, ratio);\n  } else if (progress < 1.0) {\n    // zoom out and add rounded corners\n    a = (1.0 - progress) / 0.1;\n    return simple_sample_with_corners_to(p, corner_size * a, a);\n  } else {\n    // 1.0 end with base frame\n    return getToColor(p);\n  }\n}\n",author:"Ted Schundler",license:"BSD 2 Clause",createdAt:"Tue, 20 Feb 2018 23:20:29 +0100",updatedAt:"Wed, 21 Feb 2018 15:42:00 +0100"},{name:"Swirl",paramsTypes:{},defaultParams:{},glsl:"// License: MIT\n// Author: Sergey Kosarevsky\n// ( http://www.linderdaum.com )\n// ported by gre from https://gist.github.com/corporateshark/cacfedb8cca0f5ce3f7c\n\nvec4 transition(vec2 UV)\n{\n\tfloat Radius = 1.0;\n\n\tfloat T = progress;\n\n\tUV -= vec2( 0.5, 0.5 );\n\n\tfloat Dist = length(UV);\n\n\tif ( Dist < Radius )\n\t{\n\t\tfloat Percent = (Radius - Dist) / Radius;\n\t\tfloat A = ( T <= 0.5 ) ? mix( 0.0, 1.0, T/0.5 ) : mix( 1.0, 0.0, (T-0.5)/0.5 );\n\t\tfloat Theta = Percent * Percent * A * 8.0 * 3.14159;\n\t\tfloat S = sin( Theta );\n\t\tfloat C = cos( Theta );\n\t\tUV = vec2( dot(UV, vec2(C, -S)), dot(UV, vec2(S, C)) );\n\t}\n\tUV += vec2( 0.5, 0.5 );\n\n\tvec4 C0 = getFromColor(UV);\n\tvec4 C1 = getToColor(UV);\n\n\treturn mix( C0, C1, T );\n}\n",license:"MIT",author:"Sergey Kosarevsky",createdAt:"Mon, 12 Jun 2017 12:38:27 +0800",updatedAt:"Mon, 12 Jun 2017 12:38:27 +0800"},{name:"WaterDrop",paramsTypes:{amplitude:"float",speed:"float"},defaultParams:{amplitude:30,speed:30},glsl:"// author: Paweł Płóciennik\n// license: MIT\nuniform float amplitude; // = 30\nuniform float speed; // = 30\n\nvec4 transition(vec2 p) {\n  vec2 dir = p - vec2(.5);\n  float dist = length(dir);\n\n  if (dist > progress) {\n    return mix(getFromColor( p), getToColor( p), progress);\n  } else {\n    vec2 offset = dir * sin(dist * amplitude - progress * speed);\n    return mix(getFromColor( p + offset), getToColor( p), progress);\n  }\n}\n",author:"Paweł Płóciennik",license:"MIT",createdAt:"Wed, 21 Feb 2018 19:37:15 +0100",updatedAt:"Wed, 21 Feb 2018 19:37:15 +0100"},{name:"ZoomInCircles",paramsTypes:{},defaultParams:{},glsl:"// License: MIT\n// Author: dycm8009\n// ported by gre from https://gist.github.com/dycm8009/948e99b1800e81ad909a\n\nvec2 zoom(vec2 uv, float amount) {\n  return 0.5 + ((uv - 0.5) * amount);\t\n}\n\nvec2 ratio2 = vec2(1.0, 1.0 / ratio);\n\nvec4 transition(vec2 uv) {\n  // TODO: some timing are hardcoded but should be one or many parameters\n  // TODO: should also be able to configure how much circles\n  // TODO: if() branching should be avoided when possible, prefer use of step() & other functions\n  vec2 r = 2.0 * ((vec2(uv.xy) - 0.5) * ratio2);\n  float pro = progress / 0.8;\n  float z = pro * 0.2;\n  float t = 0.0;\n  if (pro > 1.0) {\n    z = 0.2 + (pro - 1.0) * 5.;\n    t = clamp((progress - 0.8) / 0.07, 0.0, 1.0);\n  }\n  if (length(r) < 0.5+z) {\n    // uv = zoom(uv, 0.9 - 0.1 * pro);\n  }\n  else if (length(r) < 0.8+z*1.5) {\n    uv = zoom(uv, 1.0 - 0.15 * pro);\n    t = t * 0.5;\n  }\n  else if (length(r) < 1.2+z*2.5) {\n    uv = zoom(uv, 1.0 - 0.2 * pro);\n    t = t * 0.2;\n  }\n  else {\n    uv = zoom(uv, 1.0 - 0.25 * pro);\n  }\n  return mix(getFromColor(uv), getToColor(uv), t);\n}\n",license:"MIT",author:"dycm8009",createdAt:"Mon, 12 Jun 2017 11:24:34 +0800",updatedAt:"Mon, 12 Jun 2017 11:24:34 +0800"},{name:"angular",paramsTypes:{startingAngle:"float"},defaultParams:{startingAngle:90},glsl:"// Author: Fernando Kuteken\n// License: MIT\n\n#define PI 3.141592653589\n\nuniform float startingAngle; // = 90;\n\nvec4 transition (vec2 uv) {\n  \n  float offset = startingAngle * PI / 180.0;\n  float angle = atan(uv.y - 0.5, uv.x - 0.5) + offset;\n  float normalizedAngle = (angle + PI) / (2.0 * PI);\n  \n  normalizedAngle = normalizedAngle - floor(normalizedAngle);\n\n  return mix(\n    getFromColor(uv),\n    getToColor(uv),\n    step(normalizedAngle, progress)\n    );\n}\n",author:"Fernando Kuteken",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"burn",paramsTypes:{color:"vec3"},defaultParams:{color:[.9,.4,.2]},glsl:"// author: gre\n// License: MIT\nuniform vec3 color /* = vec3(0.9, 0.4, 0.2) */;\nvec4 transition (vec2 uv) {\n  return mix(\n    getFromColor(uv) + vec4(progress*color, 1.0),\n    getToColor(uv) + vec4((1.0-progress)*color, 1.0),\n    progress\n  );\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"cannabisleaf",paramsTypes:{},defaultParams:{},glsl:"// Author: @Flexi23\n// License: MIT\n\n// inspired by http://www.wolframalpha.com/input/?i=cannabis+curve\n\nvec4 transition (vec2 uv) {\n  if(progress == 0.0){\n    return getFromColor(uv);\n  }\n  vec2 leaf_uv = (uv - vec2(0.5))/10./pow(progress,3.5);\n\tleaf_uv.y += 0.35;\n\tfloat r = 0.18;\n\tfloat o = atan(leaf_uv.y, leaf_uv.x);\n  return mix(getFromColor(uv), getToColor(uv), 1.-step(1. - length(leaf_uv)+r*(1.+sin(o))*(1.+0.9 * cos(8.*o))*(1.+0.1*cos(24.*o))*(0.9+0.05*cos(200.*o)), 1.));\n}\n",author:"@Flexi23",license:"MIT",createdAt:"Thu, 1 Jun 2017 15:58:58 +0200",updatedAt:"Thu, 1 Jun 2017 15:58:58 +0200"},{name:"circle",paramsTypes:{center:"vec2",backColor:"vec3"},defaultParams:{center:[.5,.5],backColor:[.1,.1,.1]},glsl:"// Author: Fernando Kuteken\n// License: MIT\n\nuniform vec2 center; // = vec2(0.5, 0.5);\nuniform vec3 backColor; // = vec3(0.1, 0.1, 0.1);\n\nvec4 transition (vec2 uv) {\n  \n  float distance = length(uv - center);\n  float radius = sqrt(8.0) * abs(progress - 0.5);\n  \n  if (distance > radius) {\n    return vec4(backColor, 1.0);\n  }\n  else {\n    if (progress < 0.5) return getFromColor(uv);\n    else return getToColor(uv);\n  }\n}\n",author:"Fernando Kuteken",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"circleopen",paramsTypes:{smoothness:"float",opening:"bool"},defaultParams:{smoothness:.3,opening:!0},glsl:"// author: gre\n// License: MIT\nuniform float smoothness; // = 0.3\nuniform bool opening; // = true\n\nconst vec2 center = vec2(0.5, 0.5);\nconst float SQRT_2 = 1.414213562373;\n\nvec4 transition (vec2 uv) {\n  float x = opening ? progress : 1.-progress;\n  float m = smoothstep(-smoothness, 0.0, SQRT_2*distance(center, uv) - x*(1.+smoothness));\n  return mix(getFromColor(uv), getToColor(uv), opening ? 1.-m : m);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"colorphase",paramsTypes:{fromStep:"vec4",toStep:"vec4"},defaultParams:{fromStep:[0,.2,.4,0],toStep:[.6,.8,1,1]},glsl:"// Author: gre\n// License: MIT\n\n// Usage: fromStep and toStep must be in [0.0, 1.0] range \n// and all(fromStep) must be < all(toStep)\n\nuniform vec4 fromStep; // = vec4(0.0, 0.2, 0.4, 0.0)\nuniform vec4 toStep; // = vec4(0.6, 0.8, 1.0, 1.0)\n\nvec4 transition (vec2 uv) {\n  vec4 a = getFromColor(uv);\n  vec4 b = getToColor(uv);\n  return mix(a, b, smoothstep(fromStep, toStep, vec4(progress)));\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"crosshatch",paramsTypes:{center:"vec2",threshold:"float",fadeEdge:"float"},defaultParams:{center:[.5,.5],threshold:3,fadeEdge:.1},glsl:"// License: MIT\n// Author: pthrasher\n// adapted by gre from https://gist.github.com/pthrasher/04fd9a7de4012cbb03f6\n\nuniform vec2 center; // = vec2(0.5)\nuniform float threshold; // = 3.0\nuniform float fadeEdge; // = 0.1\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvec4 transition(vec2 p) {\n  float dist = distance(center, p) / threshold;\n  float r = progress - min(rand(vec2(p.y, 0.0)), rand(vec2(0.0, p.x)));\n  return mix(getFromColor(p), getToColor(p), mix(0.0, mix(step(dist, r), 1.0, smoothstep(1.0-fadeEdge, 1.0, progress)), smoothstep(0.0, fadeEdge, progress)));    \n}\n",license:"MIT",author:"pthrasher",createdAt:"Mon, 12 Jun 2017 10:02:12 +0800",updatedAt:"Mon, 12 Jun 2017 10:02:12 +0800"},{name:"crosswarp",paramsTypes:{},defaultParams:{},glsl:"// Author: Eke Péter <peterekepeter@gmail.com>\n// License: MIT\nvec4 transition(vec2 p) {\n  float x = progress;\n  x=smoothstep(.0,1.0,(x*2.0+p.x-1.0));\n  return mix(getFromColor((p-.5)*(1.-x)+.5), getToColor((p-.5)*x+.5), x);\n}\n",author:"Eke Péter <peterekepeter@gmail.com>",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"cube",paramsTypes:{persp:"float",unzoom:"float",reflection:"float",floating:"float"},defaultParams:{persp:.7,unzoom:.3,reflection:.4,floating:3},glsl:"// Author: gre\n// License: MIT\nuniform float persp; // = 0.7\nuniform float unzoom; // = 0.3\nuniform float reflection; // = 0.4\nuniform float floating; // = 3.0\n\nvec2 project (vec2 p) {\n  return p * vec2(1.0, -1.2) + vec2(0.0, -floating/100.);\n}\n\nbool inBounds (vec2 p) {\n  return all(lessThan(vec2(0.0), p)) && all(lessThan(p, vec2(1.0)));\n}\n\nvec4 bgColor (vec2 p, vec2 pfr, vec2 pto) {\n  vec4 c = vec4(0.0, 0.0, 0.0, 1.0);\n  pfr = project(pfr);\n  // FIXME avoid branching might help perf!\n  if (inBounds(pfr)) {\n    c += mix(vec4(0.0), getFromColor(pfr), reflection * mix(1.0, 0.0, pfr.y));\n  }\n  pto = project(pto);\n  if (inBounds(pto)) {\n    c += mix(vec4(0.0), getToColor(pto), reflection * mix(1.0, 0.0, pto.y));\n  }\n  return c;\n}\n\n// p : the position\n// persp : the perspective in [ 0, 1 ]\n// center : the xcenter in [0, 1] \\ 0.5 excluded\nvec2 xskew (vec2 p, float persp, float center) {\n  float x = mix(p.x, 1.0-p.x, center);\n  return (\n    (\n      vec2( x, (p.y - 0.5*(1.0-persp) * x) / (1.0+(persp-1.0)*x) )\n      - vec2(0.5-distance(center, 0.5), 0.0)\n    )\n    * vec2(0.5 / distance(center, 0.5) * (center<0.5 ? 1.0 : -1.0), 1.0)\n    + vec2(center<0.5 ? 0.0 : 1.0, 0.0)\n  );\n}\n\nvec4 transition(vec2 op) {\n  float uz = unzoom * 2.0*(0.5-distance(0.5, progress));\n  vec2 p = -uz*0.5+(1.0+uz) * op;\n  vec2 fromP = xskew(\n    (p - vec2(progress, 0.0)) / vec2(1.0-progress, 1.0),\n    1.0-mix(progress, 0.0, persp),\n    0.0\n  );\n  vec2 toP = xskew(\n    p / vec2(progress, 1.0),\n    mix(pow(progress, 2.0), 1.0, persp),\n    1.0\n  );\n  // FIXME avoid branching might help perf!\n  if (inBounds(fromP)) {\n    return getFromColor(fromP);\n  }\n  else if (inBounds(toP)) {\n    return getToColor(toP);\n  }\n  return bgColor(op, fromP, toP);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"directionalwarp",paramsTypes:{direction:"vec2"},defaultParams:{direction:[-1,1]},glsl:"// Author: pschroen\n// License: MIT\n\nuniform vec2 direction; // = vec2(-1.0, 1.0)\n\nconst float smoothness = 0.5;\nconst vec2 center = vec2(0.5, 0.5);\n\nvec4 transition (vec2 uv) {\n  vec2 v = normalize(direction);\n  v /= abs(v.x) + abs(v.y);\n  float d = v.x * center.x + v.y * center.y;\n  float m = 1.0 - smoothstep(-smoothness, 0.0, v.x * uv.x + v.y * uv.y - (d - 0.5 + progress * (1.0 + smoothness)));\n  return mix(getFromColor((uv - 0.5) * (1.0 - m) + 0.5), getToColor((uv - 0.5) * m + 0.5), m);\n}\n",author:"pschroen",license:"MIT",createdAt:"Wed, 13 Dec 2017 12:08:49 -0500",updatedAt:"Wed, 13 Dec 2017 12:08:49 -0500"},{name:"directionalwipe",paramsTypes:{direction:"vec2",smoothness:"float"},defaultParams:{direction:[1,-1],smoothness:.5},glsl:"// Author: gre\n// License: MIT\n\nuniform vec2 direction; // = vec2(1.0, -1.0)\nuniform float smoothness; // = 0.5\n \nconst vec2 center = vec2(0.5, 0.5);\n \nvec4 transition (vec2 uv) {\n  vec2 v = normalize(direction);\n  v /= abs(v.x)+abs(v.y);\n  float d = v.x * center.x + v.y * center.y;\n  float m =\n    (1.0-step(progress, 0.0)) * // there is something wrong with our formula that makes m not equals 0.0 with progress is 0.0\n    (1.0 - smoothstep(-smoothness, 0.0, v.x * uv.x + v.y * uv.y - (d-0.5+progress*(1.+smoothness))));\n  return mix(getFromColor(uv), getToColor(uv), m);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"displacement",paramsTypes:{displacementMap:"sampler2D",strength:"float"},defaultParams:{displacementMap:null,strength:.5},glsl:"// Author: Travis Fischer\n// License: MIT\n//\n// Adapted from a Codrops article by Robin Delaporte\n// https://tympanus.net/Development/DistortionHoverEffect\n\nuniform sampler2D displacementMap;\n\nuniform float strength; // = 0.5\n\nvec4 transition (vec2 uv) {\n  float displacement = texture2D(displacementMap, uv).r * strength;\n\n  vec2 uvFrom = vec2(uv.x + progress * displacement, uv.y);\n  vec2 uvTo = vec2(uv.x - (1.0 - progress) * displacement, uv.y);\n\n  return mix(\n    getFromColor(uvFrom),\n    getToColor(uvTo),\n    progress\n  );\n}\n",author:"Travis Fischer",license:"MIT",createdAt:"Tue, 10 Apr 2018 23:03:38 -0400",updatedAt:"Tue, 10 Apr 2018 23:03:38 -0400"},{name:"doorway",paramsTypes:{reflection:"float",perspective:"float",depth:"float"},defaultParams:{reflection:.4,perspective:.4,depth:3},glsl:"// author: gre\n// License: MIT \nuniform float reflection; // = 0.4\nuniform float perspective; // = 0.4\nuniform float depth; // = 3\n\nconst vec4 black = vec4(0.0, 0.0, 0.0, 1.0);\nconst vec2 boundMin = vec2(0.0, 0.0);\nconst vec2 boundMax = vec2(1.0, 1.0);\n\nbool inBounds (vec2 p) {\n  return all(lessThan(boundMin, p)) && all(lessThan(p, boundMax));\n}\n\nvec2 project (vec2 p) {\n  return p * vec2(1.0, -1.2) + vec2(0.0, -0.02);\n}\n\nvec4 bgColor (vec2 p, vec2 pto) {\n  vec4 c = black;\n  pto = project(pto);\n  if (inBounds(pto)) {\n    c += mix(black, getToColor(pto), reflection * mix(1.0, 0.0, pto.y));\n  }\n  return c;\n}\n\n\nvec4 transition (vec2 p) {\n  vec2 pfr = vec2(-1.), pto = vec2(-1.);\n  float middleSlit = 2.0 * abs(p.x-0.5) - progress;\n  if (middleSlit > 0.0) {\n    pfr = p + (p.x > 0.5 ? -1.0 : 1.0) * vec2(0.5*progress, 0.0);\n    float d = 1.0/(1.0+perspective*progress*(1.0-middleSlit));\n    pfr.y -= d/2.;\n    pfr.y *= d;\n    pfr.y += d/2.;\n  }\n  float size = mix(1.0, depth, 1.-progress);\n  pto = (p + vec2(-0.5, -0.5)) * vec2(size, size) + vec2(0.5, 0.5);\n  if (inBounds(pfr)) {\n    return getFromColor(pfr);\n  }\n  else if (inBounds(pto)) {\n    return getToColor(pto);\n  }\n  else {\n    return bgColor(p, pto);\n  }\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"fade",paramsTypes:{},defaultParams:{},glsl:"// author: gre\n// license: MIT\n\nvec4 transition (vec2 uv) {\n  return mix(\n    getFromColor(uv),\n    getToColor(uv),\n    progress\n  );\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"fadecolor",paramsTypes:{color:"vec3",colorPhase:"float"},defaultParams:{color:[0,0,0],colorPhase:.4},glsl:"// author: gre\n// License: MIT\nuniform vec3 color;// = vec3(0.0)\nuniform float colorPhase/* = 0.4 */; // if 0.0, there is no black phase, if 0.9, the black phase is very important\nvec4 transition (vec2 uv) {\n  return mix(\n    mix(vec4(color, 1.0), getFromColor(uv), smoothstep(1.0-colorPhase, 0.0, progress)),\n    mix(vec4(color, 1.0), getToColor(uv), smoothstep(    colorPhase, 1.0, progress)),\n    progress);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"fadegrayscale",paramsTypes:{intensity:"float"},defaultParams:{intensity:.3},glsl:"// Author: gre\n// License: MIT\n\nuniform float intensity; // = 0.3; // if 0.0, the image directly turn grayscale, if 0.9, the grayscale transition phase is very important\n \nvec3 grayscale (vec3 color) {\n  return vec3(0.2126*color.r + 0.7152*color.g + 0.0722*color.b);\n}\n \nvec4 transition (vec2 uv) {\n  vec4 fc = getFromColor(uv);\n  vec4 tc = getToColor(uv);\n  return mix(\n    mix(vec4(grayscale(fc.rgb), 1.0), fc, smoothstep(1.0-intensity, 0.0, progress)),\n    mix(vec4(grayscale(tc.rgb), 1.0), tc, smoothstep(    intensity, 1.0, progress)),\n    progress);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"flyeye",paramsTypes:{size:"float",zoom:"float",colorSeparation:"float"},defaultParams:{size:.04,zoom:50,colorSeparation:.3},glsl:"// Author: gre\n// License: MIT\nuniform float size; // = 0.04\nuniform float zoom; // = 50.0\nuniform float colorSeparation; // = 0.3\n\nvec4 transition(vec2 p) {\n  float inv = 1. - progress;\n  vec2 disp = size*vec2(cos(zoom*p.x), sin(zoom*p.y));\n  vec4 texTo = getToColor(p + inv*disp);\n  vec4 texFrom = vec4(\n    getFromColor(p + progress*disp*(1.0 - colorSeparation)).r,\n    getFromColor(p + progress*disp).g,\n    getFromColor(p + progress*disp*(1.0 + colorSeparation)).b,\n    1.0);\n  return texTo*progress + texFrom*inv;\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"heart",paramsTypes:{},defaultParams:{},glsl:"// Author: gre\n// License: MIT\n\nfloat inHeart (vec2 p, vec2 center, float size) {\n  if (size==0.0) return 0.0;\n  vec2 o = (p-center)/(1.6*size);\n  float a = o.x*o.x+o.y*o.y-0.3;\n  return step(a*a*a, o.x*o.x*o.y*o.y*o.y);\n}\nvec4 transition (vec2 uv) {\n  return mix(\n    getFromColor(uv),\n    getToColor(uv),\n    inHeart(uv, vec2(0.5, 0.4), progress)\n  );\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"hexagonalize",paramsTypes:{steps:"int",horizontalHexagons:"float"},defaultParams:{steps:50,horizontalHexagons:20},glsl:"// Author: Fernando Kuteken\n// License: MIT\n// Hexagonal math from: http://www.redblobgames.com/grids/hexagons/\n\nuniform int steps; // = 50;\nuniform float horizontalHexagons; //= 20;\n\nstruct Hexagon {\n  float q;\n  float r;\n  float s;\n};\n\nHexagon createHexagon(float q, float r){\n  Hexagon hex;\n  hex.q = q;\n  hex.r = r;\n  hex.s = -q - r;\n  return hex;\n}\n\nHexagon roundHexagon(Hexagon hex){\n  \n  float q = floor(hex.q + 0.5);\n  float r = floor(hex.r + 0.5);\n  float s = floor(hex.s + 0.5);\n\n  float deltaQ = abs(q - hex.q);\n  float deltaR = abs(r - hex.r);\n  float deltaS = abs(s - hex.s);\n\n  if (deltaQ > deltaR && deltaQ > deltaS)\n    q = -r - s;\n  else if (deltaR > deltaS)\n    r = -q - s;\n  else\n    s = -q - r;\n\n  return createHexagon(q, r);\n}\n\nHexagon hexagonFromPoint(vec2 point, float size) {\n  \n  point.y /= ratio;\n  point = (point - 0.5) / size;\n  \n  float q = (sqrt(3.0) / 3.0) * point.x + (-1.0 / 3.0) * point.y;\n  float r = 0.0 * point.x + 2.0 / 3.0 * point.y;\n\n  Hexagon hex = createHexagon(q, r);\n  return roundHexagon(hex);\n  \n}\n\nvec2 pointFromHexagon(Hexagon hex, float size) {\n  \n  float x = (sqrt(3.0) * hex.q + (sqrt(3.0) / 2.0) * hex.r) * size + 0.5;\n  float y = (0.0 * hex.q + (3.0 / 2.0) * hex.r) * size + 0.5;\n  \n  return vec2(x, y * ratio);\n}\n\nvec4 transition (vec2 uv) {\n  \n  float dist = 2.0 * min(progress, 1.0 - progress);\n  dist = steps > 0 ? ceil(dist * float(steps)) / float(steps) : dist;\n  \n  float size = (sqrt(3.0) / 3.0) * dist / horizontalHexagons;\n  \n  vec2 point = dist > 0.0 ? pointFromHexagon(hexagonFromPoint(uv, size), size) : uv;\n\n  return mix(getFromColor(point), getToColor(point), progress);\n  \n}\n",author:"Fernando Kuteken",license:"MIT",createdAt:"Tue, 30 May 2017 21:55:47 -0300",updatedAt:"Tue, 30 May 2017 21:55:47 -0300"},{name:"kaleidoscope",paramsTypes:{speed:"float",angle:"float",power:"float"},defaultParams:{speed:1,angle:1,power:1.5},glsl:"// Author: nwoeanhinnogaehr\n// License: MIT\n\nuniform float speed; // = 1.0;\nuniform float angle; // = 1.0;\nuniform float power; // = 1.5;\n\nvec4 transition(vec2 uv) {\n  vec2 p = uv.xy / vec2(1.0).xy;\n  vec2 q = p;\n  float t = pow(progress, power)*speed;\n  p = p -0.5;\n  for (int i = 0; i < 7; i++) {\n    p = vec2(sin(t)*p.x + cos(t)*p.y, sin(t)*p.y - cos(t)*p.x);\n    t += angle;\n    p = abs(mod(p, 2.0) - 1.0);\n  }\n  abs(mod(p, 1.0));\n  return mix(\n    mix(getFromColor(q), getToColor(q), progress),\n    mix(getFromColor(p), getToColor(p), progress), 1.0 - 2.0*abs(progress - 0.5));\n}\n",author:"nwoeanhinnogaehr",license:"MIT",createdAt:"Wed, 31 May 2017 21:48:26 -0400",updatedAt:"Wed, 31 May 2017 21:48:26 -0400"},{name:"luma",paramsTypes:{luma:"sampler2D"},defaultParams:{luma:null},glsl:"// Author: gre\n// License: MIT\n\nuniform sampler2D luma;\n\nvec4 transition(vec2 uv) {\n  return mix(\n    getToColor(uv),\n    getFromColor(uv),\n    step(progress, texture2D(luma, uv).r)\n  );\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"luminance_melt",paramsTypes:{direction:"bool",l_threshold:"float",above:"bool"},defaultParams:{direction:!0,l_threshold:.8,above:!1},glsl:"// Author: 0gust1\n// License: MIT\n//My own first transition — based on crosshatch code (from pthrasher), using  simplex noise formula (copied and pasted)\n//-> cooler with high contrasted images (isolated dark subject on light background f.e.)\n//TODO : try to rebase it on DoomTransition (from zeh)?\n//optimizations :\n//luminance (see http://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color#answer-596241)\n// Y = (R+R+B+G+G+G)/6\n//or Y = (R+R+R+B+G+G+G+G)>>3 \n\n\n//direction of movement :  0 : up, 1, down\nuniform bool direction; // = 1 \n//luminance threshold\nuniform float l_threshold; // = 0.8 \n//does the movement takes effect above or below luminance threshold ?\nuniform bool above; // = false \n\n\n//Random function borrowed from everywhere\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n\n// Simplex noise :\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : MIT  \n//               2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n// \n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n// Simplex noise -- end\n\nfloat luminance(vec4 color){\n  //(0.299*R + 0.587*G + 0.114*B)\n  return color.r*0.299+color.g*0.587+color.b*0.114;\n}\n\nvec2 center = vec2(1.0, direction);\n\nvec4 transition(vec2 uv) {\n  vec2 p = uv.xy / vec2(1.0).xy;\n  if (progress == 0.0) {\n    return getFromColor(p);\n  } else if (progress == 1.0) {\n    return getToColor(p);\n  } else {\n    float x = progress;\n    float dist = distance(center, p)- progress*exp(snoise(vec2(p.x, 0.0)));\n    float r = x - rand(vec2(p.x, 0.1));\n    float m;\n    if(above){\n     m = dist <= r && luminance(getFromColor(p))>l_threshold ? 1.0 : (progress*progress*progress);\n    }\n    else{\n     m = dist <= r && luminance(getFromColor(p))<l_threshold ? 1.0 : (progress*progress*progress);  \n    }\n    return mix(getFromColor(p), getToColor(p), m);    \n  }\n}\n",author:"0gust1",license:"MIT",createdAt:"Wed, 24 Jan 2018 19:02:32 +0100",updatedAt:"Wed, 24 Jan 2018 19:02:32 +0100"},{name:"morph",paramsTypes:{strength:"float"},defaultParams:{strength:.1},glsl:"// Author: paniq\n// License: MIT\nuniform float strength; // = 0.1\n\nvec4 transition(vec2 p) {\n  vec4 ca = getFromColor(p);\n  vec4 cb = getToColor(p);\n  \n  vec2 oa = (((ca.rg+ca.b)*0.5)*2.0-1.0);\n  vec2 ob = (((cb.rg+cb.b)*0.5)*2.0-1.0);\n  vec2 oc = mix(oa,ob,0.5)*strength;\n  \n  float w0 = progress;\n  float w1 = 1.0-w0;\n  return mix(getFromColor(p+oc*w0), getToColor(p-oc*w1), progress);\n}\n",author:"paniq",license:"MIT",createdAt:"Thu, 10 Aug 2017 00:27:36 +0200",updatedAt:"Thu, 10 Aug 2017 00:32:01 +0200"},{name:"multiply_blend",paramsTypes:{},defaultParams:{},glsl:"// Author: Fernando Kuteken\n// License: MIT\n\nvec4 blend(vec4 a, vec4 b) {\n  return a * b;\n}\n\nvec4 transition (vec2 uv) {\n  \n  vec4 blended = blend(getFromColor(uv), getToColor(uv));\n  \n  if (progress < 0.5)\n    return mix(getFromColor(uv), blended, 2.0 * progress);\n  else\n    return mix(blended, getToColor(uv), 2.0 * progress - 1.0);\n}\n\n",author:"Fernando Kuteken",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"perlin",paramsTypes:{scale:"float",smoothness:"float",seed:"float"},defaultParams:{scale:4,smoothness:.01,seed:12.9898},glsl:"// Author: Rich Harris\n// License: MIT\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float scale; // = 4.0\nuniform float smoothness; // = 0.01\n\nuniform float seed; // = 12.9898\n\n// http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nfloat random(vec2 co)\n{\n    highp float a = seed;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n// 2D Noise based on Morgan McGuire @morgan3d\n// https://www.shadertoy.com/view/4dS3Wd\nfloat noise (in vec2 st) {\n    vec2 i = floor(st);\n    vec2 f = fract(st);\n\n    // Four corners in 2D of a tile\n    float a = random(i);\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n\n    // Smooth Interpolation\n\n    // Cubic Hermine Curve.  Same as SmoothStep()\n    vec2 u = f*f*(3.0-2.0*f);\n    // u = smoothstep(0.,1.,f);\n\n    // Mix 4 coorners porcentages\n    return mix(a, b, u.x) +\n            (c - a)* u.y * (1.0 - u.x) +\n            (d - b) * u.x * u.y;\n}\n\nvec4 transition (vec2 uv) {\n  vec4 from = getFromColor(uv);\n  vec4 to = getToColor(uv);\n  float n = noise(uv * scale);\n  \n  float p = mix(-smoothness, 1.0 + smoothness, progress);\n  float lower = p - smoothness;\n  float higher = p + smoothness;\n  \n  float q = smoothstep(lower, higher, n);\n  \n  return mix(\n    from,\n    to,\n    1.0 - q\n  );\n}\n",author:"Rich Harris",license:"MIT",createdAt:"Tue, 23 Jan 2018 21:35:10 -0500",updatedAt:"Wed, 24 Jan 2018 07:35:04 -0500"},{name:"pinwheel",paramsTypes:{speed:"float"},defaultParams:{speed:2},glsl:"// Author: Mr Speaker\n// License: MIT\n\nuniform float speed; // = 2.0;\n\nvec4 transition(vec2 uv) {\n  \n  vec2 p = uv.xy / vec2(1.0).xy;\n  \n  float circPos = atan(p.y - 0.5, p.x - 0.5) + progress * speed;\n  float modPos = mod(circPos, 3.1415 / 4.);\n  float signed = sign(progress - modPos);\n  \n  return mix(getToColor(p), getFromColor(p), step(signed, 0.5));\n  \n}\n",author:"Mr Speaker",license:"MIT",createdAt:"Tue, 30 May 2017 09:04:31 -0400",updatedAt:"Tue, 30 May 2017 09:04:31 -0400"},{name:"pixelize",paramsTypes:{squaresMin:"ivec2",steps:"int"},defaultParams:{squaresMin:[20,20],steps:50},glsl:"// Author: gre\n// License: MIT\n// forked from https://gist.github.com/benraziel/c528607361d90a072e98\n\nuniform ivec2 squaresMin/* = ivec2(20) */; // minimum number of squares (when the effect is at its higher level)\nuniform int steps /* = 50 */; // zero disable the stepping\n\nfloat d = min(progress, 1.0 - progress);\nfloat dist = steps>0 ? ceil(d * float(steps)) / float(steps) : d;\nvec2 squareSize = 2.0 * dist / vec2(squaresMin);\n\nvec4 transition(vec2 uv) {\n  vec2 p = dist>0.0 ? (floor(uv / squareSize) + 0.5) * squareSize : uv;\n  return mix(getFromColor(p), getToColor(p), progress);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Wed, 31 May 2017 10:58:26 +0200"},{name:"polar_function",paramsTypes:{segments:"int"},defaultParams:{segments:5},glsl:"// Author: Fernando Kuteken\n// License: MIT\n\n#define PI 3.14159265359\n\nuniform int segments; // = 5;\n\nvec4 transition (vec2 uv) {\n  \n  float angle = atan(uv.y - 0.5, uv.x - 0.5) - 0.5 * PI;\n  float normalized = (angle + 1.5 * PI) * (2.0 * PI);\n  \n  float radius = (cos(float(segments) * angle) + 4.0) / 4.0;\n  float difference = length(uv - vec2(0.5, 0.5));\n  \n  if (difference > radius * progress)\n    return getFromColor(uv);\n  else\n    return getToColor(uv);\n}\n",author:"Fernando Kuteken",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"randomsquares",paramsTypes:{size:"ivec2",smoothness:"float"},defaultParams:{size:[10,10],smoothness:.5},glsl:"// Author: gre\n// License: MIT\n\nuniform ivec2 size; // = ivec2(10, 10)\nuniform float smoothness; // = 0.5\n \nfloat rand (vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec4 transition(vec2 p) {\n  float r = rand(floor(vec2(size) * p));\n  float m = smoothstep(0.0, -smoothness, r - (progress * (1.0 + smoothness)));\n  return mix(getFromColor(p), getToColor(p), m);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"ripple",paramsTypes:{amplitude:"float",speed:"float"},defaultParams:{amplitude:100,speed:50},glsl:"// Author: gre\n// License: MIT\nuniform float amplitude; // = 100.0\nuniform float speed; // = 50.0\n\nvec4 transition (vec2 uv) {\n  vec2 dir = uv - vec2(.5);\n  float dist = length(dir);\n  vec2 offset = dir * (sin(progress * dist * amplitude - progress * speed) + .5) / 30.;\n  return mix(\n    getFromColor(uv + offset),\n    getToColor(uv),\n    smoothstep(0.2, 1.0, progress)\n  );\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 15:15:27 +0200",updatedAt:"Tue, 30 May 2017 15:15:27 +0200"},{name:"rotate_scale_fade",paramsTypes:{center:"vec2",rotations:"float",scale:"float",backColor:"vec4"},defaultParams:{center:[.5,.5],rotations:1,scale:8,backColor:[.15,.15,.15,1]},glsl:"// Author: Fernando Kuteken\n// License: MIT\n\n#define PI 3.14159265359\n\nuniform vec2 center; // = vec2(0.5, 0.5);\nuniform float rotations; // = 1;\nuniform float scale; // = 8;\nuniform vec4 backColor; // = vec4(0.15, 0.15, 0.15, 1.0);\n\nvec4 transition (vec2 uv) {\n  \n  vec2 difference = uv - center;\n  vec2 dir = normalize(difference);\n  float dist = length(difference);\n  \n  float angle = 2.0 * PI * rotations * progress;\n  \n  float c = cos(angle);\n  float s = sin(angle);\n  \n  float currentScale = mix(scale, 1.0, 2.0 * abs(progress - 0.5));\n  \n  vec2 rotatedDir = vec2(dir.x  * c - dir.y * s, dir.x * s + dir.y * c);\n  vec2 rotatedUv = center + rotatedDir * dist / currentScale;\n  \n  if (rotatedUv.x < 0.0 || rotatedUv.x > 1.0 ||\n      rotatedUv.y < 0.0 || rotatedUv.y > 1.0)\n    return backColor;\n    \n  return mix(getFromColor(rotatedUv), getToColor(rotatedUv), progress);\n}\n",author:"Fernando Kuteken",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"squareswire",paramsTypes:{squares:"ivec2",direction:"vec2",smoothness:"float"},defaultParams:{squares:[10,10],direction:[1,-.5],smoothness:1.6},glsl:"// Author: gre\n// License: MIT\n \nuniform ivec2 squares;// = ivec2(10,10)\nuniform vec2 direction;// = vec2(1.0, -0.5)\nuniform float smoothness; // = 1.6\n\nconst vec2 center = vec2(0.5, 0.5);\nvec4 transition (vec2 p) {\n  vec2 v = normalize(direction);\n  v /= abs(v.x)+abs(v.y);\n  float d = v.x * center.x + v.y * center.y;\n  float offset = smoothness;\n  float pr = smoothstep(-offset, 0.0, v.x * p.x + v.y * p.y - (d-0.5+progress*(1.+offset)));\n  vec2 squarep = fract(p*vec2(squares));\n  vec2 squaremin = vec2(pr/2.0);\n  vec2 squaremax = vec2(1.0 - pr/2.0);\n  float a = (1.0 - step(progress, 0.0)) * step(squaremin.x, squarep.x) * step(squaremin.y, squarep.y) * step(squarep.x, squaremax.x) * step(squarep.y, squaremax.y);\n  return mix(getFromColor(p), getToColor(p), a);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"squeeze",paramsTypes:{colorSeparation:"float"},defaultParams:{colorSeparation:.04},glsl:"// Author: gre\n// License: MIT\n \nuniform float colorSeparation; // = 0.04\n \nvec4 transition (vec2 uv) {\n  float y = 0.5 + (uv.y-0.5) / (1.0-progress);\n  if (y < 0.0 || y > 1.0) {\n     return getToColor(uv);\n  }\n  else {\n    vec2 fp = vec2(uv.x, y);\n    vec2 off = progress * vec2(0.0, colorSeparation);\n    vec4 c = getFromColor(fp);\n    vec4 cn = getFromColor(fp - off);\n    vec4 cp = getFromColor(fp + off);\n    return vec4(cn.r, c.g, cp.b, c.a);\n  }\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"swap",paramsTypes:{reflection:"float",perspective:"float",depth:"float"},defaultParams:{reflection:.4,perspective:.2,depth:3},glsl:"// Author: gre\n// License: MIT\n// General parameters\nuniform float reflection; // = 0.4\nuniform float perspective; // = 0.2\nuniform float depth; // = 3.0\n \nconst vec4 black = vec4(0.0, 0.0, 0.0, 1.0);\nconst vec2 boundMin = vec2(0.0, 0.0);\nconst vec2 boundMax = vec2(1.0, 1.0);\n \nbool inBounds (vec2 p) {\n  return all(lessThan(boundMin, p)) && all(lessThan(p, boundMax));\n}\n \nvec2 project (vec2 p) {\n  return p * vec2(1.0, -1.2) + vec2(0.0, -0.02);\n}\n \nvec4 bgColor (vec2 p, vec2 pfr, vec2 pto) {\n  vec4 c = black;\n  pfr = project(pfr);\n  if (inBounds(pfr)) {\n    c += mix(black, getFromColor(pfr), reflection * mix(1.0, 0.0, pfr.y));\n  }\n  pto = project(pto);\n  if (inBounds(pto)) {\n    c += mix(black, getToColor(pto), reflection * mix(1.0, 0.0, pto.y));\n  }\n  return c;\n}\n \nvec4 transition(vec2 p) {\n  vec2 pfr, pto = vec2(-1.);\n \n  float size = mix(1.0, depth, progress);\n  float persp = perspective * progress;\n  pfr = (p + vec2(-0.0, -0.5)) * vec2(size/(1.0-perspective*progress), size/(1.0-size*persp*p.x)) + vec2(0.0, 0.5);\n \n  size = mix(1.0, depth, 1.-progress);\n  persp = perspective * (1.-progress);\n  pto = (p + vec2(-1.0, -0.5)) * vec2(size/(1.0-perspective*(1.0-progress)), size/(1.0-size*persp*(0.5-p.x))) + vec2(1.0, 0.5);\n\n  if (progress < 0.5) {\n    if (inBounds(pfr)) {\n      return getFromColor(pfr);\n    }\n    if (inBounds(pto)) {\n      return getToColor(pto);\n    }  \n  }\n  if (inBounds(pto)) {\n    return getToColor(pto);\n  }\n  if (inBounds(pfr)) {\n    return getFromColor(pfr);\n  }\n  return bgColor(p, pfr, pto);\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Sun, 18 Feb 2018 17:45:50 +0100"},{name:"undulatingBurnOut",paramsTypes:{smoothness:"float",center:"vec2",color:"vec3"},defaultParams:{smoothness:.03,center:[.5,.5],color:[0,0,0]},glsl:"// License: MIT\n// Author: pthrasher\n// adapted by gre from https://gist.github.com/pthrasher/8e6226b215548ba12734\n\nuniform float smoothness; // = 0.03\nuniform vec2 center; // = vec2(0.5)\nuniform vec3 color; // = vec3(0.0)\n\nconst float M_PI = 3.14159265358979323846;\n\nfloat quadraticInOut(float t) {\n  float p = 2.0 * t * t;\n  return t < 0.5 ? p : -p + (4.0 * t) - 1.0;\n}\n\nfloat getGradient(float r, float dist) {\n  float d = r - dist;\n  return mix(\n    smoothstep(-smoothness, 0.0, r - dist * (1.0 + smoothness)),\n    -1.0 - step(0.005, d),\n    step(-0.005, d) * step(d, 0.01)\n  );\n}\n\nfloat getWave(vec2 p){\n  vec2 _p = p - center; // offset from center\n  float rads = atan(_p.y, _p.x);\n  float degs = degrees(rads) + 180.0;\n  vec2 range = vec2(0.0, M_PI * 30.0);\n  vec2 domain = vec2(0.0, 360.0);\n  float ratio = (M_PI * 30.0) / 360.0;\n  degs = degs * ratio;\n  float x = progress;\n  float magnitude = mix(0.02, 0.09, smoothstep(0.0, 1.0, x));\n  float offset = mix(40.0, 30.0, smoothstep(0.0, 1.0, x));\n  float ease_degs = quadraticInOut(sin(degs));\n  float deg_wave_pos = (ease_degs * magnitude) * sin(x * offset);\n  return x + deg_wave_pos;\n}\n\nvec4 transition(vec2 p) {\n  float dist = distance(center, p);\n  float m = getGradient(getWave(p), dist);\n  vec4 cfrom = getFromColor(p);\n  vec4 cto = getToColor(p);\n  return mix(mix(cfrom, cto, m), mix(cfrom, vec4(color, 1.0), 0.75), step(m, -2.0));\n}\n",license:"MIT",author:"pthrasher",createdAt:"Mon, 12 Jun 2017 10:23:37 +0800",updatedAt:"Mon, 12 Jun 2017 10:23:37 +0800"},{name:"wind",paramsTypes:{size:"float"},defaultParams:{size:.2},glsl:"// Author: gre\n// License: MIT\n\n// Custom parameters\nuniform float size; // = 0.2\n\nfloat rand (vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec4 transition (vec2 uv) {\n  float r = rand(vec2(0, uv.y));\n  float m = smoothstep(0.0, -size, uv.x*(1.0-size) + size*r - (progress * (1.0 + size)));\n  return mix(\n    getFromColor(uv),\n    getToColor(uv),\n    m\n  );\n}\n",author:"gre",license:"MIT",createdAt:"Tue, 30 May 2017 14:26:44 +0200",updatedAt:"Tue, 30 May 2017 14:26:44 +0200"},{name:"windowblinds",paramsTypes:{},defaultParams:{},glsl:"// Author: Fabien Benetou\n// License: MIT\n\nvec4 transition (vec2 uv) {\n  float t = progress;\n  \n  if (mod(floor(uv.y*100.*progress),2.)==0.)\n    t*=2.-.5;\n  \n  return mix(\n    getFromColor(uv),\n    getToColor(uv),\n    mix(t, progress, smoothstep(0.8, 1.0, progress))\n  );\n}\n",author:"Fabien Benetou",license:"MIT",createdAt:"Wed, 31 May 2017 14:11:48 +0200",updatedAt:"Wed, 31 May 2017 14:11:48 +0200"},{name:"windowslice",paramsTypes:{count:"float",smoothness:"float"},defaultParams:{count:10,smoothness:.5},glsl:"// Author: gre\n// License: MIT\n\nuniform float count; // = 10.0\nuniform float smoothness; // = 0.5\n\nvec4 transition (vec2 p) {\n  float pr = smoothstep(-smoothness, 0.0, p.x - progress * (1.0 + smoothness));\n  float s = step(pr, fract(count * p.x));\n  return mix(getFromColor(p), getToColor(p), s);\n}\n",author:"gre",license:"MIT",createdAt:"Wed, 28 Mar 2018 17:23:26 +0200",updatedAt:"Wed, 28 Mar 2018 17:23:26 +0200"},{name:"wipeDown",paramsTypes:{},defaultParams:{},glsl:"// Author: Jake Nelson\n// License: MIT\n\nvec4 transition(vec2 uv) {\n  vec2 p=uv.xy/vec2(1.0).xy;\n  vec4 a=getFromColor(p);\n  vec4 b=getToColor(p);\n  return mix(a, b, step(1.0-p.y,progress));\n}\n",author:"Jake Nelson",license:"MIT",createdAt:"Wed, 1 Nov 2017 15:26:01 -0500",updatedAt:"Thu, 2 Nov 2017 18:39:26 -0500"},{name:"wipeLeft",paramsTypes:{},defaultParams:{},glsl:"// Author: Jake Nelson\n// License: MIT\n\nvec4 transition(vec2 uv) {\n  vec2 p=uv.xy/vec2(1.0).xy;\n  vec4 a=getFromColor(p);\n  vec4 b=getToColor(p);\n  return mix(a, b, step(1.0-p.x,progress));\n}\n",author:"Jake Nelson",license:"MIT",createdAt:"Wed, 1 Nov 2017 15:26:28 -0500",updatedAt:"Fri, 3 Nov 2017 18:03:50 +0100"},{name:"wipeRight",paramsTypes:{},defaultParams:{},glsl:"// Author: Jake Nelson\n// License: MIT\n\nvec4 transition(vec2 uv) {\n  vec2 p=uv.xy/vec2(1.0).xy;\n  vec4 a=getFromColor(p);\n  vec4 b=getToColor(p);\n  return mix(a, b, step(0.0+p.x,progress));\n}\n",author:"Jake Nelson",license:"MIT",createdAt:"Wed, 1 Nov 2017 15:27:02 -0500",updatedAt:"Thu, 2 Nov 2017 18:40:22 -0500"},{name:"wipeUp",paramsTypes:{},defaultParams:{},glsl:"// Author: Jake Nelson\n// License: MIT\n\nvec4 transition(vec2 uv) {\n  vec2 p=uv.xy/vec2(1.0).xy;\n  vec4 a=getFromColor(p);\n  vec4 b=getToColor(p);\n  return mix(a, b, step(0.0+p.y,progress));\n}\n",author:"Jake Nelson",license:"MIT",createdAt:"Wed, 1 Nov 2017 15:24:36 -0500",updatedAt:"Thu, 2 Nov 2017 18:37:42 -0500"}]},973:(e,t,n)=>{var r=n(932),o=n(668);e.exports=function(e){for(var t=Array.isArray(e)?e:r(e),n=0;n<t.length;n++){var a=t[n];if("preprocessor"===a.type){var i=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){var s=i[1],u=i[2];return(s?o(u):u).trim()}}}}},460:(e,t,n)=>{e.exports=function(e){var t,n,l,p=0,d=0,h=u,m=[],v=[],g=1,y=0,b=0,_=!1,x=!1,T="",A=a,E=r;"300 es"===(e=e||{}).version&&(A=s,E=i);var w={},S={};for(p=0;p<A.length;p++)w[A[p]]=!0;for(p=0;p<E.length;p++)S[E[p]]=!0;return function(e){return v=[],null!==e?function(e){var n;for(p=0,e.toString&&(e=e.toString()),T+=e.replace(/\r\n/g,"\n"),l=T.length;t=T[p],p<l;){switch(n=p,h){case 0:p=R();break;case 1:case 2:p=O();break;case 3:p=D();break;case 4:p=F();break;case 11:p=k();break;case 5:p=L();break;case c:p=N();break;case 9:p=M();break;case u:p=I()}n!==p&&("\n"===T[n]?(y=0,++g):++y)}return d+=p,T=T.slice(p),v}(e):(m.length&&C(m.join("")),h=10,C("(eof)"),v)};function C(e){e.length&&v.push({type:f[h],data:e,position:b,line:g,column:y})}function I(){return m=m.length?[]:m,"/"===n&&"*"===t?(b=d+p-1,h=0,n=t,p+1):"/"===n&&"/"===t?(b=d+p-1,h=1,n=t,p+1):"#"===t?(h=2,b=d+p,p):/\s/.test(t)?(h=9,b=d+p,p):(_=/\d/.test(t),x=/[^\w_]/.test(t),b=d+p,h=_?4:x?3:c,p)}function M(){return/[^\s]/g.test(t)?(C(m.join("")),h=u,p):(m.push(t),n=t,p+1)}function O(){return"\r"!==t&&"\n"!==t||"\\"===n?(m.push(t),n=t,p+1):(C(m.join("")),h=u,p)}function R(){return"/"===t&&"*"===n?(m.push(t),C(m.join("")),h=u,p+1):(m.push(t),n=t,p+1)}function D(){if("."===n&&/\d/.test(t))return h=5,p;if("/"===n&&"*"===t)return h=0,p;if("/"===n&&"/"===t)return h=1,p;if("."===t&&m.length){for(;P(m););return h=5,p}if(";"===t||")"===t||"("===t){if(m.length)for(;P(m););return C(t),h=u,p+1}var e=2===m.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;P(m););return h=u,p}return m.push(t),n=t,p+1}function P(e){for(var t,n,r=0;;){if(t=o.indexOf(e.slice(0,e.length+r).join("")),n=o[t],-1===t){if(r--+e.length>0)continue;n=e.slice(0,1).join("")}return C(n),b+=n.length,(m=m.slice(n.length)).length}}function k(){return/[^a-fA-F0-9]/.test(t)?(C(m.join("")),h=u,p):(m.push(t),n=t,p+1)}function F(){return"."===t||/[eE]/.test(t)?(m.push(t),h=5,n=t,p+1):"x"===t&&1===m.length&&"0"===m[0]?(h=11,m.push(t),n=t,p+1):/[^\d]/.test(t)?(C(m.join("")),h=u,p):(m.push(t),n=t,p+1)}function L(){return"f"===t&&(m.push(t),n=t,p+=1),/[eE]/.test(t)?(m.push(t),n=t,p+1):("-"!==t&&"+"!==t||!/[eE]/.test(n))&&/[^\d]/.test(t)?(C(m.join("")),h=u,p):(m.push(t),n=t,p+1)}function N(){if(/[^\d\w_]/.test(t)){var e=m.join("");return h=S[e]?8:w[e]?7:6,C(m.join("")),h=u,p}return m.push(t),n=t,p+1}};var r=n(529),o=n(679),a=n(222),i=n(914),s=n(537),u=999,c=9999,f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},537:(e,t,n)=>{var r=n(222);r=r.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)})),e.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},222:e=>{e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},914:(e,t,n)=>{var r=n(529);e.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},529:e=>{e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},679:e=>{e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},932:(e,t,n)=>{var r=n(460);e.exports=function(e,t){var n=r(t),o=[];return(o=o.concat(n(e))).concat(n(null))}},66:(e,t,n)=>{"use strict";var r=n(464);e.exports=function(e,t,n){return r(n=void 0!==n?n+"":" ",t)+e}},926:(e,t,n)=>{"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};(r=n(57))&&r.__esModule;var a="attribute vec2 _p;\nvarying vec2 _uv;\nvoid main() {\ngl_Position = vec4(_p,0.0,1.0);\n_uv = vec2(0.5, 0.5) * (_p+vec2(1.0, 1.0));\n}",i={cover:function(e){return".5+(uv-.5)*vec2(min(ratio/"+e+",1.),min("+e+"/ratio,1.))"},contain:function(e){return".5+(uv-.5)*vec2(max(ratio/"+e+",1.),max("+e+"/ratio,1.))"},stretch:function(){return"uv"}},s=function(e,t){var n=i[t];if(!n)throw new Error("invalid resizeMode="+t);return"precision highp float;varying vec2 _uv;uniform sampler2D from, to;uniform float progress, ratio, _fromR, _toR;vec4 getFromColor(vec2 uv){uv=vec2(1.,-1.)*uv+vec2(0.,1.);return texture2D(from,"+n("_fromR")+");}vec4 getToColor(vec2 uv){uv=vec2(1.,-1.)*uv+vec2(0.,1.);return texture2D(to,"+n("_toR")+");}\n"+e+"\nvoid main(){gl_FragColor=transition(_uv);}"};e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o({resizeMode:"cover"},n),i=r.resizeMode,u={};return Object.keys(t.paramsTypes).forEach((function(n){if("sampler2D"===t.paramsTypes[n]){var r=void 0;u[n]=function(t,o){return n in o?o[n]:r||(r=e.texture({shape:[2,2]}))}}else{var o=t.defaultParams[n];u[n]=function(e,t){return n in t?t[n]:o}}})),e({frag:s(t.glsl,i),vert:a,attributes:{_p:e.buffer([[-1,-1],[-1,4],[4,-1]])},count:3,uniforms:o({},u,{ratio:function(e){return e.viewportWidth/e.viewportHeight},_fromR:function(e,t){return t.from.width/t.from.height},_toR:function(e,t){return t.to.width/t.to.height},from:e.prop("from"),to:e.prop("to"),progress:e.prop("progress")})})}},550:function(e){e.exports=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){var t=new Error("(regl) "+e);throw console.error(t),t}function o(e,t){e||r(t)}function a(e){return e?": "+e:""}function i(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"==typeof e}}function s(e,t,n){t.indexOf(e)<0&&r("invalid value"+a(n)+". must be one of: "+t)}var u=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(e,t){for(e+="";e.length<t;)e=" "+e;return e}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(e,t){this.number=e,this.line=t,this.errors=[]}function p(e,t,n){this.file=e,this.line=t,this.message=n}function d(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function h(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function m(e,t){var n,r=e.split("\n"),o=1,a=0,i={unknown:new f,0:new f};i.unknown.name=i[0].name=t||d(),i.unknown.lines.push(new l(0,""));for(var s=0;s<r.length;++s){var u=r[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var p=/(\d+)(\s+\d+)?/.exec(c[2]);p&&(o=0|p[1],p[2]&&((a=0|p[2])in i||(i[a]=new f)));break;case"define":var h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);h&&(i[a].name=h[1]?(n=h[2],"undefined"!=typeof atob?atob(n):"base64:"+n):h[2])}i[a].lines.push(new l(o++,u))}return Object.keys(i).forEach((function(e){var t=i[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),i}function v(e){e._commandRef=d()}function g(e,t){var n=h();r(e+" in command "+(t||d())+("unknown"===n?"":" called from "+n))}function y(e,t,n,r){i(e,t)||g("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e,r||d())}var b=33071,_={};function x(e,t){return 32820===e||32819===e||33635===e?2:34042===e?4:_[e]*t}function T(e){return!(e&e-1||!e)}_[5120]=_[5121]=1,_[5122]=_[5123]=_[36193]=_[33635]=_[32819]=_[32820]=2,_[5124]=_[5125]=_[5126]=_[34042]=4;var A=t(o,{optional:function(e){e()},raise:r,commandRaise:g,command:function(e,t,n){e||g(t,n||d())},parameter:function(e,t,n){e in t||r("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,n,r){e in t||g("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join(),r||d())},constructor:function(e){Object.keys(e).forEach((function(e){u.indexOf(e)<0&&r('invalid regl constructor argument "'+e+'". must be one of '+u)}))},type:function(e,t,n){i(e,t)||r("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e)},commandType:y,isTypedArray:function(t,n){e(t)||r("invalid parameter type"+a(n)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||r("invalid parameter type, ("+e+")"+a(t)+". must be a nonnegative integer")},oneOf:s,shaderError:function(e,t,r,a,i){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),u=a===e.FRAGMENT_SHADER?"fragment":"vertex";y(r,"string",u+" shader source must be a string",i);var f=m(r,i),l=function(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new p(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new p("unknown",0,e))}})),t}(s);(function(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))})(f,l),Object.keys(f).forEach((function(e){var t=f[e];if(t.hasErrors){var r=[""],o=[""];a("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){a(c(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),a(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(r){var o=r.message,i=/^\s*'(.*)'\s*:\s*(.*)$/.exec(o);if(i){var s=i[1];o=i[2],"assign"===s&&(s="="),t=Math.max(e.line.indexOf(s,t),0)}else t=0;a(c("| ",6)),a(c("^^^",t+3)+n,"font-weight:bold"),a(c("| ",6)),a(o+n,"font-weight:bold")})),a(c("| ",6)+n)}else a(c(e.number,4)+"|  "),a(e.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(o[0]=r.join("%c"),console.log.apply(console,o))}function a(e,t){r.push(e),o.push(t||"")}})),o.raise("Error compiling "+u+" shader, "+f[0].name)}},linkError:function(e,t,r,a,i){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),u=m(r,i),c='Error linking program with vertex shader, "'+m(a,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+c+"\n%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+n+s),o.raise(c)}},callSite:h,saveCommandRef:v,saveDrawInfo:function(e,t,n,r){function o(e){return e?r.id(e):0}function a(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}v(e),e._fragId=o(e.static.frag),e._vertId=o(e.static.vert);var i=e._uniformSet={};a(i,t.static),a(i,t.dynamic);var s=e._attributeSet={};a(s,n.static),a(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?s(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):s(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(e,t,n){var r,a=t.width,i=t.height,s=t.channels;o(a>0&&a<=n.maxTextureSize&&i>0&&i<=n.maxTextureSize,"invalid texture shape"),e.wrapS===b&&e.wrapT===b||o(T(a)&&T(i),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==a&&1!==i&&o(9984!==e.minFilter&&9986!==e.minFilter&&9985!==e.minFilter&&9987!==e.minFilter,"min filter requires mipmap"):(o(T(a)&&T(i),"texture must be a square power of 2 to support mipmapping"),o(t.mipmask===(a<<1)-1,"missing or incomplete mipmap data")),5126===t.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(9728===e.minFilter&&9728===e.magFilter,"filter not supported, must enable oes_texture_float_linear"),o(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(r=0;r<16;++r)if(u[r]){var c=a>>r,f=i>>r;o(t.mipmask&1<<r,"missing mipmap data");var l=u[r];if(o(l.width===c&&l.height===f,"invalid shape for mip images"),o(l.format===t.format&&l.internalformat===t.internalformat&&l.type===t.type,"incompatible type for mip image"),l.compressed);else if(l.data){var p=Math.ceil(x(l.type,s)*c/l.unpackAlignment)*l.unpackAlignment;o(l.data.byteLength===p*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else e.genMipmaps||o(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&o(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,n,r){var a=e.width,i=e.height,s=e.channels;o(a>0&&a<=r.maxTextureSize&&i>0&&i<=r.maxTextureSize,"invalid texture shape"),o(a===i,"cube map must be square"),o(t.wrapS===b&&t.wrapT===b,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];o(c.width===a&&c.height===i,"inconsistent cube map face shape"),t.genMipmaps&&(o(!c.compressed,"can not generate mipmap for compressed textures"),o(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var p=f[l];if(p){var d=a>>l,h=i>>l;o(c.mipmask&1<<l,"missing mipmap data"),o(p.width===d&&p.height===h,"invalid shape for mip images"),o(p.format===e.format&&p.internalformat===e.internalformat&&p.type===e.type,"incompatible type for mip image"),p.compressed||(p.data?o(p.data.byteLength===d*h*Math.max(x(p.type,s),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):p.element||p.copy)}}}}}),E=0;function w(e,t){this.id=E++,this.type=e,this.data=t}function S(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function C(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+S(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return C(e.substr(0,r.index)).concat(C(r[1])).concat(C(e.substr(r.index+r[0].length)));var o=e.split(".");if(1===o.length)return['"'+S(e)+'"'];for(var a=[],i=0;i<o.length;++i)a=a.concat(C(o[i]));return a}function I(e){return"["+C(e).join("][")+"]"}var M={DynamicVariable:w,define:function(e,t){return new w(e,I(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof w},unbox:function e(t,n){return"function"==typeof t?new w(0,t):"number"==typeof t||"boolean"==typeof t?new w(5,t):Array.isArray(t)?new w(6,t.map((function(t,r){return e(t,n+"["+r+"]")}))):t instanceof w?t:void A(!1,"invalid option type in uniform "+n)},accessor:I},O={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},R="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function D(e){return"string"==typeof e?e.split():(A(Array.isArray(e),"invalid extension array"),e)}function P(e){return"string"==typeof e?(A("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function k(e){var n,r,o,a,i,s=e||{},u={},c=[],f=[],l="undefined"==typeof window?1:window.devicePixelRatio,p=!1,d=function(e){e&&A.raise(e)},h=function(){};if("string"==typeof s?(A("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),A(n,"invalid query string for element")):"object"==typeof s?"string"==typeof(i=s).nodeName&&"function"==typeof i.appendChild&&"function"==typeof i.getBoundingClientRect?n=s:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(s)?o=(a=s).canvas:(A.constructor(s),"gl"in s?a=s.gl:"canvas"in s?o=P(s.canvas):"container"in s&&(r=P(s.container)),"attributes"in s&&(u=s.attributes,A.type(u,"object","invalid context attributes")),"extensions"in s&&(c=D(s.extensions)),"optionalExtensions"in s&&(f=D(s.optionalExtensions)),"onDone"in s&&(A.type(s.onDone,"function","invalid or missing onDone callback"),d=s.onDone),"profile"in s&&(p=!!s.profile),"pixelRatio"in s&&(l=+s.pixelRatio,A(l>0,"invalid pixel ratio"))):A.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!a){if(!o){A("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(e,n,r){var o,a=document.createElement("canvas");function i(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var o=a.getBoundingClientRect();t=o.right-o.left,n=o.bottom-o.top}a.width=r*t,a.height=r*n}return t(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),e.appendChild(a),e===document.body&&(a.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver((function(){setTimeout(i)}))).observe(e):window.addEventListener("resize",i,!1),i(),{canvas:a,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",i),e.removeChild(a)}}}(r||document.body,0,l);if(!m)return null;o=m.canvas,h=m.onDestroy}void 0===u.premultipliedAlpha&&(u.premultipliedAlpha=!0),a=function(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,u)}return a?{gl:a,canvas:o,container:r,extensions:c,optionalExtensions:f,pixelRatio:l,profile:p,onDone:d,onDestroy:h}:(h(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function F(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function L(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function N(){var e=F(8,(function(){return[]}));function t(t){var n=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),r=e[L(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[L(t.byteLength)>>2].push(t)}return{alloc:t,free:n,allocType:function(e,n){var r=null;switch(e){case 5120:r=new Int8Array(t(n),0,n);break;case 5121:r=new Uint8Array(t(n),0,n);break;case 5122:r=new Int16Array(t(2*n),0,n);break;case 5123:r=new Uint16Array(t(2*n),0,n);break;case 5124:r=new Int32Array(t(4*n),0,n);break;case 5125:r=new Uint32Array(t(4*n),0,n);break;case 5126:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){n(e.buffer)}}}var z=N();z.zero=N();var B=3553,U=6408,j=5126,V=36160;function H(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var G=function(e){return Object.keys(e).map((function(t){return e[t]}))},X={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,r){var o=1;if(t.length)for(var a=0;a<t.length;++a)o*=t[a];else o=0;var i=r||z.allocType(n,o);switch(t.length){case 0:break;case 1:!function(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}(e,t[0],i);break;case 2:!function(e,t,n,r){for(var o=0,a=0;a<t;++a)for(var i=e[a],s=0;s<n;++s)r[o++]=i[s]}(e,t[0],t[1],i);break;case 3:q(e,t[0],t[1],t[2],i,0);break;default:W(e,t,0,i,0)}return i}};function q(e,t,n,r,o,a){for(var i=a,s=0;s<t;++s)for(var u=e[s],c=0;c<n;++c)for(var f=u[c],l=0;l<r;++l)o[i++]=f[l]}function W(e,t,n,r,o){for(var a=1,i=n+1;i<t.length;++i)a*=t[i];var s=t[n];if(t.length-n==4){var u=t[n+1],c=t[n+2],f=t[n+3];for(i=0;i<s;++i)q(e[i],u,c,f,r,o),o+=a}else for(i=0;i<s;++i)W(e[i],t,n+1,r,o),o+=a}var Y={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},K={dynamic:35048,stream:35040,static:35044},J=X.flatten,Z=X.shape,$=5121,ee=5126,te=[];function ne(e){return 0|Y[Object.prototype.toString.call(e)]}function re(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function oe(e,t,n,r,o,a,i){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)e[s++]=t[o*u+a*c+i]}te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ie=5121,se=5123,ue=5125,ce=34963;var fe=new Float32Array(1),le=new Uint32Array(fe.buffer);function pe(e){for(var t=z.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{fe[0]=e[n];var r=le[0],o=r>>>31<<15,a=(r<<1>>>24)-127,i=r>>13&1023;if(a<-24)t[n]=o;else if(a<-14){var s=-14-a;t[n]=o+(i+1024>>s)}else t[n]=a>15?o+31744:o+(a+15<<10)+i}return t}function de(t){return Array.isArray(t)||e(t)}var he=function(e){return!(e&e-1||!e)},me=3553,ve=34067,ge=34069,ye=6408,be=6406,_e=6407,xe=6409,Te=6410,Ae=32855,Ee=6402,we=34041,Se=35904,Ce=35906,Ie=36193,Me=33776,Oe=33777,Re=33778,De=33779,Pe=5121,ke=5123,Fe=5125,Le=5126,Ne=33071,ze=9728,Be=9984,Ue=9987,je=4352,Ve=33984,He=[Be,9986,9985,Ue],Ge=[0,xe,Te,_e,ye],Xe={};function qe(e){return"[object "+e+"]"}Xe[6409]=Xe[6406]=Xe[6402]=1,Xe[34041]=Xe[6410]=2,Xe[6407]=Xe[35904]=3,Xe[6408]=Xe[35906]=4;var We=qe("HTMLCanvasElement"),Ye=qe("OffscreenCanvas"),Qe=qe("CanvasRenderingContext2D"),Ke=qe("ImageBitmap"),Je=qe("HTMLImageElement"),Ze=qe("HTMLVideoElement"),$e=Object.keys(Y).concat([We,Ye,Qe,Ke,Je,Ze]),et=[];et[5121]=1,et[5126]=4,et[36193]=2,et[5123]=2,et[5125]=4;var tt=[];function nt(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function rt(e){return!!Array.isArray(e)&&!(0===e.length||!de(e[0]))}function ot(e){return Object.prototype.toString.call(e)}function at(e){return ot(e)===We}function it(e){return ot(e)===Ye}function st(e){if(!e)return!1;var t=ot(e);return $e.indexOf(t)>=0||nt(e)||rt(e)||H(e)}function ut(e){return 0|Y[Object.prototype.toString.call(e)]}function ct(e,t){return z.allocType(e.type===Ie?Le:e.type,t)}function ft(e,t){e.type===Ie?(e.data=pe(t),z.freeType(t)):e.data=t}function lt(e,t,n,r,o,a){var i;if(i=void 0!==tt[e]?tt[e]:Xe[e]*et[t],a&&(i*=6),o){for(var s=0,u=n;u>=1;)s+=i*u*u,u/=2;return s}return i*n*r}function pt(n,r,o,a,i,s,u){var c={"don't care":je,"dont care":je,nice:4354,fast:4353},f={repeat:10497,clamp:Ne,mirror:33648},l={nearest:ze,linear:9729},p=t({mipmap:Ue,"nearest mipmap nearest":Be,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":Ue},l),d={none:0,browser:37444},h={uint8:Pe,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:be,luminance:xe,"luminance alpha":Te,rgb:_e,rgba:ye,rgba4:32854,"rgb5 a1":Ae,rgb565:36194},v={};r.ext_srgb&&(m.srgb=Se,m.srgba=Ce),r.oes_texture_float&&(h.float32=h.float=Le),r.oes_texture_half_float&&(h.float16=h["half float"]=Ie),r.webgl_depth_texture&&(t(m,{depth:Ee,"depth stencil":we}),t(h,{uint16:ke,uint32:Fe,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&t(v,{"rgb s3tc dxt1":Me,"rgba s3tc dxt1":Oe,"rgba s3tc dxt3":Re,"rgba s3tc dxt5":De}),r.webgl_compressed_texture_atc&&t(v,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&t(v,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(v["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(v).forEach((function(e){var t=v[e];g.indexOf(t)>=0&&(m[e]=t)}));var y=Object.keys(m);o.textureFormats=y;var b=[];Object.keys(m).forEach((function(e){var t=m[e];b[t]=e}));var _=[];Object.keys(h).forEach((function(e){var t=h[e];_[t]=e}));var x=[];Object.keys(l).forEach((function(e){x[l[e]]=e}));var T=[];Object.keys(p).forEach((function(e){var t=p[e];T[t]=e}));var E=[];Object.keys(f).forEach((function(e){E[f[e]]=e}));var w=y.reduce((function(e,t){var n=m[t];return n===xe||n===be||n===xe||n===Te||n===Ee||n===we||r.ext_srgb&&(n===Se||n===Ce)?e[n]=n:n===Ae||t.indexOf("rgba")>=0?e[n]=ye:e[n]=_e,e}),{});function S(){this.internalformat=ye,this.format=ye,this.type=Pe,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function C(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function I(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(A.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(A.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(A.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(A.parameter(t.colorSpace,d,"invalid colorSpace"),e.colorSpace=d[t.colorSpace]),"type"in t){var n=t.type;A(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),A(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),A(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),A.parameter(n,h,"invalid texture type"),e.type=h[n]}var a=e.width,i=e.height,s=e.channels,u=!1;"shape"in t?(A(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),a=t.shape[0],i=t.shape[1],3===t.shape.length&&(s=t.shape[2],A(s>0&&s<=4,"invalid number of channels"),u=!0),A(a>=0&&a<=o.maxTextureSize,"invalid width"),A(i>=0&&i<=o.maxTextureSize,"invalid height")):("radius"in t&&(a=i=t.radius,A(a>=0&&a<=o.maxTextureSize,"invalid radius")),"width"in t&&(a=t.width,A(a>=0&&a<=o.maxTextureSize,"invalid width")),"height"in t&&(i=t.height,A(i>=0&&i<=o.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,A(s>0&&s<=4,"invalid number of channels"),u=!0)),e.width=0|a,e.height=0|i,e.channels=0|s;var c=!1;if("format"in t){var f=t.format;A(r.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),A.parameter(f,m,"invalid texture format");var l=e.internalformat=m[f];e.format=w[l],f in h&&("type"in t||(e.type=h[f])),f in v&&(e.compressed=!0),c=!0}!u&&c?e.channels=Xe[e.format]:u&&!c?e.channels!==Ge[e.format]&&(e.format=e.internalformat=Ge[e.channels]):c&&u&&A(e.channels===Xe[e.format],"number of channels inconsistent with specified format")}}function M(e){n.pixelStorei(37440,e.flipY),n.pixelStorei(37441,e.premultiplyAlpha),n.pixelStorei(37443,e.colorSpace),n.pixelStorei(3317,e.unpackAlignment)}function O(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function R(t,n){var r=null;if(st(n)?r=n:n&&(A.type(n,"object","invalid pixel data type"),I(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),st(n.data)&&(r=n.data)),A(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){A(!r,"can not specify copy and data field for the same texture");var a=i.viewportWidth,s=i.viewportHeight;t.width=t.width||a-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,A(t.xOffset>=0&&t.xOffset<a&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=a&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==Pe||(t.type=ut(r));else if(nt(r))t.channels=t.channels||4,function(e,t){var n=t.length;switch(e.type){case Pe:case ke:case Fe:case Le:var r=z.allocType(e.type,n);r.set(t),e.data=r;break;case Ie:e.data=pe(t);break;default:A.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(H(r)){var u=r.data;Array.isArray(u)||t.type!==Pe||(t.type=ut(u));var c,f,l,p,d,h,m=r.shape,v=r.stride;3===m.length?(l=m[2],h=v[2]):(A(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,h=1),c=m[0],f=m[1],p=v[0],d=v[1],t.alignment=1,t.width=c,t.height=f,t.channels=l,t.format=t.internalformat=Ge[l],t.needsFree=!0,function(e,t,n,r,o,a){for(var i=e.width,s=e.height,u=e.channels,c=ct(e,i*s*u),f=0,l=0;l<s;++l)for(var p=0;p<i;++p)for(var d=0;d<u;++d)c[f++]=t[n*p+r*l+o*d+a];ft(e,c)}(t,u,p,d,h,r.offset)}else if(at(r)||it(r)||ot(r)===Qe)at(r)||it(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return ot(e)===Ke}(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(function(e){return ot(e)===Je}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(e){return ot(e)===Ze}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(rt(r)){var g=t.width||r[0].length,y=t.height||r.length,b=t.channels;b=de(r[0][0])?b||r[0][0].length:b||1;for(var _=X.shape(r),x=1,T=0;T<_.length;++T)x*=_[T];var E=ct(t,x);X.flatten(r,_,"",E),ft(t,E),t.alignment=1,t.width=g,t.height=y,t.channels=b,t.format=t.internalformat=Ge[b],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Le?A(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Ie&&A(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function D(e,t,r){var o=e.element,i=e.data,s=e.internalformat,u=e.format,c=e.type,f=e.width,l=e.height;M(e),o?n.texImage2D(t,r,u,u,c,o):e.compressed?n.compressedTexImage2D(t,r,s,f,l,0,i):e.needsCopy?(a(),n.copyTexImage2D(t,r,u,e.xOffset,e.yOffset,f,l,0)):n.texImage2D(t,r,u,f,l,0,u,c,i||null)}function P(e,t,r,o,i){var s=e.element,u=e.data,c=e.internalformat,f=e.format,l=e.type,p=e.width,d=e.height;M(e),s?n.texSubImage2D(t,i,r,o,f,l,s):e.compressed?n.compressedTexSubImage2D(t,i,r,o,c,p,d,u):e.needsCopy?(a(),n.copyTexSubImage2D(t,i,r,o,e.xOffset,e.yOffset,p,d)):n.texSubImage2D(t,i,r,o,p,d,f,l,u)}var k=[];function F(){return k.pop()||new O}function L(e){e.needsFree&&z.freeType(e.data),O.call(e),k.push(e)}function N(){S.call(this),this.genMipmaps=!1,this.mipmapHint=je,this.mipmask=0,this.images=Array(16)}function B(e,t,n){var r=e.images[0]=F();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function U(e,t){var n=null;if(st(t))C(n=e.images[0]=F(),e),R(n,t),e.mipmask=1;else if(I(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,o=0;o<r.length;++o)C(n=e.images[o]=F(),e),n.width>>=o,n.height>>=o,R(n,r[o]),e.mipmask|=1<<o;else C(n=e.images[0]=F(),e),R(n,t),e.mipmask=1;C(e,e.images[0]),!e.compressed||e.internalformat!==Me&&e.internalformat!==Oe&&e.internalformat!==Re&&e.internalformat!==De||A(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function j(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;D(n[r],t,r)}}var V=[];function q(){var e=V.pop()||new N;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function W(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&L(t[n]),t[n]=null;V.push(e)}function Y(){this.minFilter=ze,this.magFilter=ze,this.wrapS=Ne,this.wrapT=Ne,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=je}function Q(e,t){if("min"in t){var n=t.min;A.parameter(n,p),e.minFilter=p[n],He.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;A.parameter(r,l),e.magFilter=l[r]}var a=e.wrapS,i=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(A.parameter(s,f),a=i=f[s]):Array.isArray(s)&&(A.parameter(s[0],f),A.parameter(s[1],f),a=f[s[0]],i=f[s[1]])}else{if("wrapS"in t){var u=t.wrapS;A.parameter(u,f),a=f[u]}if("wrapT"in t){var d=t.wrapT;A.parameter(d,f),i=f[d]}}if(e.wrapS=a,e.wrapT=i,"anisotropic"in t){var h=t.anisotropic;A("number"==typeof h&&h>=1&&h<=o.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var m=!1;switch(typeof t.mipmap){case"string":A.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,m=!0;break;case"boolean":m=e.genMipmaps=t.mipmap;break;case"object":A(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,m=!0;break;default:A.raise("invalid mipmap type")}m&&!("min"in t)&&(e.minFilter=Be)}}function K(e,t){n.texParameteri(t,10241,e.minFilter),n.texParameteri(t,10240,e.magFilter),n.texParameteri(t,10242,e.wrapS),n.texParameteri(t,10243,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,34046,e.anisotropic),e.genMipmaps&&(n.hint(33170,e.mipmapHint),n.generateMipmap(t))}var J=0,Z={},$=o.maxTextureUnits,ee=Array($).map((function(){return null}));function te(e){S.call(this),this.mipmask=0,this.internalformat=ye,this.id=J++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Y,u.profile&&(this.stats={size:0})}function ne(e){n.activeTexture(Ve),n.bindTexture(e.target,e.texture)}function re(){var e=ee[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(me,null)}function oe(e){var t=e.texture;A(t,"must not double destroy texture");var r=e.unit,o=e.target;r>=0&&(n.activeTexture(Ve+r),n.bindTexture(o,null),ee[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete Z[e.id],s.textureCount--}return t(te.prototype,{bind:function(){var e=this;e.bindCount+=1;var t=e.unit;if(t<0){for(var r=0;r<$;++r){var o=ee[r];if(o){if(o.bindCount>0)continue;o.unit=-1}ee[r]=e,t=r;break}t>=$&&A.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),e.unit=t,n.activeTexture(Ve+t),n.bindTexture(e.target,e.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&oe(this)}}),u.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(Z).forEach((function(t){e+=Z[t].stats.size})),e}),{create2D:function(e,t){var r=new te(me);function a(e,t){var n=r.texInfo;Y.call(n);var i=q();return"number"==typeof e?B(i,0|e,"number"==typeof t?0|t:0|e):e?(A.type(e,"object","invalid arguments to regl.texture"),Q(n,e),U(i,e)):B(i,1,1),n.genMipmaps&&(i.mipmask=(i.width<<1)-1),r.mipmask=i.mipmask,C(r,i),A.texture2D(n,i,o),r.internalformat=i.internalformat,a.width=i.width,a.height=i.height,ne(r),j(i,me),K(n,me),re(),W(i),u.profile&&(r.stats.size=lt(r.internalformat,r.type,i.width,i.height,n.genMipmaps,!1)),a.format=b[r.internalformat],a.type=_[r.type],a.mag=x[n.magFilter],a.min=T[n.minFilter],a.wrapS=E[n.wrapS],a.wrapT=E[n.wrapT],a}return Z[r.id]=r,s.textureCount++,a(e,t),a.subimage=function(e,t,n,o){A(!!e,"must specify image data");var i=0|t,s=0|n,u=0|o,c=F();return C(c,r),c.width=0,c.height=0,R(c,e),c.width=c.width||(r.width>>u)-i,c.height=c.height||(r.height>>u)-s,A(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),A(i>=0&&s>=0&&i+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),A(r.mipmask&1<<u,"missing mipmap data"),A(c.data||c.element||c.needsCopy,"missing image data"),ne(r),P(c,me,i,s,u),re(),L(c),a},a.resize=function(e,t){var o=0|e,i=0|t||o;if(o===r.width&&i===r.height)return a;a.width=r.width=o,a.height=r.height=i,ne(r);for(var s=0;r.mipmask>>s;++s){var c=o>>s,f=i>>s;if(!c||!f)break;n.texImage2D(me,s,r.format,c,f,0,r.format,r.type,null)}return re(),u.profile&&(r.stats.size=lt(r.internalformat,r.type,o,i,!1,!1)),a},a._reglType="texture2d",a._texture=r,u.profile&&(a.stats=r.stats),a.destroy=function(){r.decRef()},a},createCube:function(e,t,r,a,i,c){var f=new te(ve);Z[f.id]=f,s.cubeCount++;var l=new Array(6);function p(e,t,n,r,a,i){var s,c=f.texInfo;for(Y.call(c),s=0;s<6;++s)l[s]=q();if("number"!=typeof e&&e)if("object"==typeof e)if(t)U(l[0],e),U(l[1],t),U(l[2],n),U(l[3],r),U(l[4],a),U(l[5],i);else if(Q(c,e),I(f,e),"faces"in e){var d=e.faces;for(A(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),s=0;s<6;++s)A("object"==typeof d[s]&&!!d[s],"invalid input for cube map face"),C(l[s],f),U(l[s],d[s])}else for(s=0;s<6;++s)U(l[s],e);else A.raise("invalid arguments to cube map");else{var h=0|e||1;for(s=0;s<6;++s)B(l[s],h,h)}for(C(f,l[0]),A.optional((function(){o.npotTextureCube||A(he(f.width)&&he(f.height),"your browser does not support non power or two texture dimensions")})),c.genMipmaps?f.mipmask=(l[0].width<<1)-1:f.mipmask=l[0].mipmask,A.textureCube(f,c,l,o),f.internalformat=l[0].internalformat,p.width=l[0].width,p.height=l[0].height,ne(f),s=0;s<6;++s)j(l[s],ge+s);for(K(c,ve),re(),u.profile&&(f.stats.size=lt(f.internalformat,f.type,p.width,p.height,c.genMipmaps,!0)),p.format=b[f.internalformat],p.type=_[f.type],p.mag=x[c.magFilter],p.min=T[c.minFilter],p.wrapS=E[c.wrapS],p.wrapT=E[c.wrapT],s=0;s<6;++s)W(l[s]);return p}return p(e,t,r,a,i,c),p.subimage=function(e,t,n,r,o){A(!!t,"must specify image data"),A("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var a=0|n,i=0|r,s=0|o,u=F();return C(u,f),u.width=0,u.height=0,R(u,t),u.width=u.width||(f.width>>s)-a,u.height=u.height||(f.height>>s)-i,A(f.type===u.type&&f.format===u.format&&f.internalformat===u.internalformat,"incompatible format for texture.subimage"),A(a>=0&&i>=0&&a+u.width<=f.width&&i+u.height<=f.height,"texture.subimage write out of bounds"),A(f.mipmask&1<<s,"missing mipmap data"),A(u.data||u.element||u.needsCopy,"missing image data"),ne(f),P(u,ge+e,a,i,s),re(),L(u),p},p.resize=function(e){var t=0|e;if(t!==f.width){p.width=f.width=t,p.height=f.height=t,ne(f);for(var r=0;r<6;++r)for(var o=0;f.mipmask>>o;++o)n.texImage2D(ge+r,o,f.format,t>>o,t>>o,0,f.format,f.type,null);return re(),u.profile&&(f.stats.size=lt(f.internalformat,f.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=f,u.profile&&(p.stats=f.stats),p.destroy=function(){f.decRef()},p},clear:function(){for(var e=0;e<$;++e)n.activeTexture(Ve+e),n.bindTexture(me,null),ee[e]=null;G(Z).forEach(oe),s.cubeCount=0,s.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<$;++e){var t=ee[e];t&&(t.bindCount=0,t.unit=-1,ee[e]=null)}G(Z).forEach((function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===me)n.texImage2D(me,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(ge+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);K(e.texInfo,e.target)}))},refresh:function(){for(var e=0;e<$;++e){var t=ee[e];t&&(t.bindCount=0,t.unit=-1,ee[e]=null),n.activeTexture(Ve+e),n.bindTexture(me,null),n.bindTexture(ve,null)}}}}tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var dt=36161,ht=32854,mt=[];function vt(e,t,n){return mt[e]*t*n}mt[32854]=2,mt[32855]=2,mt[36194]=2,mt[33189]=2,mt[36168]=1,mt[34041]=4,mt[35907]=4,mt[34836]=16,mt[34842]=8,mt[34843]=6;var gt=36160,yt=36161,bt=3553,_t=34069,xt=[6407,6408],Tt=[];Tt[6408]=4,Tt[6407]=3;var At=[];At[5121]=1,At[5126]=4,At[36193]=2;var Et=[32854,32855,36194,35907,34842,34843,34836],wt={};wt[36053]="complete",wt[36054]="incomplete attachment",wt[36057]="incomplete dimensions",wt[36055]="incomplete, missing attachment",wt[36061]="unsupported";var St=34963,Ct=["attributes","elements","offset","count","primitive","instances"];function It(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}var Mt=5121,Ot=5126;function Rt(t,n,r,o,a,i,s){function u(u){var c;null===n.next?(A(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=Mt):(A(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,A.optional((function(){i.oes_texture_float?(A(c===Mt||c===Ot,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===Ot&&A(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):A(c===Mt,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var f=0,l=0,p=o.framebufferWidth,d=o.framebufferHeight,h=null;e(u)?h=u:u&&(A.type(u,"object","invalid arguments to regl.read()"),f=0|u.x,l=0|u.y,A(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),A(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),p=0|(u.width||o.framebufferWidth-f),d=0|(u.height||o.framebufferHeight-l),h=u.data||null),h&&(c===Mt?A(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===Ot&&A(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),A(p>0&&p+f<=o.framebufferWidth,"invalid width for read pixels"),A(d>0&&d+l<=o.framebufferHeight,"invalid height for read pixels"),r();var m=p*d*4;return h||(c===Mt?h=new Uint8Array(m):c===Ot&&(h=h||new Float32Array(m))),A.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),A(h.byteLength>=m,"data buffer for regl.read() too small"),t.pixelStorei(3333,4),t.readPixels(f,l,p,d,6408,c,h),h}return function(e){return e&&"framebuffer"in e?function(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=u(e)})),t}(e):u(e)}}function Dt(e){return Array.prototype.slice.call(e)}function Pt(e){return Dt(e).join("")}var kt="xyzw".split(""),Ft="dither",Lt="blend.enable",Nt="blend.color",zt="blend.equation",Bt="blend.func",Ut="depth.enable",jt="depth.func",Vt="depth.range",Ht="depth.mask",Gt="colorMask",Xt="cull.enable",qt="cull.face",Wt="frontFace",Yt="lineWidth",Qt="polygonOffset.enable",Kt="polygonOffset.offset",Jt="sample.alpha",Zt="sample.enable",$t="sample.coverage",en="stencil.enable",tn="stencil.mask",nn="stencil.func",rn="stencil.opFront",on="stencil.opBack",an="scissor.enable",sn="scissor.box",un="viewport",cn="profile",fn="framebuffer",ln="vert",pn="frag",dn="elements",hn="primitive",mn="count",vn="offset",gn="instances",yn="vao",bn="Width",_n="Height",xn=fn+bn,Tn=fn+_n,An="drawingBufferWidth",En="drawingBufferHeight",wn=[Bt,zt,nn,rn,on,$t,un,sn,Kt],Sn=34962,Cn=34963,In=5126,Mn=35664,On=35665,Rn=35666,Dn=5124,Pn=35667,kn=35668,Fn=35669,Ln=35670,Nn=35671,zn=35672,Bn=35673,Un=35674,jn=35675,Vn=35676,Hn=35678,Gn=35680,Xn=1028,qn=1029,Wn=2305,Yn=7680,Qn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Kn=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Jn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Zn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},$n={frag:35632,vert:35633},er={cw:2304,ccw:Wn};function tr(t){return Array.isArray(t)||e(t)||H(t)}function nr(e){return e.sort((function(e,t){return e===un?-1:t===un?1:e<t?-1:1}))}function rr(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function or(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function ar(e){return new rr(!1,!1,!1,e)}function ir(e,t){var n=e.type;if(0===n){var r=e.data.length;return new rr(!0,r>=1,r>=2,t)}if(4===n){var o=e.data;return new rr(o.thisDep,o.contextDep,o.propDep,t)}if(5===n)return new rr(!1,!1,!1,t);if(6===n){for(var a=!1,i=!1,s=!1,u=0;u<e.data.length;++u){var c=e.data[u];if(1===c.type)s=!0;else if(2===c.type)i=!0;else if(3===c.type)a=!0;else if(0===c.type){a=!0;var f=c.data;f>=1&&(i=!0),f>=2&&(s=!0)}else 4===c.type&&(a=a||c.data.thisDep,i=i||c.data.contextDep,s=s||c.data.propDep)}return new rr(a,i,s,t)}return new rr(3===n,2===n,1===n,t)}var sr=new rr(!1,!1,!1,(function(){}));function ur(e,n,r,o,a,i,s,u,c,f,l,p,d,h,m){var v=f.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_=r.oes_vertex_array_object,x={dirty:!0,profile:m.profile},T={},E=[],w={},S={};function C(e){return e.replace(".","_")}function I(e,t,n){var r=C(e);E.push(e),T[r]=x[r]=!!n,w[r]=t}function O(e,t,n){var r=C(e);E.push(e),Array.isArray(n)?(x[r]=n.slice(),T[r]=n.slice()):x[r]=T[r]=n,S[r]=t}I(Ft,3024),I(Lt,3042),O(Nt,"blendColor",[0,0,0,0]),O(zt,"blendEquationSeparate",[32774,32774]),O(Bt,"blendFuncSeparate",[1,0,1,0]),I(Ut,2929,!0),O(jt,"depthFunc",513),O(Vt,"depthRange",[0,1]),O(Ht,"depthMask",!0),O(Gt,Gt,[!0,!0,!0,!0]),I(Xt,2884),O(qt,"cullFace",qn),O(Wt,Wt,Wn),O(Yt,Yt,1),I(Qt,32823),O(Kt,"polygonOffset",[0,0]),I(Jt,32926),I(Zt,32928),O($t,"sampleCoverage",[1,!1]),I(en,2960),O(tn,"stencilMask",-1),O(nn,"stencilFunc",[519,0,-1]),O(rn,"stencilOpSeparate",[Xn,Yn,Yn,Yn]),O(on,"stencilOpSeparate",[qn,Yn,Yn,Yn]),I(an,3089),O(sn,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),O(un,un,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var R={gl:e,context:d,strings:n,next:T,current:x,draw:p,elements:i,buffer:a,shader:l,attributes:f.state,vao:f,uniforms:c,framebuffer:u,extensions:r,timer:h,isBufferArgs:tr},D={primTypes:ae,compareFuncs:Jn,blendFuncs:Qn,blendEquations:g,stencilOps:Zn,glTypes:Q,orientationType:er};A.optional((function(){R.isArrayLike=de})),b&&(D.backBuffer=[qn],D.drawBuffer=F(o.maxDrawbuffers,(function(e){return 0===e?[0]:F(e,(function(e){return 36064+e}))})));var P=0;function k(){var e=function(){var e=0,n=[],r=[];function o(){var n=[],r=[];return t((function(){n.push.apply(n,Dt(arguments))}),{def:function(){var t="v"+e++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,Dt(arguments)),n.push(";")),t},toString:function(){return Pt([r.length>0?"var "+r.join(",")+";":"",Pt(n)])}})}function a(){var e=o(),n=o(),r=e.toString,a=n.toString;function i(t,r){n(t,r,"=",e.def(t,r),";")}return t((function(){e.apply(e,Dt(arguments))}),{def:e.def,entry:e,exit:n,save:i,set:function(t,n,r){i(t,n),e(t,n,"=",r,";")},toString:function(){return r()+a()}})}var i=o(),s={};return{global:i,link:function(t){for(var o=0;o<r.length;++o)if(r[o]===t)return n[o];var a="g"+e++;return n.push(a),r.push(t),a},block:o,proc:function(e,n){var r=[];function o(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var i=0;i<n;++i)o();var u=a(),c=u.toString;return s[e]=t(u,{arg:o,toString:function(){return Pt(["function(",r.join(),"){",c(),"}"])}})},scope:a,cond:function(){var e=Pt(arguments),n=a(),r=a(),o=n.toString,i=r.toString;return t(n,{then:function(){return n.apply(n,Dt(arguments)),this},else:function(){return r.apply(r,Dt(arguments)),this},toString:function(){var t=i();return t&&(t="else{"+t+"}"),Pt(["if(",e,"){",o(),"}",t])}})},compile:function(){var e=['"use strict";',i,"return {"];Object.keys(s).forEach((function(t){e.push('"',t,'":',s[t].toString(),",")})),e.push("}");var t=Pt(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}}}(),r=e.link,o=e.global;e.id=P++,e.batchId="0";var a=r(R),i=e.shared={props:"a0"};Object.keys(R).forEach((function(e){i[e]=o.def(a,".",e)})),A.optional((function(){e.CHECK=r(A),e.commandStr=A.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},D.invalidBlendCombinations=Kn}));var s=e.next={},u=e.current={};Object.keys(S).forEach((function(e){Array.isArray(x[e])&&(s[e]=o.def(i.next,".",e),u[e]=o.def(i.current,".",e))}));var c=e.constants={};Object.keys(D).forEach((function(e){c[e]=o.def(JSON.stringify(D[e]))})),e.invoke=function(t,n){switch(n.type){case 0:var o=["this",i.context,i.props,e.batchId];return t.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(i.props,n.data);case 2:return t.def(i.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return e.invoke(t,n)}))}},e.attribCache={};var l={};return e.scopeAttrib=function(e){var t=n.id(e);if(t in l)return l[t];var o=f.scope[t];return o||(o=f.scope[t]=new v),l[t]=r(o)},e}function L(e,t,s,c,p){var d=e.static,h=e.dynamic;A.optional((function(){var e=[fn,ln,pn,dn,hn,vn,mn,gn,cn,yn].concat(E);function t(t){Object.keys(t).forEach((function(t){A.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',p.commandStr)}))}t(d),t(h)}));var m=function(e,t){var n=e.static;if("string"==typeof n[pn]&&"string"==typeof n[ln]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,o=Object.keys(r);if(o.length>0&&"number"==typeof r[o[0]]){for(var a=[],i=0;i<o.length;++i)A("number"==typeof r[o[i]],"must specify all vertex attribute locations when using vaos"),a.push([0|r[o[i]],o[i]]);return a}}return null}(e,t),b=function(e,t){var n=e.static,r=e.dynamic;if(fn in n){var o=n[fn];return o?(o=u.getFramebuffer(o),A.command(o,"invalid framebuffer object"),ar((function(e,t){var n=e.link(o),r=e.shared;t.set(r.framebuffer,".next",n);var a=r.context;return t.set(a,"."+xn,n+".width"),t.set(a,"."+Tn,n+".height"),n}))):ar((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+xn,r+"."+An),t.set(r,"."+Tn,r+"."+En),"null"}))}if(fn in r){var a=r[fn];return ir(a,(function(e,t){var n=e.invoke(t,a),r=e.shared,o=r.framebuffer,i=t.def(o,".getFramebuffer(",n,")");A.optional((function(){e.assert(t,"!"+n+"||"+i,"invalid framebuffer object")})),t.set(o,".next",i);var s=r.context;return t.set(s,"."+xn,i+"?"+i+".width:"+s+"."+An),t.set(s,"."+Tn,i+"?"+i+".height:"+s+"."+En),i}))}return null}(e),_=function(e,t,n){var r=e.static,o=e.dynamic;function a(e){if(e in r){var a=r[e];A.commandType(a,"object","invalid "+e,n.commandStr);var i,s,u=!0,c=0|a.x,f=0|a.y;return"width"in a?(i=0|a.width,A.command(i>=0,"invalid "+e,n.commandStr)):u=!1,"height"in a?(s=0|a.height,A.command(s>=0,"invalid "+e,n.commandStr)):u=!1,new rr(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=i;"width"in a||(r=t.def(n,".",xn,"-",c));var o=s;return"height"in a||(o=t.def(n,".",Tn,"-",f)),[c,f,r,o]}))}if(e in o){var l=o[e],p=ir(l,(function(t,n){var r=t.invoke(n,l);A.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var o=t.shared.context,a=n.def(r,".x|0"),i=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",xn,"-",a,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Tn,"-",i,")");return A.optional((function(){t.assert(n,s+">=0&&"+u+">=0","invalid "+e)})),[a,i,s,u]}));return t&&(p.thisDep=p.thisDep||t.thisDep,p.contextDep=p.contextDep||t.contextDep,p.propDep=p.propDep||t.propDep),p}return t?new rr(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",xn),t.def(n,".",Tn)]})):null}var i=a(un);if(i){var s=i;i=new rr(i.thisDep,i.contextDep,i.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n}))}return{viewport:i,scissor_box:a(sn)}}(e,b,p),x=function(e,t){var n=e.static,r=e.dynamic,o={},a=!1,s=function(){if(yn in n){var e=n[yn];return null!==e&&null===f.getVAO(e)&&(e=f.createVAO(e)),a=!0,o.vao=e,ar((function(t){var n=f.getVAO(e);return n?t.link(n):"null"}))}if(yn in r){a=!0;var t=r[yn];return ir(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}(),u=!1,c=function(){if(dn in n){var e=n[dn];if(o.elements=e,tr(e)){var c=o.elements=i.create(e,!0);e=i.getElements(c),u=!0}else e&&(e=i.getElements(e),u=!0,A.command(e,"invalid elements",t.commandStr));var f=ar((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return f.value=e,f}if(dn in r){u=!0;var l=r[dn];return ir(l,(function(e,t){var n=e.shared,r=n.isBufferArgs,o=n.elements,a=e.invoke(t,l),i=t.def("null"),s=t.def(r,"(",a,")"),u=e.cond(s).then(i,"=",o,".createStream(",a,");").else(i,"=",o,".getElements(",a,");");return A.optional((function(){e.assert(u.else,"!"+a+"||"+i,"invalid elements")})),t.entry(u),t.exit(e.cond(s).then(o,".destroyStream(",i,");")),e.ELEMENTS=i,i}))}return a?new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}();function l(e,i){if(e in n){var c=0|n[e];return i?o.offset=c:o.instances=c,A.command(!i||c>=0,"invalid "+e,t.commandStr),ar((function(e,t){return i&&(e.OFFSET=c),c}))}if(e in r){var f=r[e];return ir(f,(function(t,n){var r=t.invoke(n,f);return i&&(t.OFFSET=r,A.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}if(i){if(u)return ar((function(e,t){return e.OFFSET=0,0}));if(a)return new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(a)return new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var p=l(vn,!0),d=function(){if(hn in n){var e=n[hn];return o.primitive=e,A.commandParameter(e,ae,"invalid primitve",t.commandStr),ar((function(t,n){return ae[e]}))}if(hn in r){var i=r[hn];return ir(i,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,i);return A.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(ae))})),t.def(n,"[",r,"]")}))}return u?or(c)?c.value?ar((function(e,t){return t.def(e.ELEMENTS,".primType")})):ar((function(){return 4})):new rr(c.thisDep,c.contextDep,c.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)})):a?new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")})):null}(),h=function(){if(mn in n){var e=0|n[mn];return o.count=e,A.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),ar((function(){return e}))}if(mn in r){var i=r[mn];return ir(i,(function(e,t){var n=e.invoke(t,i);return A.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(u){if(or(c)){if(c)return p?new rr(p.thisDep,p.contextDep,p.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return A.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):ar((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var f=ar((function(){return-1}));return A.optional((function(){f.MISSING=!0})),f}var l=new rr(c.thisDep||p.thisDep,c.contextDep||p.contextDep,c.propDep||p.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return A.optional((function(){l.DYNAMIC=!0})),l}if(a){var d=new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}));return d}return null}(),m=l(gn,!1);return{elements:c,primitive:d,count:h,instances:m,offset:p,vao:s,vaoActive:a,elementsActive:u,static:o}}(e,p),T=function(e,t){var n=e.static,r=e.dynamic,a={};return E.forEach((function(e){var i=C(e);function s(t,o){if(e in n){var s=t(n[e]);a[i]=ar((function(){return s}))}else if(e in r){var u=r[e];a[i]=ir(u,(function(e,t){return o(e,t,e.invoke(t,u))}))}}switch(e){case Xt:case Lt:case Ft:case en:case Ut:case an:case Qt:case Jt:case Zt:case Ht:return s((function(n){return A.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return A.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case jt:return s((function(n){return A.commandParameter(n,Jn,"invalid "+e,t.commandStr),Jn[n]}),(function(t,n,r){var o=t.constants.compareFuncs;return A.optional((function(){t.assert(n,r+" in "+o,"invalid "+e+", must be one of "+Object.keys(Jn))})),n.def(o,"[",r,"]")}));case Vt:return s((function(e){return A.command(de(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){return A.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case Bt:return s((function(e){A.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,o="dstRGB"in e?e.dstRGB:e.dst,a="dstAlpha"in e?e.dstAlpha:e.dst;return A.commandParameter(n,Qn,i+".srcRGB",t.commandStr),A.commandParameter(r,Qn,i+".srcAlpha",t.commandStr),A.commandParameter(o,Qn,i+".dstRGB",t.commandStr),A.commandParameter(a,Qn,i+".dstAlpha",t.commandStr),A.command(-1===Kn.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",t.commandStr),[Qn[n],Qn[o],Qn[r],Qn[a]]}),(function(t,n,r){var o=t.constants.blendFuncs;function a(a,i){var s=n.def('"',a,i,'" in ',r,"?",r,".",a,i,":",r,".",a);return A.optional((function(){t.assert(n,s+" in "+o,"invalid "+e+"."+a+i+", must be one of "+Object.keys(Qn))})),s}A.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var i=a("src","RGB"),s=a("dst","RGB");A.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+i+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(o,"[",i,"]"),c=n.def(o,"[",a("src","Alpha"),"]");return[u,n.def(o,"[",s,"]"),c,n.def(o,"[",a("dst","Alpha"),"]")]}));case zt:return s((function(n){return"string"==typeof n?(A.commandParameter(n,g,"invalid "+e,t.commandStr),[g[n],g[n]]):"object"==typeof n?(A.commandParameter(n.rgb,g,e+".rgb",t.commandStr),A.commandParameter(n.alpha,g,e+".alpha",t.commandStr),[g[n.rgb],g[n.alpha]]):void A.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var o=t.constants.blendEquations,a=n.def(),i=n.def(),s=t.cond("typeof ",r,'==="string"');return A.optional((function(){function n(e,n,r){t.assert(e,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(g))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")})),s.then(a,"=",i,"=",o,"[",r,"];"),s.else(a,"=",o,"[",r,".rgb];",i,"=",o,"[",r,".alpha];"),n(s),[a,i]}));case Nt:return s((function(e){return A.command(de(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),F(4,(function(t){return+e[t]}))}),(function(e,t,n){return A.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),F(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case tn:return s((function(e){return A.commandType(e,"number",i,t.commandStr),0|e}),(function(e,t,n){return A.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case nn:return s((function(n){A.commandType(n,"object",i,t.commandStr);var r=n.cmp||"keep",o=n.ref||0,a="mask"in n?n.mask:-1;return A.commandParameter(r,Jn,e+".cmp",t.commandStr),A.commandType(o,"number",e+".ref",t.commandStr),A.commandType(a,"number",e+".mask",t.commandStr),[Jn[r],o,a]}),(function(e,t,n){var r=e.constants.compareFuncs;return A.optional((function(){function o(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Yn),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case rn:case on:return s((function(n){A.commandType(n,"object",i,t.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",a=n.zpass||"keep";return A.commandParameter(r,Zn,e+".fail",t.commandStr),A.commandParameter(o,Zn,e+".zfail",t.commandStr),A.commandParameter(a,Zn,e+".zpass",t.commandStr),[e===on?qn:Xn,Zn[r],Zn[o],Zn[a]]}),(function(t,n,r){var o=t.constants.stencilOps;function a(a){return A.optional((function(){t.assert(n,'!("'+a+'" in '+r+")||("+r+"."+a+" in "+o+")","invalid "+e+"."+a+", must be one of "+Object.keys(Zn))})),n.def('"',a,'" in ',r,"?",o,"[",r,".",a,"]:",Yn)}return A.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===on?qn:Xn,a("fail"),a("zfail"),a("zpass")]}));case Kt:return s((function(e){A.commandType(e,"object",i,t.commandStr);var n=0|e.factor,r=0|e.units;return A.commandType(n,"number",i+".factor",t.commandStr),A.commandType(r,"number",i+".units",t.commandStr),[n,r]}),(function(t,n,r){return A.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case qt:return s((function(e){var n=0;return"front"===e?n=Xn:"back"===e&&(n=qn),A.command(!!n,i,t.commandStr),n}),(function(e,t,n){return A.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',Xn,":",qn)}));case Yt:return s((function(e){return A.command("number"==typeof e&&e>=o.lineWidthDims[0]&&e<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return A.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case Wt:return s((function(e){return A.commandParameter(e,er,i,t.commandStr),er[e]}),(function(e,t,n){return A.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?2304:'+Wn)}));case Gt:return s((function(e){return A.command(de(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return A.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),F(4,(function(e){return"!!"+n+"["+e+"]"}))}));case $t:return s((function(e){A.command("object"==typeof e&&e,i,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return A.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){return A.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),a}(e,p),w=function(e,t,r){var o=e.static,a=e.dynamic;function i(e){if(e in o){var t=n.id(o[e]);A.optional((function(){l.shader($n[e],t,A.guessCommand())}));var r=ar((function(){return t}));return r.id=t,r}if(e in a){var i=a[e];return ir(i,(function(t,n){var r=t.invoke(n,i),o=n.def(t.shared.strings,".id(",r,")");return A.optional((function(){n(t.shared.shader,".shader(",$n[e],",",o,",",t.command,");")})),o}))}return null}var s,u=i(pn),c=i(ln),f=null;return or(u)&&or(c)?(f=l.program(c.id,u.id,null,r),s=ar((function(e,t){return e.link(f)}))):s=new rr(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(e,t){var n,r=e.shared.shader;n=u?u.append(e,t):t.def(r,".",pn);var o=r+".program("+(c?c.append(e,t):t.def(r,".",ln))+","+n;return A.optional((function(){o+=","+e.command})),t.def(o+")")})),{frag:u,vert:c,progVar:s,program:f}}(e,0,m);function S(e){var t=_[e];t&&(T[e]=t)}S(un),S(C(sn));var I=Object.keys(T).length>0,M={framebuffer:b,draw:x,shader:w,state:T,dirty:I,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(M.profile=function(e){var t,n=e.static,r=e.dynamic;if(cn in n){var o=!!n[cn];(t=ar((function(e,t){return o}))).enable=o}else if(cn in r){var a=r[cn];t=ir(a,(function(e,t){return e.invoke(t,a)}))}return t}(e),M.uniforms=function(e,t){var n=e.static,r=e.dynamic,o={};return Object.keys(n).forEach((function(e){var r,a=n[e];if("number"==typeof a||"boolean"==typeof a)r=ar((function(){return a}));else if("function"==typeof a){var i=a._reglType;"texture2d"===i||"textureCube"===i?r=ar((function(e){return e.link(a)})):"framebuffer"===i||"framebufferCube"===i?(A.command(a.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=ar((function(e){return e.link(a.color[0])}))):A.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else de(a)?r=ar((function(t){return t.global.def("[",F(a.length,(function(n){return A.command("number"==typeof a[n]||"boolean"==typeof a[n],"invalid uniform "+e,t.commandStr),a[n]})),"]")})):A.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=a,o[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];o[e]=ir(t,(function(e,n){return e.invoke(n,t)}))})),o}(s,p),M.drawVAO=M.scopeVAO=x.vao,!M.drawVAO&&w.program&&!m&&r.angle_instanced_arrays&&x.static.elements){var O=!0,R=w.program.attributes.map((function(e){var n=t.static[e];return O=O&&!!n,n}));if(O&&R.length>0){var D=f.getVAO(f.createVAO({attributes:R,elements:x.static.elements}));M.drawVAO=new rr(null,null,null,(function(e,t){return e.link(D)})),M.useVAO=!0}}return m?M.useVAO=!0:M.attributes=function(e,t){var r=e.static,o=e.dynamic,i={};return Object.keys(r).forEach((function(e){var o=r[e],s=n.id(e),u=new v;if(tr(o))u.state=1,u.buffer=a.getBuffer(a.create(o,Sn,!1,!0)),u.type=0;else{var c=a.getBuffer(o);if(c)u.state=1,u.buffer=c,u.type=0;else if(A.command("object"==typeof o&&o,"invalid data for attribute "+e,t.commandStr),"constant"in o){var f=o.constant;u.buffer="null",u.state=2,"number"==typeof f?u.x=f:(A.command(de(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+e,t.commandStr),kt.forEach((function(e,t){t<f.length&&(u[e]=f[t])})))}else{c=tr(o.buffer)?a.getBuffer(a.create(o.buffer,Sn,!1,!0)):a.getBuffer(o.buffer),A.command(!!c,'missing buffer for attribute "'+e+'"',t.commandStr);var l=0|o.offset;A.command(l>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var p=0|o.stride;A.command(p>=0&&p<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var d=0|o.size;A.command(!("size"in o)||d>0&&d<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var h=!!o.normalized,m=0;"type"in o&&(A.commandParameter(o.type,Q,"invalid type for attribute "+e,t.commandStr),m=Q[o.type]);var g=0|o.divisor;A.optional((function(){"divisor"in o&&(A.command(0===g||y,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),A.command(g>=0,'invalid divisor for attribute "'+e+'"',t.commandStr));var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(t){A.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)}))})),u.buffer=c,u.state=1,u.size=d,u.normalized=h,u.type=m||c.dtype,u.offset=l,u.stride=p,u.divisor=g}}i[e]=ar((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(e){r[e]=u[e]})),u.buffer&&(r.buffer=e.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(e){var t=o[e];i[e]=ir(t,(function(n,r){var o=n.invoke(r,t),a=n.shared,i=n.constants,s=a.isBufferArgs,u=a.buffer;A.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+s+"("+o+")||"+u+".getBuffer("+o+")||"+u+".getBuffer("+o+".buffer)||"+s+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+e+'"')}));var c={isStream:r.def(!1)},f=new v;f.state=1,Object.keys(f).forEach((function(e){c[e]=r.def(""+f[e])}));var l=c.buffer,p=c.type;function d(e){r(c[e],"=",o,".",e,"|0;")}return r("if(",s,"(",o,")){",c.isStream,"=true;",l,"=",u,".createStream(",Sn,",",o,");",p,"=",l,".dtype;","}else{",l,"=",u,".getBuffer(",o,");","if(",l,"){",p,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[kt[0]],"=",o,".constant;",kt.slice(1).map((function(e){return c[e]})).join("="),"=0;","}else{",kt.map((function(e,t){return c[e]+"="+o+".constant.length>"+t+"?"+o+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",o,".buffer)){",l,"=",u,".createStream(",Sn,",",o,".buffer);","}else{",l,"=",u,".getBuffer(",o,".buffer);","}",p,'="type" in ',o,"?",i.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",l,");","}"),c}))})),i}(t,p),M.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=ar((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=ir(t,(function(e,n){return e.invoke(n,t)}))})),r}(c),M}function N(e,t,n){var r=e.shared.context,o=e.scope();Object.keys(n).forEach((function(a){t.save(r,"."+a);var i=n[a].append(e,t);Array.isArray(i)?o(r,".",a,"=[",i.join(),"];"):o(r,".",a,"=",i,";")})),t(o)}function z(e,t,n,r){var o,a=e.shared,i=a.gl,s=a.framebuffer;b&&(o=t.def(a.extensions,".webgl_draw_buffers"));var u,c=e.constants,f=c.drawBuffer,l=c.backBuffer;u=n?n.append(e,t):t.def(s,".next"),r||t("if(",u,"!==",s,".cur){"),t("if(",u,"){",i,".bindFramebuffer(",36160,",",u,".framebuffer);"),b&&t(o,".drawBuffersWEBGL(",f,"[",u,".colorAttachments.length]);"),t("}else{",i,".bindFramebuffer(",36160,",null);"),b&&t(o,".drawBuffersWEBGL(",l,");"),t("}",s,".cur=",u,";"),r||t("}")}function B(e,t,n){var r=e.shared,o=r.gl,a=e.current,i=e.next,s=r.current,u=r.next,c=e.cond(s,".dirty");E.forEach((function(t){var r,f,l=C(t);if(!(l in n.state))if(l in i){r=i[l],f=a[l];var p=F(x[l].length,(function(e){return c.def(r,"[",e,"]")}));c(e.cond(p.map((function(e,t){return e+"!=="+f+"["+t+"]"})).join("||")).then(o,".",S[l],"(",p,");",p.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";"))}else{r=c.def(u,".",l);var d=e.cond(r,"!==",s,".",l);c(d),l in w?d(e.cond(r).then(o,".enable(",w[l],");").else(o,".disable(",w[l],");"),s,".",l,"=",r,";"):d(o,".",S[l],"(",r,");",s,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function U(e,t,n,r){var o=e.shared,a=e.current,i=o.current,s=o.gl;nr(Object.keys(n)).forEach((function(o){var u=n[o];if(!r||r(u)){var c=u.append(e,t);if(w[o]){var f=w[o];or(u)?t(s,c?".enable(":".disable(",f,");"):t(e.cond(c).then(s,".enable(",f,");").else(s,".disable(",f,");")),t(i,".",o,"=",c,";")}else if(de(c)){var l=a[o];t(s,".",S[o],"(",c,");",c.map((function(e,t){return l+"["+t+"]="+e})).join(";"),";")}else t(s,".",S[o],"(",c,");",i,".",o,"=",c,";")}}))}function j(e,t){y&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function V(e,t,n,r,o){var a,i,s,u=e.shared,c=e.stats,f=u.current,l=u.timer,p=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(e){e(a=t.def(),"=",d(),";"),"string"==typeof o?e(c,".count+=",o,";"):e(c,".count++;"),h&&(r?e(i=t.def(),"=",l,".getNumPendingQueries();"):e(l,".beginQuery(",c,");"))}function v(e){e(c,".cpuTime+=",d(),"-",a,";"),h&&(r?e(l,".pushScopeStats(",i,",",l,".getNumPendingQueries(),",c,");"):e(l,".endQuery();"))}function g(e){var n=t.def(f,".profile");t(f,".profile=",e,";"),t.exit(f,".profile=",n,";")}if(p){if(or(p))return void(p.enable?(m(t),v(t.exit),g("true")):g("false"));g(s=p.append(e,t))}else s=t.def(f,".profile");var y=e.block();m(y),t("if(",s,"){",y,"}");var b=e.block();v(b),t.exit("if(",s,"){",b,"}")}function H(e,t,n,r,o){var a=e.shared;r.forEach((function(r){var i,s=r.name,u=n.attributes[s];if(u){if(!o(u))return;i=u.append(e,t)}else{if(!o(sr))return;var c=e.scopeAttrib(s);A.optional((function(){e.assert(t,c+".state","missing attribute "+s)})),i={},Object.keys(new v).forEach((function(e){i[e]=t.def(c,".",e)}))}!function(n,r,o){var i=a.gl,s=t.def(n,".location"),u=t.def(a.attributes,"[",s,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],p=["buffer","normalized","offset","stride"];function d(){t("if(!",u,".buffer){",i,".enableVertexAttribArray(",s,");}");var n,a=o.type;if(n=o.size?t.def(o.size,"||",r):r,t("if(",u,".type!==",a,"||",u,".size!==",n,"||",p.map((function(e){return u+"."+e+"!=="+o[e]})).join("||"),"){",i,".bindBuffer(",Sn,",",f,".buffer);",i,".vertexAttribPointer(",[s,n,a,o.normalized,o.stride,o.offset],");",u,".type=",a,";",u,".size=",n,";",p.map((function(e){return u+"."+e+"="+o[e]+";"})).join(""),"}"),y){var c=o.divisor;t("if(",u,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function h(){t("if(",u,".buffer){",i,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",kt.map((function(e,t){return u+"."+e+"!=="+l[t]})).join("||"),"){",i,".vertexAttrib4f(",s,",",l,");",kt.map((function(e,t){return u+"."+e+"="+l[t]+";"})).join(""),"}")}1===c?d():2===c?h():(t("if(",c,"===",1,"){"),d(),t("}else{"),h(),t("}"))}(e.link(r),function(e){switch(e){case Mn:case Pn:case Nn:return 2;case On:case kn:case zn:return 3;case Rn:case Fn:case Bn:return 4;default:return 1}}(r.info.type),i)}))}function G(e,t,r,o,a,i){for(var s,u=e.shared,c=u.gl,f={},l=0;l<o.length;++l){var p=o[l],d=p.name,h=p.info.type,m=p.info.size,v=r.uniforms[d];if(m>1){if(!v)continue;var g=d.replace("[0]","");if(f[g])continue;f[g]=1}var y,b=e.link(p)+".location";if(v){if(!a(v))continue;if(or(v)){var _=v.value;if(A.command(null!=_,'missing uniform "'+d+'"',e.commandStr),h===Hn||h===Gn){A.command("function"==typeof _&&(h===Hn&&("texture2d"===_._reglType||"framebuffer"===_._reglType)||h===Gn&&("textureCube"===_._reglType||"framebufferCube"===_._reglType)),"invalid texture for uniform "+d,e.commandStr);var x=e.link(_._texture||_.color[0]._texture);t(c,".uniform1i(",b,",",x+".bind());"),t.exit(x,".unbind();")}else if(h===Un||h===jn||h===Vn){A.optional((function(){A.command(de(_),"invalid matrix for uniform "+d,e.commandStr),A.command(h===Un&&4===_.length||h===jn&&9===_.length||h===Vn&&16===_.length,"invalid length for matrix uniform "+d,e.commandStr)}));var T=e.global.def("new Float32Array(["+Array.prototype.slice.call(_)+"])"),E=2;h===jn?E=3:h===Vn&&(E=4),t(c,".uniformMatrix",E,"fv(",b,",false,",T,");")}else{switch(h){case In:1===m?A.commandType(_,"number","uniform "+d,e.commandStr):A.command(de(_)&&_.length===m,"uniform "+d,e.commandStr),s="1f";break;case Mn:A.command(de(_)&&_.length&&_.length%2==0&&_.length<=2*m,"uniform "+d,e.commandStr),s="2f";break;case On:A.command(de(_)&&_.length&&_.length%3==0&&_.length<=3*m,"uniform "+d,e.commandStr),s="3f";break;case Rn:A.command(de(_)&&_.length&&_.length%4==0&&_.length<=4*m,"uniform "+d,e.commandStr),s="4f";break;case Ln:1===m?A.commandType(_,"boolean","uniform "+d,e.commandStr):A.command(de(_)&&_.length===m,"uniform "+d,e.commandStr),s="1i";break;case Dn:1===m?A.commandType(_,"number","uniform "+d,e.commandStr):A.command(de(_)&&_.length===m,"uniform "+d,e.commandStr),s="1i";break;case Nn:case Pn:A.command(de(_)&&_.length&&_.length%2==0&&_.length<=2*m,"uniform "+d,e.commandStr),s="2i";break;case zn:case kn:A.command(de(_)&&_.length&&_.length%3==0&&_.length<=3*m,"uniform "+d,e.commandStr),s="3i";break;case Bn:case Fn:A.command(de(_)&&_.length&&_.length%4==0&&_.length<=4*m,"uniform "+d,e.commandStr),s="4i"}m>1?(s+="v",_=e.global.def("["+Array.prototype.slice.call(_)+"]")):_=de(_)?Array.prototype.slice.call(_):_,t(c,".uniform",s,"(",b,",",_,");")}continue}y=v.append(e,t)}else{if(!a(sr))continue;y=t.def(u.uniforms,"[",n.id(d),"]")}h===Hn?(A(!Array.isArray(y),"must specify a scalar prop for textures"),t("if(",y,"&&",y,'._reglType==="framebuffer"){',y,"=",y,".color[0];","}")):h===Gn&&(A(!Array.isArray(y),"must specify a scalar prop for cube maps"),t("if(",y,"&&",y,'._reglType==="framebufferCube"){',y,"=",y,".color[0];","}")),A.optional((function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+d+'".  '+r)}function r(e,t){1===t&&A(!Array.isArray(y),"must not specify an array type for uniform"),n("Array.isArray("+y+") && typeof "+y+'[0]===" '+e+'" || typeof '+y+'==="'+e+'"',"invalid type, expected "+e)}function o(t,r,o){Array.isArray(y)?A(y.length&&y.length%t==0&&y.length<=t*o,"must have length of "+(1===o?"":"n * ")+t):n(u.isArrayLike+"("+y+")&&"+y+".length && "+y+".length % "+t+" === 0 && "+y+".length<="+t*o,"invalid vector, should have length of "+(1===o?"":"n * ")+t,e.commandStr)}function a(t){A(!Array.isArray(y),"must not specify a value type"),n("typeof "+y+'==="function"&&'+y+'._reglType==="texture'+(3553===t?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(h){case Dn:r("number",m);break;case Pn:o(2,0,m);break;case kn:o(3,0,m);break;case Fn:o(4,0,m);break;case In:r("number",m);break;case Mn:o(2,0,m);break;case On:o(3,0,m);break;case Rn:o(4,0,m);break;case Ln:r("boolean",m);break;case Nn:o(2,0,m);break;case zn:o(3,0,m);break;case Bn:case Un:o(4,0,m);break;case jn:o(9,0,m);break;case Vn:o(16,0,m);break;case Hn:a(3553);break;case Gn:a(34067)}}));var w=1;switch(h){case Hn:case Gn:var S=t.def(y,"._texture");t(c,".uniform1i(",b,",",S,".bind());"),t.exit(S,".unbind();");continue;case Dn:case Ln:s="1i";break;case Pn:case Nn:s="2i",w=2;break;case kn:case zn:s="3i",w=3;break;case Fn:case Bn:s="4i",w=4;break;case In:s="1f";break;case Mn:s="2f",w=2;break;case On:s="3f",w=3;break;case Rn:s="4f",w=4;break;case Un:s="Matrix2fv";break;case jn:s="Matrix3fv";break;case Vn:s="Matrix4fv"}if(-1===s.indexOf("Matrix")&&m>1&&(s+="v",w=1),"M"===s.charAt(0)){t(c,".uniform",s,"(",b,",");var C=Math.pow(h-Un+2,2),I=e.global.def("new Float32Array(",C,")");Array.isArray(y)?t("false,(",F(C,(function(e){return I+"["+e+"]="+y[e]})),",",I,")"):t("false,(Array.isArray(",y,")||",y," instanceof Float32Array)?",y,":(",F(C,(function(e){return I+"["+e+"]="+y+"["+e+"]"})),",",I,")"),t(");")}else if(w>1){for(var M=[],O=[],R=0;R<w;++R)Array.isArray(y)?O.push(y[R]):O.push(t.def(y+"["+R+"]")),i&&M.push(t.def());i&&t("if(!",e.batchId,"||",M.map((function(e,t){return e+"!=="+O[t]})).join("||"),"){",M.map((function(e,t){return e+"="+O[t]+";"})).join("")),t(c,".uniform",s,"(",b,",",O.join(","),");"),i&&t("}")}else{if(A(!Array.isArray(y),"uniform value must not be an array"),i){var D=t.def();t("if(!",e.batchId,"||",D,"!==",y,"){",D,"=",y,";")}t(c,".uniform",s,"(",b,",",y,");"),i&&t("}")}}}function X(e,t,n,r){var o=e.shared,a=o.gl,i=o.draw,s=r.draw;var u=function(){var u,c=s.elements,f=t;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(f=n),u=c.append(e,f),s.elementsActive&&f("if("+u+")"+a+".bindBuffer("+"34963,"+u+".buffer.buffer);")):(u=f.def(),f(u,"=",i,".",dn,";","if(",u,"){",a,".bindBuffer(",Cn,",",u,".buffer.buffer);}","else if(",o.vao,".currentVAO){",u,"=",e.shared.elements+".getElements("+o.vao,".currentVAO.elements);",_?"":"if("+u+")"+a+".bindBuffer("+"34963,"+u+".buffer.buffer);","}")),u}();function c(o){var a=s[o];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(i,".",o)}var f,l,p=c(hn),d=c(vn),h=function(){var o,a=s.count,u=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(u=n),o=a.append(e,u),A.optional((function(){a.MISSING&&e.assert(t,"false","missing vertex count"),a.DYNAMIC&&e.assert(u,o+">=0","missing vertex count")}))):(o=u.def(i,".",mn),A.optional((function(){e.assert(u,o+">=0","missing vertex count")}))),o}();if("number"==typeof h){if(0===h)return}else n("if(",h,"){"),n.exit("}");y&&(f=c(gn),l=e.instancing);var m=u+".type",v=s.elements&&or(s.elements)&&!s.vaoActive;function g(){function e(){n(l,".drawElementsInstancedANGLE(",[p,h,m,d+"<<(("+m+"-5121)>>1)",f],");")}function t(){n(l,".drawArraysInstancedANGLE(",[p,d,h,f],");")}u&&"null"!==u?v?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}function b(){function e(){n(a+".drawElements("+[p,h,m,d+"<<(("+m+"-5121)>>1)"]+");")}function t(){n(a+".drawArrays("+[p,d,h]+");")}u&&"null"!==u?v?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}y&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),g(),n("}else if(",f,"<0){"),b(),n("}")):g():b()}function q(e,t,n,r,o){var a=k(),i=a.proc("body",o);return A.optional((function(){a.commandStr=t.commandStr,a.command=a.link(t.commandStr)})),y&&(a.instancing=i.def(a.shared.extensions,".angle_instanced_arrays")),e(a,i,n,r),a.compile().body}function W(e,t,n,r){j(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),H(e,t,n,r.attributes,(function(){return!0}))),G(e,t,n,r.uniforms,(function(){return!0}),!1),X(e,t,t,n)}function Y(e,t,n,r){function o(){return!0}e.batchId="a1",j(e,t),H(e,t,n,r.attributes,o),G(e,t,n,r.uniforms,o,!1),X(e,t,t,n)}function K(e,t,n,r){j(e,t);var o=n.contextDep,a=t.def(),i=t.def();e.shared.props=i,e.batchId=a;var s=e.scope(),u=e.scope();function c(e){return e.contextDep&&o||e.propDep}function f(e){return!c(e)}if(t(s.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",i,"=","a0","[",a,"];",u,"}",s.exit),n.needsContext&&N(e,u,n.context),n.needsFramebuffer&&z(e,u,n.framebuffer),U(e,u,n.state,c),n.profile&&c(n.profile)&&V(e,u,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?u(e.shared.vao,".setVAO(",n.drawVAO.append(e,u),");"):s(e.shared.vao,".setVAO(",n.drawVAO.append(e,s),");"):s(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(s(e.shared.vao,".setVAO(null);"),H(e,s,n,r.attributes,f),H(e,u,n,r.attributes,c)),G(e,s,n,r.uniforms,f,!1),G(e,u,n,r.uniforms,c,!0),X(e,s,u,n);else{var l=e.global.def("{}"),p=n.shader.progVar.append(e,u),d=u.def(p,".id"),h=u.def(l,"[",d,"]");u(e.shared.gl,".useProgram(",p,".program);","if(!",h,"){",h,"=",l,"[",d,"]=",e.link((function(t){return q(Y,e,n,t,2)})),"(",p,");}",h,".call(this,a0[",a,"],",a,");")}}function J(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!de(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(M.isDynamic(e[t[n]]))return!0;return!1}}(r)){var o=e.global,a=Object.keys(r),i=!1,s=!1,u=!1,c=e.global.def("{}");a.forEach((function(t){var n=r[t];if(M.isDynamic(n)){"function"==typeof n&&(n=r[t]=M.unbox(n));var a=ir(n,null);i=i||a.thisDep,u=u||a.propDep,s=s||a.contextDep}else{switch(o(c,".",t,"="),typeof n){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(e.link(n))}o(";")}})),t.dynamic[n]=new M.DynamicVariable(4,{thisDep:i,contextDep:s,propDep:u,ref:c,append:function(e,t){a.forEach((function(n){var o=r[n];if(M.isDynamic(o)){var a=e.invoke(t,o);t(c,".",n,"=",a,";")}}))}}),delete t.static[n]}}return{next:T,current:x,procs:function(){var e=k(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var i,s=e.shared,u=s.gl,c=s.next,f=s.current;a(f,".dirty=false;"),z(e,t),z(e,n,null,!0),y&&(i=e.link(y)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<o.maxAttributes;++l){var p=n.def(s.attributes,"[",l,"]"),d=e.cond(p,".buffer");d.then(u,".enableVertexAttribArray(",l,");",u,".bindBuffer(",Sn,",",p,".buffer.buffer);",u,".vertexAttribPointer(",l,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(u,".disableVertexAttribArray(",l,");",u,".vertexAttrib4f(",l,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),n(d),y&&n(i,".vertexAttribDivisorANGLE(",l,",",p,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(w).forEach((function(r){var o=w[r],i=a.def(c,".",r),s=e.block();s("if(",i,"){",u,".enable(",o,")}else{",u,".disable(",o,")}",f,".",r,"=",i,";"),n(s),t("if(",i,"!==",f,".",r,"){",s,"}")})),Object.keys(S).forEach((function(r){var o,i,s=S[r],l=x[r],p=e.block();if(p(u,".",s,"("),de(l)){var d=l.length;o=e.global.def(c,".",r),i=e.global.def(f,".",r),p(F(d,(function(e){return o+"["+e+"]"})),");",F(d,(function(e){return i+"["+e+"]="+o+"["+e+"];"})).join("")),t("if(",F(d,(function(e){return o+"["+e+"]!=="+i+"["+e+"]"})).join("||"),"){",p,"}")}else o=a.def(c,".",r),i=a.def(f,".",r),p(o,");",f,".",r,"=",o,";"),t("if(",o,"!==",i,"){",p,"}");n(p)})),e.compile()}(),compile:function(e,r,o,a,i){var s=k();s.stats=s.link(i),Object.keys(r.static).forEach((function(e){J(s,r,e)})),wn.forEach((function(t){J(s,e,t)}));var u=L(e,r,o,a,s);return function(e,t){var n=e.proc("draw",1);j(e,n),N(e,n,t.context),z(e,n,t.framebuffer),B(e,n,t),U(e,n,t.state),V(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)W(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var o=e.global.def("{}"),a=n.def(r,".id"),i=n.def(o,"[",a,"]");n(e.cond(i).then(i,".call(this,a0);").else(i,"=",o,"[",a,"]=",e.link((function(n){return q(W,e,t,n,1)})),"(",r,");",i,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(s,u),function(e,t){var r=e.proc("scope",3);e.batchId="a2";var o=e.shared,a=o.current;function i(n){var a=t.shader[n];a&&r.set(o.shader,"."+n,a.append(e,r))}N(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),nr(Object.keys(t.state)).forEach((function(n){var a=t.state[n].append(e,r);de(a)?a.forEach((function(t,o){r.set(e.next[n],"["+o+"]",t)})):r.set(o.next,"."+n,a)})),V(e,r,t,!0,!0),[dn,vn,mn,gn,hn].forEach((function(n){var a=t.draw[n];a&&r.set(o.draw,"."+n,""+a.append(e,r))})),Object.keys(t.uniforms).forEach((function(a){var i=t.uniforms[a].append(e,r);Array.isArray(i)&&(i="["+i.join()+"]"),r.set(o.uniforms,"["+n.id(a)+"]",i)})),Object.keys(t.attributes).forEach((function(n){var o=t.attributes[n].append(e,r),a=e.scopeAttrib(n);Object.keys(new v).forEach((function(e){r.set(a,"."+e,o[e])}))})),t.scopeVAO&&r.set(o.vao,".targetVAO",t.scopeVAO.append(e,r)),i(ln),i(pn),Object.keys(t.state).length>0&&(r(a,".dirty=true;"),r.exit(a,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}(s,u),function(e,t){var n=e.proc("batch",2);e.batchId="0",j(e,n);var r=!1,o=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(N(e,n,t.context),o=!1);var a=t.framebuffer,i=!1;function s(e){return e.contextDep&&r||e.propDep}a?(a.propDep?r=i=!0:a.contextDep&&r&&(i=!0),i||z(e,n,a)):z(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),B(e,n,t),U(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||V(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=o,t.needsFramebuffer=i;var u=t.shader.progVar;if(u.contextDep&&r||u.propDep)K(e,n,t,null);else{var c=u.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)K(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var f=e.global.def("{}"),l=n.def(c,".id"),p=n.def(f,"[",l,"]");n(e.cond(p).then(p,".call(this,a0,a1);").else(p,"=",f,"[",l,"]=",e.link((function(n){return q(K,e,t,n,2)})),"(",c,");",p,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(s,u),t(s.compile(),{destroy:function(){u.shader.program.destroy()}})}}}var cr=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(e){n.push(e)}var o=[];function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var i=[];function s(e){i.push(e)}var u=[];function c(e,t,n){var r=i.pop()||new a;r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,u.push(r)}var f=[],l=[];return{beginQuery:function(e){var r=n.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var e,n,a=o.length;if(0!==a){l.length=Math.max(l.length,a+1),f.length=Math.max(f.length,a+1),f[0]=0,l[0]=0;var i=0;for(e=0,n=0;n<o.length;++n){var c=o[n];t.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(i+=t.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[e++]=c,f[n+1]=i,l[n+1]=e}for(o.length=e,e=0,n=0;n<u.length;++n){var p=u[n],d=p.startQueryIndex,h=p.endQueryIndex;p.sum+=f[h]-f[d];var m=l[d],v=l[h];v===m?(p.stats.gpuTime+=p.sum/1e6,s(p)):(p.startQueryIndex=m,p.endQueryIndex=v,u[e++]=p)}u.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},fr="webglcontextlost",lr="webglcontextrestored";function pr(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}return function(n){var r=k(n);if(!r)return null;var o=r.gl,a=o.getContextAttributes(),i=o.isContextLost(),s=function(e,t){var n={};function r(t){A.type(t,"string","extension name must be string");var r,o=t.toLowerCase();try{r=n[o]=e.getExtension(o)}catch(e){}return!!r}for(var o=0;o<t.extensions.length;++o){var a=t.extensions[o];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}(o,r);if(!s)return null;var u,c,f=(u={"":0},c=[""],{id:function(e){var t=u[e];return t||(t=u[e]=c.length,c.push(e),t)},str:function(e){return c[e]}}),l={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},p=s.extensions,d=cr(0,p),h=R(),m=o.drawingBufferWidth,v=o.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:v,framebufferWidth:m,framebufferHeight:v,drawingBufferWidth:m,drawingBufferHeight:v,pixelRatio:r.pixelRatio},y={elements:null,primitive:4,count:-1,offset:0,instances:-1},b=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,o=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),o=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){var i=e.createTexture();e.bindTexture(B,i),e.texImage2D(B,0,U,1,1,0,U,j,null);var s=e.createFramebuffer();if(e.bindFramebuffer(V,s),e.framebufferTexture2D(V,36064,B,i,0),e.bindTexture(B,null),36053!==e.checkFramebufferStatus(V))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=z.allocType(j,4);e.readPixels(0,0,1,1,U,j,u),e.getError()?a=!1:(e.deleteFramebuffer(s),e.deleteTexture(i),a=1===u[0]),z.freeType(u)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=e.createTexture(),l=z.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,f),e.texImage2D(34069,0,U,3,3,0,U,5121,l),z.freeType(l),e.bindTexture(34067,null),e.deleteTexture(f),c=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:c}}(o,p),_=function(t,n,r,o){var a=0,i={};function s(e){this.id=a++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=$,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){l(this)};var u=[];function c(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function f(t,n,r,o,a,i){var s,u;if(t.usage=r,Array.isArray(n)){if(t.dtype=o||ee,n.length>0)if(Array.isArray(n[0])){s=Z(n);for(var f=1,l=1;l<s.length;++l)f*=s[l];t.dimension=f,c(t,u=J(n,s,t.dtype),r),i?t.persistentData=u:z.freeType(u)}else if("number"==typeof n[0]){t.dimension=a;var p=z.allocType(t.dtype,n.length);re(p,n),c(t,p,r),i?t.persistentData=p:z.freeType(p)}else e(n[0])?(t.dimension=n[0].length,t.dtype=o||ne(n[0])||ee,c(t,u=J(n,[n.length,n[0].length],t.dtype),r),i?t.persistentData=u:z.freeType(u)):A.raise("invalid buffer data")}else if(e(n))t.dtype=o||ne(n),t.dimension=a,c(t,n,r),i&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(H(n)){s=n.shape;var d=n.stride,h=n.offset,m=0,v=0,g=0,y=0;1===s.length?(m=s[0],v=1,g=d[0],y=0):2===s.length?(m=s[0],v=s[1],g=d[0],y=d[1]):A.raise("invalid shape"),t.dtype=o||ne(n.data)||ee,t.dimension=v;var b=z.allocType(t.dtype,m*v);oe(b,n.data,m,v,g,y,h),c(t,b,r),i?t.persistentData=b:z.freeType(b)}else n instanceof ArrayBuffer?(t.dtype=$,t.dimension=a,c(t,n,r),i&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):A.raise("invalid buffer data")}function l(e){n.bufferCount--,o(e);var r=e.buffer;A(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete i[e.id]}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(i).forEach((function(t){e+=i[t].stats.size})),e}),{create:function(o,a,u,c){n.bufferCount++;var p=new s(a);function d(n){var o=35044,a=null,i=0,s=0,u=1;return Array.isArray(n)||e(n)||H(n)||n instanceof ArrayBuffer?a=n:"number"==typeof n?i=0|n:n&&(A.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(A(null===a||Array.isArray(a)||e(a)||H(a),"invalid data for buffer"),a=n.data),"usage"in n&&(A.parameter(n.usage,K,"invalid buffer usage"),o=K[n.usage]),"type"in n&&(A.parameter(n.type,Q,"invalid buffer type"),s=Q[n.type]),"dimension"in n&&(A.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(A.nni(i,"buffer length must be a nonnegative integer"),i=0|n.length)),p.bind(),a?f(p,a,o,s,u,c):(i&&t.bufferData(p.type,i,o),p.dtype=s||$,p.usage=o,p.dimension=u,p.byteLength=i),r.profile&&(p.stats.size=p.byteLength*te[p.dtype]),d}function h(e,n){A(n+e.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+p.byteLength),t.bufferSubData(p.type,n,e)}return i[p.id]=p,u||d(o),d._reglType="buffer",d._buffer=p,d.subdata=function(t,n){var r,o=0|(n||0);if(p.bind(),e(t)||t instanceof ArrayBuffer)h(t,o);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var a=z.allocType(p.dtype,t.length);re(a,t),h(a,o),z.freeType(a)}else if(Array.isArray(t[0])||e(t[0])){r=Z(t);var i=J(t,r,p.dtype);h(i,o),z.freeType(i)}else A.raise("invalid buffer data")}else if(H(t)){r=t.shape;var s=t.stride,u=0,c=0,f=0,l=0;1===r.length?(u=r[0],c=1,f=s[0],l=0):2===r.length?(u=r[0],c=r[1],f=s[0],l=s[1]):A.raise("invalid shape");var m=Array.isArray(t.data)?p.dtype:ne(t.data),v=z.allocType(m,u*c);oe(v,t.data,u,c,f,l,t.offset),h(v,o),z.freeType(v)}else A.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=p.stats),d.destroy=function(){l(p)},d},createStream:function(e,t){var n=u.pop();return n||(n=new s(e)),n.bind(),f(n,t,35040,0,1,!1),n},destroyStream:function(e){u.push(e)},clear:function(){G(i).forEach(l),u.forEach(l)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:function(){G(i).forEach((function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)}))},_initBuffer:f}}(o,l,r,(function(e){return T.destroyBuffer(e)})),x=function(t,n,r,o){var a={},i=0,s={uint8:ie,uint16:se};function u(e){this.id=i++,a[this.id]=this,this.buffer=e,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=ue),u.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,a,i,s,u,c,f){var l;if(o.buffer.bind(),a){var p=f;f||e(a)&&(!H(a)||e(a.data))||(p=n.oes_element_index_uint?ue:se),r._initBuffer(o.buffer,a,i,p,3)}else t.bufferData(ce,c,i),o.buffer.dtype=l||ie,o.buffer.usage=i,o.buffer.dimension=3,o.buffer.byteLength=c;if(l=f,!f){switch(o.buffer.dtype){case ie:case 5120:l=ie;break;case se:case 5122:l=se;break;case ue:case 5124:l=ue;break;default:A.raise("unsupported type for element array")}o.buffer.dtype=l}o.type=l,A(l!==ue||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=u;d<0&&(d=o.buffer.byteLength,l===se?d>>=1:l===ue&&(d>>=2)),o.vertCount=d;var h=s;if(s<0){h=4;var m=o.buffer.dimension;1===m&&(h=0),2===m&&(h=1),3===m&&(h=4)}o.primType=h}function l(e){o.elementsCount--,A(null!==e.buffer,"must not double destroy elements"),delete a[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,n){var a=r.create(null,ce,!0),i=new u(a._buffer);function c(t){if(t)if("number"==typeof t)a(t),i.primType=4,i.vertCount=0|t,i.type=ie;else{var n=null,r=35044,o=-1,u=-1,l=0,p=0;Array.isArray(t)||e(t)||H(t)?n=t:(A.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,A(Array.isArray(n)||e(n)||H(n),"invalid data for element buffer")),"usage"in t&&(A.parameter(t.usage,K,"invalid element buffer usage"),r=K[t.usage]),"primitive"in t&&(A.parameter(t.primitive,ae,"invalid element buffer primitive"),o=ae[t.primitive]),"count"in t&&(A("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),u=0|t.count),"type"in t&&(A.parameter(t.type,s,"invalid buffer type"),p=s[t.type]),"length"in t?l=0|t.length:(l=u,p===se||5122===p?l*=2:p!==ue&&5124!==p||(l*=4))),f(i,n,r,o,u,l,p)}else a(),i.primType=4,i.vertCount=0,i.type=ie;return c}return o.elementsCount++,c(t),c._reglType="elements",c._elements=i,c.subdata=function(e,t){return a.subdata(e,t),c},c.destroy=function(){l(i)},c},createStream:function(e){var t=c.pop();return t||(t=new u(r.create(null,ce,!0,!1)._buffer)),f(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){c.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof u?e._elements:null},clear:function(){G(a).forEach(l)}}}(o,p,_,l),T=function(t,n,r,o,a,i,s){for(var u=r.maxAttributes,c=new Array(u),f=0;f<u;++f)c[f]=new It;var l=0,p={},d={Record:It,scope:{},state:c,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&G(p).forEach((function(e){e.refresh()}))}:function(){},createVAO:function(t){var r=new v;function s(t){var o;if(Array.isArray(t))o=t,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{if(A("object"==typeof t,"invalid arguments for create vao"),A("attributes"in t,"must specify attributes for vao"),t.elements){var c=t.elements;r.ownsElements?"function"==typeof c&&"elements"===c._reglType?(r.elements.destroy(),r.ownsElements=!1):(r.elements(c),r.ownsElements=!1):i.getElements(t.elements)?(r.elements=t.elements,r.ownsElements=!1):(r.elements=i.create(t.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;o=t.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in t&&(r.offset=0|t.offset),"count"in t&&(r.count=0|t.count),"instances"in t&&(r.instances=0|t.instances),"primitive"in t&&(A(t.primitive in ae,"bad primitive type: "+t.primitive),r.primitive=ae[t.primitive]),A.optional((()=>{for(var e=Object.keys(t),n=0;n<e.length;++n)A(Ct.indexOf(e[n])>=0,'invalid option for vao: "'+e[n]+'" valid options are '+Ct)})),A(Array.isArray(o),"attributes must be an array")}A(o.length<u,"too many attributes"),A(o.length>0,"must specify at least one attribute");var f={},l=r.attributes;l.length=o.length;for(var p=0;p<o.length;++p){var d,h=o[p],m=l[p]=new It,v=h.data||h;Array.isArray(v)||e(v)||H(v)?(r.buffers[p]&&(d=r.buffers[p],e(v)&&d._buffer.byteLength>=v.byteLength?d.subdata(v):(d.destroy(),r.buffers[p]=null)),r.buffers[p]||(d=r.buffers[p]=a.create(h,34962,!1,!0)),m.buffer=a.getBuffer(d),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1,f[p]=1):a.getBuffer(h)?(m.buffer=a.getBuffer(h),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1):a.getBuffer(h.buffer)?(m.buffer=a.getBuffer(h.buffer),m.size=0|(+h.size||m.buffer.dimension),m.normalized=!!h.normalized||!1,"type"in h?(A.parameter(h.type,Q,"invalid buffer type"),m.type=Q[h.type]):m.type=m.buffer.dtype,m.offset=0|(h.offset||0),m.stride=0|(h.stride||0),m.divisor=0|(h.divisor||0),m.state=1,A(m.size>=1&&m.size<=4,"size must be between 1 and 4"),A(m.offset>=0,"invalid offset"),A(m.stride>=0&&m.stride<=255,"stride must be between 0 and 255"),A(m.divisor>=0,"divisor must be positive"),A(!m.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(A(p>0,"first attribute must not be a constant"),m.x=+h.x||0,m.y=+h.y||0,m.z=+h.z||0,m.w=+h.w||0,m.state=2):A(!1,"invalid attribute spec for location "+p)}for(var g=0;g<r.buffers.length;++g)!f[g]&&r.buffers[g]&&(r.buffers[g].destroy(),r.buffers[g]=null);return r.refresh(),s}return o.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1),r.destroy()},s._vao=r,s._reglType="vao",s(t)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var n=0;n<c.length;++n){var r=c[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(e){if(e!==d.currentVAO){var t=h();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),d.currentVAO=e}}:function(e){if(e!==d.currentVAO){if(e)e.bindAttrs();else{for(var n=m(),r=0;r<c.length;++r){var o=c[r];o.buffer?(t.enableVertexAttribArray(r),o.buffer.bind(),t.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(r,o.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}s.elements?t.bindBuffer(St,s.elements.buffer.buffer):t.bindBuffer(St,null)}d.currentVAO=e}},clear:h()?function(){G(p).forEach((function(e){e.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function m(){return n.angle_instanced_arrays}function v(){this.id=++l,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=h();this.vao=e?e.createVertexArrayOES():null,p[this.id]=this,this.buffers=[]}return v.prototype.bindAttrs=function(){for(var e=m(),n=this.attributes,r=0;r<n.length;++r){var o=n[r];o.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(34962,o.buffer.buffer),t.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offset),e&&o.divisor&&e.vertexAttribDivisorANGLE(r,o.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}for(var a=n.length;a<u;++a)t.disableVertexAttribArray(a);var s=i.getElements(this.elements);s?t.bindBuffer(St,s.buffer.buffer):t.bindBuffer(St,null)},v.prototype.refresh=function(){var e=h();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=null,e.bindVertexArrayOES(null))},v.prototype.destroy=function(){if(this.vao){var e=h();this===d.currentVAO&&(d.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),p[this.id]&&(delete p[this.id],o.vaoCount-=1)},d}(o,p,b,l,_,x,y),E=function(e,n,r,o){var a={},i={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function u(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function c(t,r,o){var s=35632===t?a:i,u=s[r];if(!u){var c=n.str(r);u=e.createShader(t),e.shaderSource(u,c),e.compileShader(u),A.shaderError(e,u,c,t,o),s[r]=u}return u}var f={},l=[],p=0;function d(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function h(t,r,a){var i,f,l=c(35632,t.fragId),p=c(35633,t.vertId),d=t.program=e.createProgram();if(e.attachShader(d,l),e.attachShader(d,p),a)for(i=0;i<a.length;++i){var h=a[i];e.bindAttribLocation(d,h[0],h[1])}e.linkProgram(d),A.linkError(e,d,n.str(t.fragId),n.str(t.vertId),r);var m=e.getProgramParameter(d,35718);o.profile&&(t.stats.uniformsCount=m);var v=t.uniforms;for(i=0;i<m;++i)if(f=e.getActiveUniform(d,i)){if(f.size>1)for(var g=0;g<f.size;++g){var y=f.name.replace("[0]","["+g+"]");u(v,new s(y,n.id(y),e.getUniformLocation(d,y),f))}var b=f.name;f.size>1&&(b=b.replace("[0]","")),u(v,new s(b,n.id(b),e.getUniformLocation(d,b),f))}var _=e.getProgramParameter(d,35721);o.profile&&(t.stats.attributesCount=_);var x=t.attributes;for(i=0;i<_;++i)(f=e.getActiveAttrib(d,i))&&u(x,new s(f.name,n.id(f.name),e.getAttribLocation(d,f.name),f))}return o.profile&&(r.getMaxUniformsCount=function(){var e=0;return l.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return l.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);G(a).forEach(t),a={},G(i).forEach(t),i={},l.forEach((function(t){e.deleteProgram(t.program)})),l.length=0,f={},r.shaderCount=0},program:function(n,o,s,u){A.command(n>=0,"missing vertex shader",s),A.command(o>=0,"missing fragment shader",s);var c=f[o];c||(c=f[o]={});var p=c[n];if(p&&(p.refCount++,!u))return p;var m=new d(o,n);return r.shaderCount++,h(m,s,u),p||(c[n]=m),l.push(m),t(m,{destroy:function(){if(m.refCount--,m.refCount<=0){e.deleteProgram(m.program);var t=l.indexOf(m);l.splice(t,1),r.shaderCount--}c[m.vertId].refCount<=0&&(e.deleteShader(i[m.vertId]),delete i[m.vertId],delete f[m.fragId][m.vertId]),Object.keys(f[m.fragId]).length||(e.deleteShader(a[m.fragId]),delete a[m.fragId],delete f[m.fragId])}})},restore:function(){a={},i={};for(var e=0;e<l.length;++e)h(l[e],null,l[e].attributes.map((function(e){return[e.location,e.name]})))},shader:c,frag:-1,vert:-1}}(o,f,l,r),w=pt(o,p,b,(function(){I.procs.poll()}),g,l,r),S=function(e,t,n,r,o){var a={rgba4:ht,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(a.srgba=35907),t.ext_color_buffer_half_float&&(a.rgba16f=34842,a.rgb16f=34843),t.webgl_color_buffer_float&&(a.rgba32f=34836);var i=[];Object.keys(a).forEach((function(e){var t=a[e];i[t]=e}));var s=0,u={};function c(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=ht,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function f(t){var n=t.renderbuffer;A(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(dt,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete u[t.id],r.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach((function(t){e+=u[t].stats.size})),e}),{create:function(t,s){var f=new c(e.createRenderbuffer());function l(t,r){var s=0,u=0,c=ht;if("object"==typeof t&&t){var p=t;if("shape"in p){var d=p.shape;A(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),s=0|d[0],u=0|d[1]}else"radius"in p&&(s=u=0|p.radius),"width"in p&&(s=0|p.width),"height"in p&&(u=0|p.height);"format"in p&&(A.parameter(p.format,a,"invalid renderbuffer format"),c=a[p.format])}else"number"==typeof t?(s=0|t,u="number"==typeof r?0|r:s):t?A.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(A(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==f.width||u!==f.height||c!==f.format)return l.width=f.width=s,l.height=f.height=u,f.format=c,e.bindRenderbuffer(dt,f.renderbuffer),e.renderbufferStorage(dt,c,s,u),A(0===e.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=vt(f.format,f.width,f.height)),l.format=i[f.format],l}return u[f.id]=f,r.renderbufferCount++,l(t,s),l.resize=function(t,r){var a=0|t,i=0|r||a;return a===f.width&&i===f.height||(A(a>0&&i>0&&a<=n.maxRenderbufferSize&&i<=n.maxRenderbufferSize,"invalid renderbuffer size"),l.width=f.width=a,l.height=f.height=i,e.bindRenderbuffer(dt,f.renderbuffer),e.renderbufferStorage(dt,f.format,a,i),A(0===e.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=vt(f.format,f.width,f.height))),l},l._reglType="renderbuffer",l._renderbuffer=f,o.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){G(u).forEach(f)},restore:function(){G(u).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(dt,t.renderbuffer),e.renderbufferStorage(dt,t.format,t.width,t.height)})),e.bindRenderbuffer(dt,null)}}}(o,p,b,l,r),C=function(e,n,r,o,a,i){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function l(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,o=0;t?(r=t.width,o=t.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function p(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function d(e,t,n){if(e)if(e.texture){var r=e.texture._texture,o=Math.max(1,r.width),a=Math.max(1,r.height);A(o===t&&a===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var i=e.renderbuffer._renderbuffer;A(i.width===t&&i.height===n,"inconsistent width/height for renderbuffer"),i.refCount+=1}}function h(t,n){n&&(n.texture?e.framebufferTexture2D(gt,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(gt,t,yt,n.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=bt,n=null,r=null,o=e;"object"==typeof e&&(o=e.data,"target"in e&&(t=0|e.target)),A.type(o,"function","invalid attachment data");var a=o._reglType;return"texture2d"===a?(n=o,A(t===bt)):"textureCube"===a?(n=o,A(t>=_t&&t<34075,"invalid cube map target")):"renderbuffer"===a?(r=o,t=yt):A.raise("invalid regl object for attachment"),new l(t,n,r)}function v(e,t,n,r,i){if(n){var s=o.create2D({width:e,height:t,format:r,type:i});return s._texture.refCount=0,new l(bt,s,null)}var u=a.create({width:e,height:t,format:r});return u._renderbuffer.refCount=0,new l(yt,null,u)}function g(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&f.push("half float","float16"),n.oes_texture_float&&f.push("float","float32");var b=0,_={};function x(){this.id=b++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function T(e){e.colorAttachments.forEach(p),p(e.depthAttachment),p(e.stencilAttachment),p(e.depthStencilAttachment)}function E(t){var n=t.framebuffer;A(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,i.framebufferCount--,delete _[t.id]}function w(t){var n;e.bindFramebuffer(gt,t.framebuffer);var o=t.colorAttachments;for(n=0;n<o.length;++n)h(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(gt,36064+n,bt,null,0);e.framebufferTexture2D(gt,33306,bt,null,0),e.framebufferTexture2D(gt,36096,bt,null,0),e.framebufferTexture2D(gt,36128,bt,null,0),h(36096,t.depthAttachment),h(36128,t.stencilAttachment),h(33306,t.depthStencilAttachment);var a=e.checkFramebufferStatus(gt);e.isContextLost()||36053===a||A.raise("framebuffer configuration not supported, status = "+wt[a]),e.bindFramebuffer(gt,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function S(e,o){var a=new x;function l(e,t){var o;A(s.next!==a,"can not update framebuffer which is currently in use");var i=0,p=0,h=!0,y=!0,b=null,_=!0,x="rgba",E="uint8",S=1,C=null,I=null,M=null,O=!1;if("number"==typeof e)i=0|e,p=0|t||i;else if(e){A.type(e,"object","invalid arguments for framebuffer");var R=e;if("shape"in R){var D=R.shape;A(Array.isArray(D)&&D.length>=2,"invalid shape for framebuffer"),i=D[0],p=D[1]}else"radius"in R&&(i=p=R.radius),"width"in R&&(i=R.width),"height"in R&&(p=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&A(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(S=0|R.colorCount,A(S>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,x="rgba4"),"colorType"in R&&(E=R.colorType,_?(A(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),A(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(A(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(A(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),A.oneOf(E,f,"invalid color type")),"colorFormat"in R&&(x=R.colorFormat,u.indexOf(x)>=0?_=!0:c.indexOf(x)>=0?_=!1:A.optional((function(){_?A.oneOf(R.colorFormat,u,"invalid color format for texture"):A.oneOf(R.colorFormat,c,"invalid color format for renderbuffer")})))),("depthTexture"in R||"depthStencilTexture"in R)&&(O=!(!R.depthTexture&&!R.depthStencilTexture),A(!O||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?h=R.depth:(C=R.depth,y=!1)),"stencil"in R&&("boolean"==typeof R.stencil?y=R.stencil:(I=R.stencil,h=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?h=y=R.depthStencil:(M=R.depthStencil,h=!1,y=!1))}else i=p=1;var P=null,k=null,F=null,L=null;if(Array.isArray(b))P=b.map(m);else if(b)P=[m(b)];else for(P=new Array(S),o=0;o<S;++o)P[o]=v(i,p,_,x,E);A(n.webgl_draw_buffers||P.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),A(P.length<=r.maxColorAttachments,"too many color attachments, not supported"),i=i||P[0].width,p=p||P[0].height,C?k=m(C):h&&!y&&(k=v(i,p,O,"depth","uint32")),I?F=m(I):y&&!h&&(F=v(i,p,!1,"stencil","uint8")),M?L=m(M):!C&&!I&&y&&h&&(L=v(i,p,O,"depth stencil","depth stencil")),A(!!C+!!I+!!M<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var N=null;for(o=0;o<P.length;++o)if(d(P[o],i,p),A(!P[o]||P[o].texture&&xt.indexOf(P[o].texture._texture.format)>=0||P[o].renderbuffer&&Et.indexOf(P[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),P[o]&&P[o].texture){var z=Tt[P[o].texture._texture.format]*At[P[o].texture._texture.type];null===N?N=z:A(N===z,"all color attachments much have the same number of bits per pixel.")}return d(k,i,p),A(!k||k.texture&&6402===k.texture._texture.format||k.renderbuffer&&33189===k.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),d(F,i,p),A(!F||F.renderbuffer&&36168===F.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),d(L,i,p),A(!L||L.texture&&34041===L.texture._texture.format||L.renderbuffer&&34041===L.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),T(a),a.width=i,a.height=p,a.colorAttachments=P,a.depthAttachment=k,a.stencilAttachment=F,a.depthStencilAttachment=L,l.color=P.map(g),l.depth=g(k),l.stencil=g(F),l.depthStencil=g(L),l.width=a.width,l.height=a.height,w(a),l}return i.framebufferCount++,l(e,o),t(l,{resize:function(e,t){A(s.next!==a,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===a.width&&r===a.height)return l;for(var o=a.colorAttachments,i=0;i<o.length;++i)y(o[i],n,r);return y(a.depthAttachment,n,r),y(a.stencilAttachment,n,r),y(a.depthStencilAttachment,n,r),a.width=l.width=n,a.height=l.height=r,w(a),l},_reglType:"framebuffer",_framebuffer:a,destroy:function(){E(a),T(a)},use:function(e){s.setFBO({framebuffer:l},e)}})}return t(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof x)return t}return null},create:S,createCube:function(e){var a=Array(6);function i(e){var r;A(a.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,l={color:null},p=0,d=null,h="rgba",m="uint8",v=1;if("number"==typeof e)p=0|e;else if(e){A.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var y=g.shape;A(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),A(y[0]===y[1],"cube framebuffer must be square"),p=y[0]}else"radius"in g&&(p=0|g.radius),"width"in g?(p=0|g.width,"height"in g&&A(g.height===p,"must be square")):"height"in g&&(p=0|g.height);("color"in g||"colors"in g)&&(d=g.color||g.colors,Array.isArray(d)&&A(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in g&&(v=0|g.colorCount,A(v>0,"invalid color buffer count")),"colorType"in g&&(A.oneOf(g.colorType,f,"invalid color type"),m=g.colorType),"colorFormat"in g&&(h=g.colorFormat,A.oneOf(g.colorFormat,u,"invalid color format for texture"))),"depth"in g&&(l.depth=g.depth),"stencil"in g&&(l.stencil=g.stencil),"depthStencil"in g&&(l.depthStencil=g.depthStencil)}else p=1;if(d)if(Array.isArray(d))for(c=[],r=0;r<d.length;++r)c[r]=d[r];else c=[d];else{c=Array(v);var b={radius:p,format:h,type:m};for(r=0;r<v;++r)c[r]=o.createCube(b)}for(l.color=Array(c.length),r=0;r<c.length;++r){var _=c[r];A("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),p=p||_.width,A(_.width===p&&_.height===p,"invalid cube map shape"),l.color[r]={target:_t,data:c[r]}}for(r=0;r<6;++r){for(var x=0;x<c.length;++x)l.color[x].target=_t+r;r>0&&(l.depth=a[0].depth,l.stencil=a[0].stencil,l.depthStencil=a[0].depthStencil),a[r]?a[r](l):a[r]=S(l)}return t(i,{width:p,height:p,color:c})}return i(e),t(i,{faces:a,resize:function(e){var t,n=0|e;if(A(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===i.width)return i;var o=i.color;for(t=0;t<o.length;++t)o[t].resize(n);for(t=0;t<6;++t)a[t].resize(n);return i.width=i.height=n,i},_reglType:"framebufferCube",destroy:function(){a.forEach((function(e){e.destroy()}))}})},clear:function(){G(_).forEach(E)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,G(_).forEach((function(t){t.framebuffer=e.createFramebuffer(),w(t)}))}})}(o,p,b,w,S,l),I=ur(o,f,p,b,_,x,0,C,{},T,E,y,g,d,r),D=Rt(o,C,I.procs.poll,g,a,p,b),P=I.next,F=o.canvas,L=[],N=[],X=[],q=[r.onDestroy],W=null;function Y(){if(0===L.length)return d&&d.update(),void(W=null);W=O.next(Y),be();for(var e=L.length-1;e>=0;--e){var t=L[e];t&&t(g,null,0)}o.flush(),d&&d.update()}function fe(){!W&&L.length>0&&(W=O.next(Y))}function le(){W&&(O.cancel(Y),W=null)}function pe(e){e.preventDefault(),i=!0,le(),N.forEach((function(e){e()}))}function de(e){o.getError(),i=!1,s.restore(),E.restore(),_.restore(),w.restore(),S.restore(),C.restore(),T.restore(),d&&d.restore(),I.procs.refresh(),fe(),X.forEach((function(e){e()}))}function he(e){function n(e,t){var n={},r={};return Object.keys(e).forEach((function(o){var a=e[o];if(M.isDynamic(a))r[o]=M.unbox(a,o);else{if(t&&Array.isArray(a))for(var i=0;i<a.length;++i)if(M.isDynamic(a[i]))return void(r[o]=M.unbox(a,o));n[o]=a}})),{dynamic:r,static:n}}A(!!e,"invalid args to regl({...})"),A.type(e,"object","invalid args to regl({...})");var r=n(e.context||{},!0),o=n(e.uniforms||{},!0),a=n(e.attributes||{},!1),s=n(function(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1),u={gpuTime:0,cpuTime:0,count:0},c=I.compile(s,a,o,r,u),f=c.draw,l=c.batch,p=c.scope,d=[];return t((function(e,t){var n;if(i&&A.raise("context lost"),"function"==typeof e)return p.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)p.call(this,null,t,n);else{if(!Array.isArray(e))return p.call(this,e,t,0);for(n=0;n<e.length;++n)p.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return l.call(this,function(e){for(;d.length<e;)d.push(null);return d}(0|e),0|e)}else{if(!Array.isArray(e))return f.call(this,e);if(e.length)return l.call(this,e,e.length)}}),{stats:u,destroy:function(){c.destroy()}})}F&&(F.addEventListener(fr,pe,!1),F.addEventListener(lr,de,!1));var me=C.setFBO=he({framebuffer:M.define.call(null,1,"framebuffer")});function ve(e,t){var n=0;I.procs.poll();var r=t.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(o.clearDepth(+t.depth),n|=256),"stencil"in t&&(o.clearStencil(0|t.stencil),n|=1024),A(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function ge(e){return A.type(e,"function","regl.frame() callback must be a function"),L.push(e),fe(),{cancel:function(){var t=pr(L,e);A(t>=0,"cannot cancel a frame twice"),L[t]=function e(){var t=pr(L,e);L[t]=L[L.length-1],L.length-=1,L.length<=0&&le()}}}}function ye(){var e=P.viewport,t=P.scissor_box;e[0]=e[1]=t[0]=t[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=e[2]=t[2]=o.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=e[3]=t[3]=o.drawingBufferHeight}function be(){g.tick+=1,g.time=xe(),ye(),I.procs.poll()}function _e(){w.refresh(),ye(),I.procs.refresh(),d&&d.update()}function xe(){return(R()-h)/1e3}_e();var Te=t(he,{clear:function(e){if(A("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)me(t({framebuffer:e.framebuffer.faces[n]},e),ve);else me(e,ve);else ve(0,e)},prop:M.define.bind(null,1),context:M.define.bind(null,2),this:M.define.bind(null,3),draw:he({}),buffer:function(e){return _.create(e,34962,!1,!1)},elements:function(e){return x.create(e,!1)},texture:w.create2D,cube:w.createCube,renderbuffer:S.create,framebuffer:C.create,framebufferCube:C.createCube,vao:T.createVAO,attributes:a,frame:ge,on:function(e,t){var n;switch(A.type(t,"function","listener callback must be a function"),e){case"frame":return ge(t);case"lost":n=N;break;case"restore":n=X;break;case"destroy":n=q;break;default:A.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:b,hasExtension:function(e){return b.extensions.indexOf(e.toLowerCase())>=0},read:D,destroy:function(){L.length=0,le(),F&&(F.removeEventListener(fr,pe),F.removeEventListener(lr,de)),E.clear(),C.clear(),S.clear(),T.clear(),w.clear(),x.clear(),_.clear(),d&&d.clear(),q.forEach((function(e){e()}))},_gl:o,_refresh:_e,poll:function(){be(),d&&d.update()},now:xe,stats:l});return r.onDone(null,Te),Te}}()},464:e=>{"use strict";var t,n="";e.exports=function(e,r){if("string"!=typeof e)throw new TypeError("expected a string");if(1===r)return e;if(2===r)return e+e;var o=e.length*r;if(t!==e||void 0===t)t=e,n="";else if(n.length>=o)return n.substr(0,o);for(;o>n.length&&r>1;)1&r&&(n+=e),r>>=1,e+=e;return n=(n+=e).substr(0,o)}},975:function(e,t){!function(e){var n={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function r(){var e=arguments[0],t=r.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=r.parse(e)),r.format.call(null,t[e],arguments)}function o(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}r.format=function(e,t){var a,i,s,u,c,f,l,p,d=1,h=e.length,m="",v=[],g=!0,y="";for(i=0;i<h;i++)if("string"===(m=o(e[i])))v[v.length]=e[i];else if("array"===m){if((u=e[i])[2])for(a=t[d],s=0;s<u[2].length;s++){if(!a.hasOwnProperty(u[2][s]))throw new Error(r("[sprintf] property '%s' does not exist",u[2][s]));a=a[u[2][s]]}else a=u[1]?t[u[1]]:t[d++];if("function"==o(a)&&(a=a()),n.not_string.test(u[8])&&n.not_json.test(u[8])&&"number"!=o(a)&&isNaN(a))throw new TypeError(r("[sprintf] expecting number but found %s",o(a)));switch(n.number.test(u[8])&&(g=a>=0),u[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,u[6]?parseInt(u[6]):0);break;case"e":a=u[7]?a.toExponential(u[7]):a.toExponential();break;case"f":a=u[7]?parseFloat(a).toFixed(u[7]):parseFloat(a);break;case"g":a=u[7]?parseFloat(a).toPrecision(u[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&u[7]?a.substring(0,u[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}n.json.test(u[8])?v[v.length]=a:(!n.number.test(u[8])||g&&!u[3]?y="":(y=g?"+":"-",a=a.toString().replace(n.sign,"")),f=u[4]?"0"===u[4]?"0":u[4].charAt(1):" ",l=u[6]-(y+a).length,c=u[6]&&l>0?(p=f,Array(l+1).join(p)):"",v[v.length]=u[5]?y+a+c:"0"===f?y+c+a:c+y+a)}return v.join("")},r.cache={},r.parse=function(e){for(var t=e,r=[],o=[],a=0;t;){if(null!==(r=n.text.exec(t)))o[o.length]=r[0];else if(null!==(r=n.modulo.exec(t)))o[o.length]="%";else{if(null===(r=n.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){a|=1;var i=[],s=r[2],u=[];if(null===(u=n.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i[i.length]=u[1];""!==(s=s.substring(u[0].length));)if(null!==(u=n.key_access.exec(s)))i[i.length]=u[1];else{if(null===(u=n.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i[i.length]=u[1]}r[2]=i}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o[o.length]=r}t=t.substring(r[0].length)}return o},t.sprintf=r,t.vsprintf=function(e,t,n){return(n=(t||[]).slice(0)).splice(0,0,e),r.apply(null,n)}}("undefined"==typeof window||window)},755:(e,t,n)=>{var r=n(748);e.exports=function(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:r(t,e)}}},748:e=>{e.exports=function(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}},501:(e,t,n)=>{var r=n(755);e.exports=function(){var e=r();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){return e(t).value=n,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(986),t=n.n(e),r=n(550),o=n.n(r),a=n(926),i=n.n(a);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var c,f,l,p,d,h,m,v,g,y,b,_,x,T,A,E={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},w={duration:.5,overwrite:!1,delay:0},S=1e8,C=1e-8,I=2*Math.PI,M=I/4,O=0,R=Math.sqrt,D=Math.cos,P=Math.sin,k=function(e){return"string"==typeof e},F=function(e){return"function"==typeof e},L=function(e){return"number"==typeof e},N=function(e){return void 0===e},z=function(e){return"object"==typeof e},B=function(e){return!1!==e},U=function(){return"undefined"!=typeof window},j=function(e){return F(e)||k(e)},V="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},H=Array.isArray,G=/(?:-?\.?\d|\.)+/gi,X=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,q=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,W=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Y=/[+-]=-?[.\d]+/,Q=/[^,'"\[\]\s]+/gi,K=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,J={},Z={},$=function(e){return(Z=Ie(e,J))&&Mn},ee=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},te=function(e,t){return!t&&console.warn(e)},ne=function(e,t){return e&&(J[e]=t)&&Z&&(Z[e]=t)||J},re=function(){return 0},oe={suppressEvents:!0,isStart:!0,kill:!1},ae={suppressEvents:!0,kill:!1},ie={suppressEvents:!0},se={},ue=[],ce={},fe={},le={},pe=30,de=[],he="",me=function(e){var t,n,r=e[0];if(z(r)||F(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=de.length;n--&&!de[n].targetTest(r););t=de[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Ht(e[n],t)))||e.splice(n,1);return e},ve=function(e){return e._gsap||me(it(e))[0]._gsap},ge=function(e,t,n){return(n=e[t])&&F(n)?e[t]():N(n)&&e.getAttribute&&e.getAttribute(t)||n},ye=function(e,t){return(e=e.split(",")).forEach(t)||e},be=function(e){return Math.round(1e5*e)/1e5||0},_e=function(e){return Math.round(1e7*e)/1e7||0},xe=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},Te=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Ae=function(){var e,t,n=ue.length,r=ue.slice(0);for(ce={},ue.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Ee=function(e,t,n,r){ue.length&&!f&&Ae(),e.render(t,n,r||f&&t<0&&(e._initted||e._startAt)),ue.length&&!f&&Ae()},we=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Q).length<2?t:k(e)?e.trim():e},Se=function(e){return e},Ce=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Ie=function(e,t){for(var n in t)e[n]=t[n];return e},Me=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=z(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Oe=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},Re=function(e){var t,n=e.parent||p,r=e.keyframes?(t=H(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):Ce;if(B(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},De=function(e,t,n,r,o){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,i=e[r];if(o)for(a=t[o];i&&i[o]>a;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=i,t.parent=t._dp=e,t},Pe=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o=t._prev,a=t._next;o?o._next=a:e[n]===t&&(e[n]=a),a?a._prev=o:e[r]===t&&(e[r]=o),t._next=t._prev=t.parent=null},ke=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Fe=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Le=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Ne=function(e,t,n,r){return e._startAt&&(f?e._startAt.revert(ae):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},ze=function e(t){return!t||t._ts&&e(t.parent)},Be=function(e){return e._repeat?Ue(e._tTime,e=e.duration()+e._rDelay)*e:0},Ue=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},je=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ve=function(e){return e._end=_e(e._start+(e._tDur/Math.abs(e._ts||e._rts||C)||0))},He=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=_e(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ve(e),n._dirty||Fe(n,e)),e},Ge=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=je(e.rawTime(),t),(!t._dur||nt(0,t.totalDuration(),n)-t._tTime>C)&&t.render(n,!0)),Fe(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Xe=function(e,t,n,r){return t.parent&&ke(t),t._start=_e((L(n)?n:n||e!==p?$e(e,n,t):e._time)+t._delay),t._end=_e(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),De(e,t,"_first","_last",e._sort?"_start":0),Qe(t)||(e._recent=t),r||Ge(e,t),e._ts<0&&He(e,e._tTime),e},qe=function(e,t){return(J.ScrollTrigger||ee("scrollTrigger",t))&&J.ScrollTrigger.create(t,e)},We=function(e,t,n,r,o){return Jt(e,t,o),e._initted?!n&&e._pt&&!f&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&g!==Ot.frame?(ue.push(e),e._lazy=[o,r],1):void 0:1},Ye=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Qe=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Ke=function(e,t,n,r){var o=e._repeat,a=_e(t)||0,i=e._tTime/e._tDur;return i&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=o?o<0?1e10:_e(a*(o+1)+e._rDelay*o):a,i>0&&!r&&He(e,e._tTime=e._tDur*i),e.parent&&Ve(e),n||Fe(e.parent,e),e},Je=function(e){return e instanceof Xt?Fe(e):Ke(e,e._dur)},Ze={_start:0,endTime:re,totalDuration:re},$e=function e(t,n,r){var o,a,i,s=t.labels,u=t._recent||Ze,c=t.duration()>=S?u.endTime(!1):t._dur;return k(n)&&(isNaN(n)||n in s)?(a=n.charAt(0),i="%"===n.substr(-1),o=n.indexOf("="),"<"===a||">"===a?(o>=0&&(n=n.replace(/=/,"")),("<"===a?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(i?(o<0?u:r).totalDuration()/100:1)):o<0?(n in s||(s[n]=c),s[n]):(a=parseFloat(n.charAt(o-1)+n.substr(o+1)),i&&r&&(a=a/100*(H(r)?r[0]:r).totalDuration()),o>1?e(t,n.substr(0,o-1),r)+a:c+a)):null==n?c:+n},et=function(e,t,n){var r,o,a=L(t[1]),i=(a?2:1)+(e<2?0:1),s=t[i];if(a&&(s.duration=t[1]),s.parent=n,e){for(r=s,o=n;o&&!("immediateRender"in r);)r=o.vars.defaults||{},o=B(o.vars.inherit)&&o.parent;s.immediateRender=B(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[i-1]}return new nn(t[0],s,t[i+1])},tt=function(e,t){return e||0===e?t(e):t},nt=function(e,t,n){return n<e?e:n>t?t:n},rt=function(e,t){return k(e)&&(t=K.exec(e))?t[1]:""},ot=[].slice,at=function(e,t){return e&&z(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&z(e[0]))&&!e.nodeType&&e!==d},it=function(e,t,n){return l&&!t&&l.selector?l.selector(e):!k(e)||n||!h&&Rt()?H(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return k(e)&&!t||at(e,1)?(r=n).push.apply(r,it(e)):n.push(e)}))||n}(e,n):at(e)?ot.call(e,0):e?[e]:[]:ot.call((t||m).querySelectorAll(e),0)},st=function(e){return e=it(e)[0]||te("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return it(t,n.querySelectorAll?n:n===e?te("Invalid scope")||m.createElement("div"):e)}},ut=function(e){return e.sort((function(){return.5-Math.random()}))},ct=function(e){if(F(e))return e;var t=z(e)?e:{each:e},n=zt(t.ease),r=t.from||0,o=parseFloat(t.base)||0,a={},i=r>0&&r<1,s=isNaN(r)||i,u=t.axis,c=r,f=r;return k(r)?c=f={center:.5,edges:.5,end:1}[r]||0:!i&&s&&(c=r[0],f=r[1]),function(e,i,l){var p,d,h,m,v,g,y,b,_,x=(l||t).length,T=a[x];if(!T){if(!(_="auto"===t.grid?0:(t.grid||[1,S])[1])){for(y=-S;y<(y=l[_++].getBoundingClientRect().left)&&_<x;);_--}for(T=a[x]=[],p=s?Math.min(_,x)*c-.5:r%_,d=_===S?0:s?x*f/_-.5:r/_|0,y=0,b=S,g=0;g<x;g++)h=g%_-p,m=d-(g/_|0),T[g]=v=u?Math.abs("y"===u?m:h):R(h*h+m*m),v>y&&(y=v),v<b&&(b=v);"random"===r&&ut(T),T.max=y-b,T.min=b,T.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(_>x?x-1:u?"y"===u?x/_:_:Math.max(_,x/_))||0)*("edges"===r?-1:1),T.b=x<0?o-x:o,T.u=rt(t.amount||t.each)||0,n=n&&x<0?Lt(n):n}return x=(T[e]-T.min)/T.max||0,_e(T.b+(n?n(x):x)*T.v)+T.u}},ft=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=_e(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(L(n)?0:rt(n))}},lt=function(e,t){var n,r,o=H(e);return!o&&z(e)&&(n=o=e.radius||S,e.values?(e=it(e.values),(r=!L(e[0]))&&(n*=n)):e=ft(e.increment)),tt(t,o?F(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var o,a,i=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),u=S,c=0,f=e.length;f--;)(o=r?(o=e[f].x-i)*o+(a=e[f].y-s)*a:Math.abs(e[f]-i))<u&&(u=o,c=f);return c=!n||u<=n?e[c]:t,r||c===t||L(t)?c:c+rt(t)}:ft(e))},pt=function(e,t,n,r){return tt(H(e)?!t:!0===n?!!(n=0):!r,(function(){return H(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},dt=function(e,t,n){return tt(n,(function(n){return e[~~t(n)]}))},ht=function(e){for(var t,n,r,o,a=0,i="";~(t=e.indexOf("random(",a));)r=e.indexOf(")",t),o="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(o?Q:G),i+=e.substr(a,t-a)+pt(o?n:+n[0],o?0:+n[1],+n[2]||1e-5),a=r+1;return i+e.substr(a,e.length-a)},mt=function(e,t,n,r,o){var a=t-e,i=r-n;return tt(o,(function(t){return n+((t-e)/a*i||0)}))},vt=function(e,t,n){var r,o,a,i=e.labels,s=S;for(r in i)(o=i[r]-t)<0==!!n&&o&&s>(o=Math.abs(o))&&(a=r,s=o);return a},gt=function(e,t,n){var r,o,a,i=e.vars,s=i[t],u=l,c=e._ctx;if(s)return r=i[t+"Params"],o=i.callbackScope||e,n&&ue.length&&Ae(),c&&(l=c),a=r?s.apply(o,r):s.call(o),l=u,a},yt=function(e){return ke(e),e.scrollTrigger&&e.scrollTrigger.kill(!!f),e.progress()<1&&gt(e,"onInterrupt"),e},bt=[],_t=function(e){if(U()){var t=(e=!e.name&&e.default||e).name,n=F(e),r=t&&!n&&e.init?function(){this._props=[]}:e,o={init:re,render:pn,add:Qt,kill:hn,modifier:dn,rawVars:0},a={targetTest:0,get:0,getSetter:un,aliases:{},register:0};if(Rt(),e!==r){if(fe[t])return;Ce(r,Ce(Oe(e,o),a)),Ie(r.prototype,Ie(o,Oe(e,a))),fe[r.prop=t]=r,e.targetTest&&(de.push(r),se[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ne(t,r),e.register&&e.register(Mn,r,gn)}else bt.push(e)},xt=255,Tt={aqua:[0,xt,xt],lime:[0,xt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xt],navy:[0,0,128],white:[xt,xt,xt],olive:[128,128,0],yellow:[xt,xt,0],orange:[xt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xt,0,0],pink:[xt,192,203],cyan:[0,xt,xt],transparent:[xt,xt,xt,0]},At=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*xt+.5|0},Et=function(e,t,n){var r,o,a,i,s,u,c,f,l,p,d=e?L(e)?[e>>16,e>>8&xt,e&xt]:0:Tt.black;if(!d){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Tt[e])d=Tt[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(d=parseInt(e.substr(1,6),16))>>16,d>>8&xt,d&xt,parseInt(e.substr(7),16)/255];d=[(e=parseInt(e.substr(1),16))>>16,e>>8&xt,e&xt]}else if("hsl"===e.substr(0,3))if(d=p=e.match(G),t){if(~e.indexOf("="))return d=e.match(X),n&&d.length<4&&(d[3]=1),d}else i=+d[0]%360/360,s=+d[1]/100,r=2*(u=+d[2]/100)-(o=u<=.5?u*(s+1):u+s-u*s),d.length>3&&(d[3]*=1),d[0]=At(i+1/3,r,o),d[1]=At(i,r,o),d[2]=At(i-1/3,r,o);else d=e.match(G)||Tt.transparent;d=d.map(Number)}return t&&!p&&(r=d[0]/xt,o=d[1]/xt,a=d[2]/xt,u=((c=Math.max(r,o,a))+(f=Math.min(r,o,a)))/2,c===f?i=s=0:(l=c-f,s=u>.5?l/(2-c-f):l/(c+f),i=c===r?(o-a)/l+(o<a?6:0):c===o?(a-r)/l+2:(r-o)/l+4,i*=60),d[0]=~~(i+.5),d[1]=~~(100*s+.5),d[2]=~~(100*u+.5)),n&&d.length<4&&(d[3]=1),d},wt=function(e){var t=[],n=[],r=-1;return e.split(Ct).forEach((function(e){var o=e.match(q)||[];t.push.apply(t,o),n.push(r+=o.length+1)})),t.c=n,t},St=function(e,t,n){var r,o,a,i,s="",u=(e+s).match(Ct),c=t?"hsla(":"rgba(",f=0;if(!u)return e;if(u=u.map((function(e){return(e=Et(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(a=wt(e),(r=n.c).join(s)!==a.c.join(s)))for(i=(o=e.replace(Ct,"1").split(q)).length-1;f<i;f++)s+=o[f]+(~r.indexOf(f)?u.shift()||c+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!o)for(i=(o=e.split(Ct)).length-1;f<i;f++)s+=o[f]+u[f];return s+o[i]},Ct=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Tt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),It=/hsl[a]?\(/,Mt=function(e){var t,n=e.join(" ");if(Ct.lastIndex=0,Ct.test(n))return t=It.test(n),e[1]=St(e[1],t),e[0]=St(e[0],t,wt(e[1])),!0},Ot=function(){var e,t,n,r,o,a,i=Date.now,s=500,u=33,c=i(),f=c,l=1e3/240,p=l,g=[],y=function n(d){var h,m,v,y,b=i()-f,_=!0===d;if(b>s&&(c+=b-u),((h=(v=(f+=b)-c)-p)>0||_)&&(y=++r.frame,o=v-1e3*r.time,r.time=v/=1e3,p+=h+(h>=l?4:l-h),m=1),_||(e=t(n)),m)for(a=0;a<g.length;a++)g[a](v,o,y,d)};return r={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(e){return o/(1e3/(e||60))},wake:function(){v&&(!h&&U()&&(d=h=window,m=d.document||{},J.gsap=Mn,(d.gsapVersions||(d.gsapVersions=[])).push(Mn.version),$(Z||d.GreenSockGlobals||!d.gsap&&d||{}),n=d.requestAnimationFrame,bt.forEach(_t)),e&&r.sleep(),t=n||function(e){return setTimeout(e,p-1e3*r.time+1|0)},b=1,y(2))},sleep:function(){(n?d.cancelAnimationFrame:clearTimeout)(e),b=0,t=re},lagSmoothing:function(e,t){s=e||1/0,u=Math.min(t||33,s)},fps:function(e){l=1e3/(e||240),p=1e3*r.time+l},add:function(e,t,n){var o=t?function(t,n,a,i){e(t,n,a,i),r.remove(o)}:e;return r.remove(e),g[n?"unshift":"push"](o),Rt(),o},remove:function(e,t){~(t=g.indexOf(e))&&g.splice(t,1)&&a>=t&&a--},_listeners:g}}(),Rt=function(){return!b&&Ot.wake()},Dt={},Pt=/^[\d.\-M][\d.\-,\s]/,kt=/["']/g,Ft=function(e){for(var t,n,r,o={},a=e.substr(1,e.length-3).split(":"),i=a[0],s=1,u=a.length;s<u;s++)n=a[s],t=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),o[i]=isNaN(r)?r.replace(kt,"").trim():+r,i=n.substr(t+1).trim();return o},Lt=function(e){return function(t){return 1-e(1-t)}},Nt=function e(t,n){for(var r,o=t._first;o;)o instanceof Xt?e(o,n):!o.vars.yoyoEase||o._yoyo&&o._repeat||o._yoyo===n||(o.timeline?e(o.timeline,n):(r=o._ease,o._ease=o._yEase,o._yEase=r,o._yoyo=n)),o=o._next},zt=function(e,t){return e&&(F(e)?e:Dt[e]||function(e){var t,n,r,o,a=(e+"").split("("),i=Dt[a[0]];return i&&a.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Ft(a[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),o=t.indexOf("(",n),t.substring(n,~o&&o<r?t.indexOf(")",r+1):r)).split(",").map(we)):Dt._CE&&Pt.test(e)?Dt._CE("",e):i}(e))||t},Bt=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var o,a={easeIn:t,easeOut:n,easeInOut:r};return ye(e,(function(e){for(var t in Dt[e]=J[e]=a,Dt[o=e.toLowerCase()]=n,a)Dt[o+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Dt[e+"."+t]=a[t]})),a},Ut=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},jt=function e(t,n,r){var o=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),i=a/I*(Math.asin(1/o)||0),s=function(e){return 1===e?1:o*Math.pow(2,-10*e)*P((e-i)*a)+1},u="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Ut(s);return a=I/a,u.config=function(n,r){return e(t,n,r)},u},Vt=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},o="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Ut(r);return o.config=function(n){return e(t,n)},o};ye("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Bt(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Dt.Linear.easeNone=Dt.none=Dt.Linear.easeIn,Bt("Elastic",jt("in"),jt("out"),jt()),_=7.5625,T=1/(x=2.75),Bt("Bounce",(function(e){return 1-A(1-e)}),A=function(e){return e<T?_*e*e:e<.7272727272727273?_*Math.pow(e-1.5/x,2)+.75:e<.9090909090909092?_*(e-=2.25/x)*e+.9375:_*Math.pow(e-2.625/x,2)+.984375}),Bt("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Bt("Circ",(function(e){return-(R(1-e*e)-1)})),Bt("Sine",(function(e){return 1===e?1:1-D(e*M)})),Bt("Back",Vt("in"),Vt("out"),Vt()),Dt.SteppedEase=Dt.steps=J.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),o=t?1:0;return function(e){return((r*nt(0,.99999999,e)|0)+o)*n}}},w.ease=Dt["quad.out"],ye("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return he+=e+","+e+"Params,"}));var Ht=function(e,t){this.id=O++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ge,this.set=t?t.getSetter:un},Gt=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Ke(this,+e.duration,1,1),this.data=e.data,l&&(this._ctx=l,l.data.push(this)),b||Ot.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Ke(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Rt(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(He(this,e),!n._dp||n.parent||Ge(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Xe(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===C||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Ee(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Be(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Be(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Ue(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?je(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(nt(-Math.abs(this._delay),this._tDur,t),!0),Ve(this),Le(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==C&&(this._tTime-=C)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Xe(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(B(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?je(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=ie);var t=f;return f=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),f=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Je(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Je(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime($e(this,e),B(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,B(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-C))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=F(e)?e:Se,o=function(){var e=t.then;t.then=null,F(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?o():t._prom=o}))},t.kill=function(){yt(this)},e}();Ce(Gt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Xt=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=B(t.sortChildren),p&&Xe(t.parent||p,s(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&qe(s(r),t.scrollTrigger),r}u(t,e);var n=t.prototype;return n.to=function(e,t,n){return et(0,arguments,this),this},n.from=function(e,t,n){return et(1,arguments,this),this},n.fromTo=function(e,t,n,r){return et(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,Re(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new nn(e,t,$e(this,n),1),this},n.call=function(e,t,n){return Xe(this,nn.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,o,a,i){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=a,n.onCompleteParams=i,n.parent=this,new nn(e,n,$e(this,o)),this},n.staggerFrom=function(e,t,n,r,o,a,i){return n.runBackwards=1,Re(n).immediateRender=B(n.immediateRender),this.staggerTo(e,t,n,r,o,a,i)},n.staggerFromTo=function(e,t,n,r,o,a,i,s){return r.startAt=n,Re(r).immediateRender=B(r.immediateRender),this.staggerTo(e,t,r,o,a,i,s)},n.render=function(e,t,n){var r,o,a,i,s,u,c,l,d,h,m,v,g=this._time,y=this._dirty?this.totalDuration():this._tDur,b=this._dur,_=e<=0?0:_e(e),x=this._zTime<0!=e<0&&(this._initted||!b);if(this!==p&&_>y&&e>=0&&(_=y),_!==this._tTime||n||x){if(g!==this._time&&b&&(_+=this._time-g,e+=this._time-g),r=_,d=this._start,u=!(l=this._ts),x&&(b||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(m=this._yoyo,s=b+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,n);if(r=_e(_%s),_===y?(i=this._repeat,r=b):((i=~~(_/s))&&i===_/s&&(r=b,i--),r>b&&(r=b)),h=Ue(this._tTime,s),!g&&this._tTime&&h!==i&&this._tTime-h*s-this._dur<=0&&(h=i),m&&1&i&&(r=b-r,v=1),i!==h&&!this._lock){var T=m&&1&h,A=T===(m&&1&i);if(i<h&&(T=!T),g=T?0:b,this._lock=1,this.render(g||(v?0:_e(i*s)),t,!b)._lock=0,this._tTime=_,!t&&this.parent&&gt(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),g&&g!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(b=this._dur,y=this._tDur,A&&(this._lock=2,g=T?b:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Nt(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,_e(g),_e(r)),c&&(_-=r-(r=c._start))),this._tTime=_,this._time=r,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&r&&!t&&!i&&(gt(this,"onStart"),this._tTime!==_))return this;if(r>=g&&e>=0)for(o=this._first;o;){if(a=o._next,(o._act||r>=o._start)&&o._ts&&c!==o){if(o.parent!==this)return this.render(e,t,n);if(o.render(o._ts>0?(r-o._start)*o._ts:(o._dirty?o.totalDuration():o._tDur)+(r-o._start)*o._ts,t,n),r!==this._time||!this._ts&&!u){c=0,a&&(_+=this._zTime=-1e-8);break}}o=a}else{o=this._last;for(var E=e<0?e:r;o;){if(a=o._prev,(o._act||E<=o._end)&&o._ts&&c!==o){if(o.parent!==this)return this.render(e,t,n);if(o.render(o._ts>0?(E-o._start)*o._ts:(o._dirty?o.totalDuration():o._tDur)+(E-o._start)*o._ts,t,n||f&&(o._initted||o._startAt)),r!==this._time||!this._ts&&!u){c=0,a&&(_+=this._zTime=E?-1e-8:C);break}}o=a}}if(c&&!t&&(this.pause(),c.render(r>=g?0:-1e-8)._zTime=r>=g?1:-1,this._ts))return this._start=d,Ve(this),this.render(e,t,n);this._onUpdate&&!t&&gt(this,"onUpdate",!0),(_===y&&this._tTime>=this.totalDuration()||!_&&g)&&(d!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||((e||!b)&&(_===y&&this._ts>0||!_&&this._ts<0)&&ke(this,1),t||e<0&&!g||!_&&!g&&y||(gt(this,_===y&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(L(t)||(t=$e(this,t,e)),!(e instanceof Gt)){if(H(e))return e.forEach((function(e){return n.add(e,t)})),this;if(k(e))return this.addLabel(e,t);if(!F(e))return this;e=nn.delayedCall(0,e)}return this!==e?Xe(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-S);for(var o=[],a=this._first;a;)a._start>=r&&(a instanceof nn?t&&o.push(a):(n&&o.push(a),e&&o.push.apply(o,a.getChildren(!0,t,n)))),a=a._next;return o},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return k(e)?this.removeLabel(e):F(e)?this.killTweensOf(e):(Pe(this,e),e===this._recent&&(this._recent=this._last),Fe(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_e(Ot.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=$e(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=nn.delayedCall(0,t||re,n);return r.data="isPause",this._hasPause=1,Xe(this,r,$e(this,e))},n.removePause=function(e){var t=this._first;for(e=$e(this,e);t;)t._start===e&&"isPause"===t.data&&ke(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),o=r.length;o--;)qt!==r[o]&&r[o].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],o=it(e),a=this._first,i=L(t);a;)a instanceof nn?Te(a._targets,o)&&(i?(!qt||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&r.push(a):(n=a.getTweensOf(o,t)).length&&r.push.apply(r,n),a=a._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,o=$e(r,e),a=t,i=a.startAt,s=a.onStart,u=a.onStartParams,c=a.immediateRender,f=nn.to(r,Ce({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:t.duration||Math.abs((o-(i&&"time"in i?i.time:r._time))/r.timeScale())||C,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((o-(i&&"time"in i?i.time:r._time))/r.timeScale());f._dur!==e&&Ke(f,e,0,1).render(f._time,!0,!0),n=1}s&&s.apply(f,u||[])}},t));return c?f.render(0):f},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,Ce({startAt:{time:$e(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),vt(this,$e(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),vt(this,$e(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+C)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,o=this._first,a=this.labels;o;)o._start>=n&&(o._start+=e,o._end+=e),o=o._next;if(t)for(r in a)a[r]>=n&&(a[r]+=e);return Fe(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Fe(this)},n.totalDuration=function(e){var t,n,r,o=0,a=this,i=a._last,s=S;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-e:e));if(a._dirty){for(r=a.parent;i;)t=i._prev,i._dirty&&i.totalDuration(),(n=i._start)>s&&a._sort&&i._ts&&!a._lock?(a._lock=1,Xe(a,i,n-i._delay,1)._lock=0):s=n,n<0&&i._ts&&(o-=n,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-Infinity),s=0),i._end>o&&i._ts&&(o=i._end),i=t;Ke(a,a===p&&a._time>o?a._time:o,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(e){if(p._ts&&(Ee(p,je(e,p)),g=Ot.frame),Ot.frame>=pe){pe+=E.autoSleep||120;var t=p._first;if((!t||!t._ts)&&E.autoSleep&&Ot._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Ot.sleep()}}},t}(Gt);Ce(Xt.prototype,{_lock:0,_hasPause:0,_forcing:0});var qt,Wt,Yt=function(e,t,n,r,o,a,i){var s,u,c,f,l,p,d,h,m=new gn(this._pt,e,t,0,1,ln,null,o),v=0,g=0;for(m.b=n,m.e=r,n+="",(d=~(r+="").indexOf("random("))&&(r=ht(r)),a&&(a(h=[n,r],e,t),n=h[0],r=h[1]),u=n.match(W)||[];s=W.exec(r);)f=s[0],l=r.substring(v,s.index),c?c=(c+1)%5:"rgba("===l.substr(-5)&&(c=1),f!==u[g++]&&(p=parseFloat(u[g-1])||0,m._pt={_next:m._pt,p:l||1===g?l:",",s:p,c:"="===f.charAt(1)?xe(p,f)-p:parseFloat(f)-p,m:c&&c<4?Math.round:0},v=W.lastIndex);return m.c=v<r.length?r.substring(v,r.length):"",m.fp=i,(Y.test(r)||d)&&(m.e=0),this._pt=m,m},Qt=function(e,t,n,r,o,a,i,s,u,c){F(r)&&(r=r(o||0,e,a));var f,l=e[t],p="get"!==n?n:F(l)?u?e[t.indexOf("set")||!F(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():l,d=F(l)?u?an:on:rn;if(k(r)&&(~r.indexOf("random(")&&(r=ht(r)),"="===r.charAt(1)&&((f=xe(p,r)+(rt(p)||0))||0===f)&&(r=f)),!c||p!==r||Wt)return isNaN(p*r)||""===r?(!l&&!(t in e)&&ee(t,r),Yt.call(this,e,t,p,r,d,s||E.stringFilter,u)):(f=new gn(this._pt,e,t,+p||0,r-(p||0),"boolean"==typeof l?fn:cn,0,d),u&&(f.fp=u),i&&f.modifier(i,this,e),this._pt=f)},Kt=function(e,t,n,r,o,a){var i,s,u,c;if(fe[e]&&!1!==(i=new fe[e]).init(o,i.rawVars?t[e]:function(e,t,n,r,o){if(F(e)&&(e=$t(e,o,t,n,r)),!z(e)||e.style&&e.nodeType||H(e)||V(e))return k(e)?$t(e,o,t,n,r):e;var a,i={};for(a in e)i[a]=$t(e[a],o,t,n,r);return i}(t[e],r,o,a,n),n,r,a)&&(n._pt=s=new gn(n._pt,o,e,0,1,i.render,i,0,i.priority),n!==y))for(u=n._ptLookup[n._targets.indexOf(o)],c=i._props.length;c--;)u[i._props[c]]=s;return i},Jt=function e(t,n,r){var o,a,i,s,u,l,d,h,m,v,g,y,b,_=t.vars,x=_.ease,T=_.startAt,A=_.immediateRender,E=_.lazy,I=_.onUpdate,M=_.onUpdateParams,O=_.callbackScope,R=_.runBackwards,D=_.yoyoEase,P=_.keyframes,k=_.autoRevert,F=t._dur,L=t._startAt,N=t._targets,z=t.parent,U=z&&"nested"===z.data?z.vars.targets:N,j="auto"===t._overwrite&&!c,V=t.timeline;if(V&&(!P||!x)&&(x="none"),t._ease=zt(x,w.ease),t._yEase=D?Lt(zt(!0===D?x:D,w.ease)):0,D&&t._yoyo&&!t._repeat&&(D=t._yEase,t._yEase=t._ease,t._ease=D),t._from=!V&&!!_.runBackwards,!V||P&&!_.stagger){if(y=(h=N[0]?ve(N[0]).harness:0)&&_[h.prop],o=Oe(_,se),L&&(L._zTime<0&&L.progress(1),n<0&&R&&A&&!k?L.render(-1,!0):L.revert(R&&F?ae:oe),L._lazy=0),T){if(ke(t._startAt=nn.set(N,Ce({data:"isStart",overwrite:!1,parent:z,immediateRender:!0,lazy:!L&&B(E),startAt:null,delay:0,onUpdate:I,onUpdateParams:M,callbackScope:O,stagger:0},T))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(f||!A&&!k)&&t._startAt.revert(ae),A&&F&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(R&&F&&!L)if(n&&(A=!1),i=Ce({overwrite:!1,data:"isFromStart",lazy:A&&!L&&B(E),immediateRender:A,stagger:0,parent:z},o),y&&(i[h.prop]=y),ke(t._startAt=nn.set(N,i)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(f?t._startAt.revert(ae):t._startAt.render(-1,!0)),t._zTime=n,A){if(!n)return}else e(t._startAt,C,C);for(t._pt=t._ptCache=0,E=F&&B(E)||E&&!F,a=0;a<N.length;a++){if(d=(u=N[a])._gsap||me(N)[a]._gsap,t._ptLookup[a]=v={},ce[d.id]&&ue.length&&Ae(),g=U===N?a:U.indexOf(u),h&&!1!==(m=new h).init(u,y||o,t,g,U)&&(t._pt=s=new gn(t._pt,u,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(e){v[e]=s})),m.priority&&(l=1)),!h||y)for(i in o)fe[i]&&(m=Kt(i,o,t,g,u,U))?m.priority&&(l=1):v[i]=s=Qt.call(t,u,i,"get",o[i],g,U,0,_.stringFilter);t._op&&t._op[a]&&t.kill(u,t._op[a]),j&&t._pt&&(qt=t,p.killTweensOf(u,v,t.globalTime(n)),b=!t.parent,qt=0),t._pt&&E&&(ce[d.id]=1)}l&&vn(t),t._onInit&&t._onInit(t)}t._onUpdate=I,t._initted=(!t._op||t._pt)&&!b,P&&n<=0&&V.render(S,!0,!0)},Zt=function(e,t,n,r){var o,a,i=t.ease||r||"power1.inOut";if(H(t))a=n[e]||(n[e]=[]),t.forEach((function(e,n){return a.push({t:n/(t.length-1)*100,v:e,e:i})}));else for(o in t)a=n[o]||(n[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:i})},$t=function(e,t,n,r,o){return F(e)?e.call(t,n,r,o):k(e)&&~e.indexOf("random(")?ht(e):e},en=he+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",tn={};ye(en+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return tn[e]=1}));var nn=function(e){function t(t,n,r,o){var a;"number"==typeof n&&(r.duration=n,n=r,r=null);var i,u,f,l,d,h,m,v,g=(a=e.call(this,o?n:Re(n))||this).vars,y=g.duration,b=g.delay,_=g.immediateRender,x=g.stagger,T=g.overwrite,A=g.keyframes,w=g.defaults,S=g.scrollTrigger,C=g.yoyoEase,I=n.parent||p,M=(H(t)||V(t)?L(t[0]):"length"in n)?[t]:it(t);if(a._targets=M.length?me(M):te("GSAP target "+t+" not found. https://greensock.com",!E.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=T,A||x||j(y)||j(b)){if(n=a.vars,(i=a.timeline=new Xt({data:"nested",defaults:w||{},targets:I&&"nested"===I.data?I.vars.targets:M})).kill(),i.parent=i._dp=s(a),i._start=0,x||j(y)||j(b)){if(l=M.length,m=x&&ct(x),z(x))for(d in x)~en.indexOf(d)&&(v||(v={}),v[d]=x[d]);for(u=0;u<l;u++)(f=Oe(n,tn)).stagger=0,C&&(f.yoyoEase=C),v&&Ie(f,v),h=M[u],f.duration=+$t(y,s(a),u,h,M),f.delay=(+$t(b,s(a),u,h,M)||0)-a._delay,!x&&1===l&&f.delay&&(a._delay=b=f.delay,a._start+=b,f.delay=0),i.to(h,f,m?m(u,h,M):0),i._ease=Dt.none;i.duration()?y=b=0:a.timeline=0}else if(A){Re(Ce(i.vars.defaults,{ease:"none"})),i._ease=zt(A.ease||n.ease||"none");var O,R,D,P=0;if(H(A))A.forEach((function(e){return i.to(M,e,">")})),i.duration();else{for(d in f={},A)"ease"===d||"easeEach"===d||Zt(d,A[d],f,A.easeEach);for(d in f)for(O=f[d].sort((function(e,t){return e.t-t.t})),P=0,u=0;u<O.length;u++)(D={ease:(R=O[u]).e,duration:(R.t-(u?O[u-1].t:0))/100*y})[d]=R.v,i.to(M,D,P),P+=D.duration;i.duration()<y&&i.to({},{duration:y-i.duration()})}}y||a.duration(y=i.duration())}else a.timeline=0;return!0!==T||c||(qt=s(a),p.killTweensOf(M),qt=0),Xe(I,s(a),r),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(_||!y&&!A&&a._start===_e(I._time)&&B(_)&&ze(s(a))&&"nested"!==I.data)&&(a._tTime=-1e-8,a.render(Math.max(0,-b)||0)),S&&qe(s(a),S),a}u(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,o,a,i,s,u,c,l,p,d=this._time,h=this._tDur,m=this._dur,v=e<0,g=e>h-C&&!v?h:e<C?0:e;if(m){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==v){if(r=g,l=this.timeline,this._repeat){if(i=m+this._rDelay,this._repeat<-1&&v)return this.totalTime(100*i+e,t,n);if(r=_e(g%i),g===h?(a=this._repeat,r=m):((a=~~(g/i))&&a===g/i&&(r=m,a--),r>m&&(r=m)),(u=this._yoyo&&1&a)&&(p=this._yEase,r=m-r),s=Ue(this._tTime,i),r===d&&!n&&this._initted)return this._tTime=g,this;a!==s&&(l&&this._yEase&&Nt(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(_e(i*a),!0).invalidate()._lock=0))}if(!this._initted){if(We(this,v?e:r,n,t,g))return this._tTime=0,this;if(d!==this._time)return this;if(m!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(p||this._ease)(r/m),this._from&&(this.ratio=c=1-c),r&&!d&&!t&&!a&&(gt(this,"onStart"),this._tTime!==g))return this;for(o=this._pt;o;)o.r(c,o.d),o=o._next;l&&l.render(e<0?e:!r&&u?-1e-8:l._dur*l._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(v&&Ne(this,e,0,n),gt(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!t&&this.parent&&gt(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(v&&!this._onUpdate&&Ne(this,e,0,!0),(e||!m)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&ke(this,1),t||v&&!d||!(g||d||u)||(gt(this,g===h?"onComplete":"onReverseComplete",!0),this._prom&&!(g<h&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var o,a,i,s=e.ratio,u=t<0||!t&&(!e._start&&Ye(e)&&(e._initted||!Qe(e))||(e._ts<0||e._dp._ts<0)&&!Qe(e))?0:1,c=e._rDelay,l=0;if(c&&e._repeat&&(l=nt(0,e._tDur,t),a=Ue(l,c),e._yoyo&&1&a&&(u=1-u),a!==Ue(e._tTime,c)&&(s=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==s||f||r||e._zTime===C||!t&&e._zTime){if(!e._initted&&We(e,t,r,n,l))return;for(i=e._zTime,e._zTime=t||(n?C:0),n||(n=t&&!i),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=l,o=e._pt;o;)o.r(u,o.d),o=o._next;t<0&&Ne(e,t,0,!0),e._onUpdate&&!n&&gt(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&gt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&ke(e,1),n||f||(gt(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r){b||Ot.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Jt(this,o),function(e,t,n,r,o,a,i){var s,u,c,f,l=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!l)for(l=e._ptCache[t]=[],c=e._ptLookup,f=e._targets.length;f--;){if((s=c[f][t])&&s.d&&s.d._pt)for(s=s.d._pt;s&&s.p!==t&&s.fp!==t;)s=s._next;if(!s)return Wt=1,e.vars[t]="+=0",Jt(e,i),Wt=0,1;l.push(s)}for(f=l.length;f--;)(s=(u=l[f])._pt||u).s=!r&&0!==r||o?s.s+(r||0)+a*s.c:r,s.c=n-s.s,u.e&&(u.e=be(n)+rt(u.e)),u.b&&(u.b=s.s+rt(u.b))}(this,e,t,n,r,this._ease(o/this._dur),o)?this.resetTo(e,t,n,r):(He(this,0),this.parent||De(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?yt(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,qt&&!0!==qt.vars.overwrite)._first||yt(this),this.parent&&n!==this.timeline.totalDuration()&&Ke(this,this._dur*this.timeline._tDur/n,0,1),this}var r,o,a,i,s,u,c,f=this._targets,l=e?it(e):f,p=this._ptLookup,d=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(f,l))return"all"===t&&(this._pt=0),yt(this);for(r=this._op=this._op||[],"all"!==t&&(k(t)&&(s={},ye(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,o,a,i=e[0]?ve(e[0]).harness:0,s=i&&i.aliases;if(!s)return t;for(r in n=Ie({},t),s)if(r in n)for(o=(a=s[r].split(",")).length;o--;)n[a[o]]=n[r];return n}(f,t)),c=f.length;c--;)if(~l.indexOf(f[c]))for(s in o=p[c],"all"===t?(r[c]=t,i=o,a={}):(a=r[c]=r[c]||{},i=t),i)(u=o&&o[s])&&("kill"in u.d&&!0!==u.d.kill(s)||Pe(this,u,"_pt"),delete o[s]),"all"!==a&&(a[s]=1);return this._initted&&!this._pt&&d&&yt(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return et(1,arguments)},t.delayedCall=function(e,n,r,o){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:o})},t.fromTo=function(e,t,n){return et(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return p.killTweensOf(e,t,n)},t}(Gt);Ce(nn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ye("staggerTo,staggerFrom,staggerFromTo",(function(e){nn[e]=function(){var t=new Xt,n=ot.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var rn=function(e,t,n){return e[t]=n},on=function(e,t,n){return e[t](n)},an=function(e,t,n,r){return e[t](r.fp,n)},sn=function(e,t,n){return e.setAttribute(t,n)},un=function(e,t){return F(e[t])?on:N(e[t])&&e.setAttribute?sn:rn},cn=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},fn=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ln=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},pn=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},dn=function(e,t,n,r){for(var o,a=this._pt;a;)o=a._next,a.p===r&&a.modifier(e,t,n),a=o},hn=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?Pe(this,r,"_pt"):r.dep||(t=1),r=n;return!t},mn=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},vn=function(e){for(var t,n,r,o,a=e._pt;a;){for(t=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:o)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:o=a,a=t}e._pt=r},gn=function(){function e(e,t,n,r,o,a,i,s,u){this.t=t,this.s=r,this.c=o,this.p=n,this.r=a||cn,this.d=i||this,this.set=s||rn,this.pr=u||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=mn,this.m=e,this.mt=n,this.tween=t},e}();ye(he+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return se[e]=1})),J.TweenMax=J.TweenLite=nn,J.TimelineLite=J.TimelineMax=Xt,p=new Xt({sortChildren:!1,defaults:w,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),E.stringFilter=Mt;var yn=[],bn={},_n=[],xn=0,Tn=function(e){return(bn[e]||_n).map((function(e){return e()}))},An=function(){var e=Date.now(),t=[];e-xn>2&&(Tn("matchMediaInit"),yn.forEach((function(e){var n,r,o,a,i=e.queries,s=e.conditions;for(r in i)(n=d.matchMedia(i[r]).matches)&&(o=1),n!==s[r]&&(s[r]=n,a=1);a&&(e.revert(),o&&t.push(e))})),Tn("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e)})),xn=e,Tn("matchMedia"))},En=function(){function e(e,t){this.selector=t&&st(t),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){F(e)&&(n=t,t=e,e=F);var r=this,o=function(){var e,o=l,a=r.selector;return o&&o!==r&&o.data.push(r),n&&(r.selector=st(n)),l=r,e=t.apply(r,arguments),F(e)&&r._r.push(e),l=o,r.selector=a,r.isReverted=!1,e};return r.last=o,e===F?o(r):e?r[e]=o:o},t.ignore=function(e){var t=l;l=null,e(this),l=t},t.getTweens=function(){var t=[];return this.data.forEach((function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof nn&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e){var r=this.getTweens();this.data.forEach((function(e){"isFlip"===e.data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(e){return r.splice(r.indexOf(e),1)})))})),r.map((function(e){return{g:e.globalTime(0),t:e}})).sort((function(e,t){return t.g-e.g||-1})).forEach((function(t){return t.t.revert(e)})),this.data.forEach((function(t){return!(t instanceof Gt)&&t.revert&&t.revert(e)})),this._r.forEach((function(t){return t(e,n)})),this.isReverted=!0}else this.data.forEach((function(e){return e.kill&&e.kill()}));if(this.clear(),t){var o=yn.indexOf(this);~o&&yn.splice(o,1)}},t.revert=function(e){this.kill(e||{})},e}(),wn=function(){function e(e){this.contexts=[],this.scope=e}var t=e.prototype;return t.add=function(e,t,n){z(e)||(e={matches:e});var r,o,a,i=new En(0,n||this.scope),s=i.conditions={};for(o in this.contexts.push(i),t=i.add("onMatch",t),i.queries=e,e)"all"===o?a=1:(r=d.matchMedia(e[o]))&&(yn.indexOf(i)<0&&yn.push(i),(s[o]=r.matches)&&(a=1),r.addListener?r.addListener(An):r.addEventListener("change",An));return a&&t(i),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),Sn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return _t(e)}))},timeline:function(e){return new Xt(e)},getTweensOf:function(e,t){return p.getTweensOf(e,t)},getProperty:function(e,t,n,r){k(e)&&(e=it(e)[0]);var o=ve(e||{}).get,a=n?Se:we;return"native"===n&&(n=""),e?t?a((fe[t]&&fe[t].get||o)(e,t,n,r)):function(t,n,r){return a((fe[t]&&fe[t].get||o)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=it(e)).length>1){var r=e.map((function(e){return Mn.quickSetter(e,t,n)})),o=r.length;return function(e){for(var t=o;t--;)r[t](e)}}e=e[0]||{};var a=fe[t],i=ve(e),s=i.harness&&(i.harness.aliases||{})[t]||t,u=a?function(t){var r=new a;y._pt=0,r.init(e,n?t+n:t,y,0,[e]),r.render(1,r),y._pt&&pn(1,y)}:i.set(e,s);return a?u:function(t){return u(e,s,n?t+n:t,i,1)}},quickTo:function(e,t,n){var r,o=Mn.to(e,Ie(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),a=function(e,n,r){return o.resetTo(t,e,n,r)};return a.tween=o,a},isTweening:function(e){return p.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=zt(e.ease,w.ease)),Me(w,e||{})},config:function(e){return Me(E,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,o=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!fe[e]&&!J[e]&&te(t+" effect requires "+e+" plugin.")})),le[t]=function(e,t,r){return n(it(e),Ce(t||{},o),r)},a&&(Xt.prototype[t]=function(e,n,r){return this.add(le[t](e,z(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Dt[e]=zt(t)},parseEase:function(e,t){return arguments.length?zt(e,t):Dt},getById:function(e){return p.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,o=new Xt(e);for(o.smoothChildTiming=B(e.smoothChildTiming),p.remove(o),o._dp=0,o._time=o._tTime=p._time,n=p._first;n;)r=n._next,!t&&!n._dur&&n instanceof nn&&n.vars.onComplete===n._targets[0]||Xe(o,n,n._start-n._delay),n=r;return Xe(p,o,0),o},context:function(e,t){return e?new En(e,t):l},matchMedia:function(e){return new wn(e)},matchMediaRefresh:function(){return yn.forEach((function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()}))||An()},addEventListener:function(e,t){var n=bn[e]||(bn[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=bn[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var o=n-t;return H(t)?dt(t,e(0,t.length),n):tt(r,(function(e){return(o+(e-t)%o)%o+t}))},wrapYoyo:function e(t,n,r){var o=n-t,a=2*o;return H(t)?dt(t,e(0,t.length-1),n):tt(r,(function(e){return t+((e=(a+(e-t)%a)%a||0)>o?a-e:e)}))},distribute:ct,random:pt,snap:lt,normalize:function(e,t,n){return mt(e,t,0,1,n)},getUnit:rt,clamp:function(e,t,n){return tt(n,(function(n){return nt(e,t,n)}))},splitColor:Et,toArray:it,selector:st,mapRange:mt,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||rt(n))}},interpolate:function e(t,n,r,o){var a=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!a){var i,s,u,c,f,l=k(t),p={};if(!0===r&&(o=1)&&(r=null),l)t={p:t},n={p:n};else if(H(t)&&!H(n)){for(u=[],c=t.length,f=c-2,s=1;s<c;s++)u.push(e(t[s-1],t[s]));c--,a=function(e){e*=c;var t=Math.min(f,~~e);return u[t](e-t)},r=n}else o||(t=Ie(H(t)?[]:{},t));if(!u){for(i in n)Qt.call(p,t,i,"get",n[i]);a=function(e){return pn(e,p)||(l?t.p:t)}}}return tt(r,a)},shuffle:ut},install:$,effects:le,ticker:Ot,updateRoot:Xt.updateRoot,plugins:fe,globalTimeline:p,core:{PropTween:gn,globals:ne,Tween:nn,Timeline:Xt,Animation:Gt,getCache:ve,_removeLinkedListItem:Pe,reverting:function(){return f},context:function(e){return e&&l&&(l.data.push(e),e._ctx=l),l},suppressOverwrites:function(e){return c=e}}};ye("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Sn[e]=nn[e]})),Ot.add(Xt.updateRoot),y=Sn.to({},{duration:0});var Cn=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},In=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,o;if(k(n)&&(r={},ye(n,(function(e){return r[e]=1})),n=r),t){for(o in r={},n)r[o]=t(n[o]);n=r}!function(e,t){var n,r,o,a=e._targets;for(n in t)for(r=a.length;r--;)(o=e._ptLookup[r][n])&&(o=o.d)&&(o._pt&&(o=Cn(o,n)),o&&o.modifier&&o.modifier(t[n],e,a[r],n))}(e,n)}}}},Mn=Sn.registerPlugin({name:"attr",init:function(e,t,n,r,o){var a,i,s;for(a in this.tween=n,t)s=e.getAttribute(a)||"",(i=this.add(e,"setAttribute",(s||0)+"",t[a],r,o,0,0,a)).op=a,i.b=s,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)f?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},In("roundProps",ft),In("modifiers"),In("snap",lt))||Sn;nn.version=Xt.version=Mn.version="3.11.5",v=1,U()&&Rt(),Dt.Power0,Dt.Power1,Dt.Power2,Dt.Power3,Dt.Power4,Dt.Linear,Dt.Quad,Dt.Cubic,Dt.Quart,Dt.Quint,Dt.Strong,Dt.Elastic,Dt.Back,Dt.SteppedEase,Dt.Bounce,Dt.Sine,Dt.Expo,Dt.Circ;var On,Rn,Dn,Pn,kn,Fn,Ln,Nn,zn={},Bn=180/Math.PI,Un=Math.PI/180,jn=Math.atan2,Vn=/([A-Z])/g,Hn=/(left|right|width|margin|padding|x)/i,Gn=/[\s,\(]\S/,Xn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},qn=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Wn=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Yn=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Qn=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Kn=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Jn=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Zn=function(e,t,n){return e.style[t]=n},$n=function(e,t,n){return e.style.setProperty(t,n)},er=function(e,t,n){return e._gsap[t]=n},tr=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},nr=function(e,t,n,r,o){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(o,a)},rr=function(e,t,n,r,o){var a=e._gsap;a[t]=n,a.renderTransform(o,a)},or="transform",ar=or+"Origin",ir=function e(t,n){var r=this,o=this.target,a=o.style;if(t in zn){if(this.tfm=this.tfm||{},"transform"===t)return Xn.transform.split(",").forEach((function(t){return e.call(r,t,n)}));if(~(t=Xn[t]||t).indexOf(",")?t.split(",").forEach((function(e){return r.tfm[e]=Er(o,e)})):this.tfm[t]=o._gsap.x?o._gsap[t]:Er(o,t),this.props.indexOf(or)>=0)return;o._gsap.svg&&(this.svgo=o.getAttribute("data-svg-origin"),this.props.push(ar,n,"")),t=or}(a||n)&&this.props.push(t,n,a[t])},sr=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},ur=function(){var e,t,n=this.props,r=this.target,o=r.style,a=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?r[n[e]]=n[e+2]:n[e+2]?o[n[e]]=n[e+2]:o.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(Vn,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)a[t]=this.tfm[t];a.svg&&(a.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=Ln())&&e.isStart||o[or]||(sr(o),a.uncache=1)}},cr=function(e,t){var n={target:e,props:[],revert:ur,save:ir};return e._gsap||Mn.core.getCache(e),t&&t.split(",").forEach((function(e){return n.save(e)})),n},fr=function(e,t){var n=Rn.createElementNS?Rn.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Rn.createElement(e);return n.style?n:Rn.createElement(e)},lr=function e(t,n,r){var o=getComputedStyle(t);return o[n]||o.getPropertyValue(n.replace(Vn,"-$1").toLowerCase())||o.getPropertyValue(n)||!r&&e(t,dr(n)||n,1)||""},pr="O,Moz,ms,Ms,Webkit".split(","),dr=function(e,t,n){var r=(t||kn).style,o=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(pr[o]+e in r););return o<0?null:(3===o?"ms":o>=0?pr[o]:"")+e},hr=function(){"undefined"!=typeof window&&window.document&&(On=window,Rn=On.document,Dn=Rn.documentElement,kn=fr("div")||{style:{}},fr("div"),or=dr(or),ar=or+"Origin",kn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Nn=!!dr("perspective"),Ln=Mn.core.reverting,Pn=1)},mr=function e(t){var n,r=fr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),o=this.parentNode,a=this.nextSibling,i=this.style.cssText;if(Dn.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return o&&(a?o.insertBefore(this,a):o.appendChild(this)),Dn.removeChild(r),this.style.cssText=i,n},vr=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},gr=function(e){var t;try{t=e.getBBox()}catch(n){t=mr.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===mr||(t=mr.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+vr(e,["x","cx","x1"])||0,y:+vr(e,["y","cy","y1"])||0,width:0,height:0}},yr=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!gr(e))},br=function(e,t){if(t){var n=e.style;t in zn&&t!==ar&&(t=or),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(Vn,"-$1").toLowerCase())):n.removeAttribute(t)}},_r=function(e,t,n,r,o,a){var i=new gn(e._pt,t,n,0,1,a?Jn:Kn);return e._pt=i,i.b=r,i.e=o,e._props.push(n),i},xr={deg:1,rad:1,turn:1},Tr={grid:1,flex:1},Ar=function e(t,n,r,o){var a,i,s,u,c=parseFloat(r)||0,f=(r+"").trim().substr((c+"").length)||"px",l=kn.style,p=Hn.test(n),d="svg"===t.tagName.toLowerCase(),h=(d?"client":"offset")+(p?"Width":"Height"),m=100,v="px"===o,g="%"===o;return o===f||!c||xr[o]||xr[f]?c:("px"!==f&&!v&&(c=e(t,n,r,"px")),u=t.getCTM&&yr(t),!g&&"%"!==f||!zn[n]&&!~n.indexOf("adius")?(l[p?"width":"height"]=m+(v?f:o),i=~n.indexOf("adius")||"em"===o&&t.appendChild&&!d?t:t.parentNode,u&&(i=(t.ownerSVGElement||{}).parentNode),i&&i!==Rn&&i.appendChild||(i=Rn.body),(s=i._gsap)&&g&&s.width&&p&&s.time===Ot.time&&!s.uncache?be(c/s.width*m):((g||"%"===f)&&!Tr[lr(i,"display")]&&(l.position=lr(t,"position")),i===t&&(l.position="static"),i.appendChild(kn),a=kn[h],i.removeChild(kn),l.position="absolute",p&&g&&((s=ve(i)).time=Ot.time,s.width=i[h]),be(v?a*c/m:a&&c?m/a*c:0))):(a=u?t.getBBox()[p?"width":"height"]:t[h],be(g?c/a*m:c/100*a)))},Er=function(e,t,n,r){var o;return Pn||hr(),t in Xn&&"transform"!==t&&~(t=Xn[t]).indexOf(",")&&(t=t.split(",")[0]),zn[t]&&"transform"!==t?(o=Fr(e,r),o="transformOrigin"!==t?o[t]:o.svg?o.origin:Lr(lr(e,ar))+" "+o.zOrigin+"px"):(!(o=e.style[t])||"auto"===o||r||~(o+"").indexOf("calc("))&&(o=Ir[t]&&Ir[t](e,t,n)||lr(e,t)||ge(e,t)||("opacity"===t?1:0)),n&&!~(o+"").trim().indexOf(" ")?Ar(e,t,o,n)+n:o},wr=function(e,t,n,r){if(!n||"none"===n){var o=dr(t,e,1),a=o&&lr(e,o,1);a&&a!==n?(t=o,n=a):"borderColor"===t&&(n=lr(e,"borderTopColor"))}var i,s,u,c,f,l,p,d,h,m,v,g=new gn(this._pt,e.style,t,0,1,ln),y=0,b=0;if(g.b=n,g.e=r,n+="","auto"==(r+="")&&(e.style[t]=r,r=lr(e,t)||r,e.style[t]=n),Mt(i=[n,r]),r=i[1],u=(n=i[0]).match(q)||[],(r.match(q)||[]).length){for(;s=q.exec(r);)p=s[0],h=r.substring(y,s.index),f?f=(f+1)%5:"rgba("!==h.substr(-5)&&"hsla("!==h.substr(-5)||(f=1),p!==(l=u[b++]||"")&&(c=parseFloat(l)||0,v=l.substr((c+"").length),"="===p.charAt(1)&&(p=xe(c,p)+v),d=parseFloat(p),m=p.substr((d+"").length),y=q.lastIndex-m.length,m||(m=m||E.units[t]||v,y===r.length&&(r+=m,g.e+=m)),v!==m&&(c=Ar(e,t,l,m)||0),g._pt={_next:g._pt,p:h||1===b?h:",",s:c,c:d-c,m:f&&f<4||"zIndex"===t?Math.round:0});g.c=y<r.length?r.substring(y,r.length):""}else g.r="display"===t&&"none"===r?Jn:Kn;return Y.test(r)&&(g.e=0),this._pt=g,g},Sr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Cr=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,o,a=t.t,i=a.style,s=t.u,u=a._gsap;if("all"===s||!0===s)i.cssText="",r=1;else for(o=(s=s.split(",")).length;--o>-1;)n=s[o],zn[n]&&(r=1,n="transformOrigin"===n?ar:or),br(a,n);r&&(br(a,or),u&&(u.svg&&a.removeAttribute("transform"),Fr(a,1),u.uncache=1,sr(i)))}},Ir={clearProps:function(e,t,n,r,o){if("isFromStart"!==o.data){var a=e._pt=new gn(e._pt,t,n,0,0,Cr);return a.u=r,a.pr=-10,a.tween=o,e._props.push(n),1}}},Mr=[1,0,0,1,0,0],Or={},Rr=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},Dr=function(e){var t=lr(e,or);return Rr(t)?Mr:t.substr(7).match(X).map(be)},Pr=function(e,t){var n,r,o,a,i=e._gsap||ve(e),s=e.style,u=Dr(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(o=e.transform.baseVal.consolidate().matrix).a,o.b,o.c,o.d,o.e,o.f]).join(",")?Mr:u:(u!==Mr||e.offsetParent||e===Dn||i.svg||(o=s.display,s.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,r=e.nextElementSibling,Dn.appendChild(e)),u=Dr(e),o?s.display=o:br(e,"display"),a&&(r?n.insertBefore(e,r):n?n.appendChild(e):Dn.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},kr=function(e,t,n,r,o,a){var i,s,u,c=e._gsap,f=o||Pr(e,!0),l=c.xOrigin||0,p=c.yOrigin||0,d=c.xOffset||0,h=c.yOffset||0,m=f[0],v=f[1],g=f[2],y=f[3],b=f[4],_=f[5],x=t.split(" "),T=parseFloat(x[0])||0,A=parseFloat(x[1])||0;n?f!==Mr&&(s=m*y-v*g)&&(u=T*(-v/s)+A*(m/s)-(m*_-v*b)/s,T=T*(y/s)+A*(-g/s)+(g*_-y*b)/s,A=u):(T=(i=gr(e)).x+(~x[0].indexOf("%")?T/100*i.width:T),A=i.y+(~(x[1]||x[0]).indexOf("%")?A/100*i.height:A)),r||!1!==r&&c.smooth?(b=T-l,_=A-p,c.xOffset=d+(b*m+_*g)-b,c.yOffset=h+(b*v+_*y)-_):c.xOffset=c.yOffset=0,c.xOrigin=T,c.yOrigin=A,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[ar]="0px 0px",a&&(_r(a,c,"xOrigin",l,T),_r(a,c,"yOrigin",p,A),_r(a,c,"xOffset",d,c.xOffset),_r(a,c,"yOffset",h,c.yOffset)),e.setAttribute("data-svg-origin",T+" "+A)},Fr=function(e,t){var n=e._gsap||new Ht(e);if("x"in n&&!t&&!n.uncache)return n;var r,o,a,i,s,u,c,f,l,p,d,h,m,v,g,y,b,_,x,T,A,w,S,C,I,M,O,R,D,P,k,F,L=e.style,N=n.scaleX<0,z="px",B="deg",U=getComputedStyle(e),j=lr(e,ar)||"0";return r=o=a=u=c=f=l=p=d=0,i=s=1,n.svg=!(!e.getCTM||!yr(e)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(L[or]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[or]?U[or]:"")),L.scale=L.rotate=L.translate="none"),v=Pr(e,n.svg),n.svg&&(n.uncache?(I=e.getBBox(),j=n.xOrigin-I.x+"px "+(n.yOrigin-I.y)+"px",C=""):C=!t&&e.getAttribute("data-svg-origin"),kr(e,C||j,!!C||n.originIsAbsolute,!1!==n.smooth,v)),h=n.xOrigin||0,m=n.yOrigin||0,v!==Mr&&(_=v[0],x=v[1],T=v[2],A=v[3],r=w=v[4],o=S=v[5],6===v.length?(i=Math.sqrt(_*_+x*x),s=Math.sqrt(A*A+T*T),u=_||x?jn(x,_)*Bn:0,(l=T||A?jn(T,A)*Bn+u:0)&&(s*=Math.abs(Math.cos(l*Un))),n.svg&&(r-=h-(h*_+m*T),o-=m-(h*x+m*A))):(F=v[6],P=v[7],O=v[8],R=v[9],D=v[10],k=v[11],r=v[12],o=v[13],a=v[14],c=(g=jn(F,D))*Bn,g&&(C=w*(y=Math.cos(-g))+O*(b=Math.sin(-g)),I=S*y+R*b,M=F*y+D*b,O=w*-b+O*y,R=S*-b+R*y,D=F*-b+D*y,k=P*-b+k*y,w=C,S=I,F=M),f=(g=jn(-T,D))*Bn,g&&(y=Math.cos(-g),k=A*(b=Math.sin(-g))+k*y,_=C=_*y-O*b,x=I=x*y-R*b,T=M=T*y-D*b),u=(g=jn(x,_))*Bn,g&&(C=_*(y=Math.cos(g))+x*(b=Math.sin(g)),I=w*y+S*b,x=x*y-_*b,S=S*y-w*b,_=C,w=I),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,f=180-f),i=be(Math.sqrt(_*_+x*x+T*T)),s=be(Math.sqrt(S*S+F*F)),g=jn(w,S),l=Math.abs(g)>2e-4?g*Bn:0,d=k?1/(k<0?-k:k):0),n.svg&&(C=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Rr(lr(e,or)),C&&e.setAttribute("transform",C))),Math.abs(l)>90&&Math.abs(l)<270&&(N?(i*=-1,l+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,l+=l<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+z,n.y=o-((n.yPercent=o&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-o)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+z,n.z=a+z,n.scaleX=be(i),n.scaleY=be(s),n.rotation=be(u)+B,n.rotationX=be(c)+B,n.rotationY=be(f)+B,n.skewX=l+B,n.skewY=p+B,n.transformPerspective=d+z,(n.zOrigin=parseFloat(j.split(" ")[2])||0)&&(L[ar]=Lr(j)),n.xOffset=n.yOffset=0,n.force3D=E.force3D,n.renderTransform=n.svg?Hr:Nn?Vr:zr,n.uncache=0,n},Lr=function(e){return(e=e.split(" "))[0]+" "+e[1]},Nr=function(e,t,n){var r=rt(t);return be(parseFloat(t)+parseFloat(Ar(e,"x",n+"px",r)))+r},zr=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Vr(e,t)},Br="0deg",Ur="0px",jr=") ",Vr=function(e,t){var n=t||this,r=n.xPercent,o=n.yPercent,a=n.x,i=n.y,s=n.z,u=n.rotation,c=n.rotationY,f=n.rotationX,l=n.skewX,p=n.skewY,d=n.scaleX,h=n.scaleY,m=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,b="",_="auto"===v&&e&&1!==e||!0===v;if(y&&(f!==Br||c!==Br)){var x,T=parseFloat(c)*Un,A=Math.sin(T),E=Math.cos(T);T=parseFloat(f)*Un,x=Math.cos(T),a=Nr(g,a,A*x*-y),i=Nr(g,i,-Math.sin(T)*-y),s=Nr(g,s,E*x*-y+y)}m!==Ur&&(b+="perspective("+m+jr),(r||o)&&(b+="translate("+r+"%, "+o+"%) "),(_||a!==Ur||i!==Ur||s!==Ur)&&(b+=s!==Ur||_?"translate3d("+a+", "+i+", "+s+") ":"translate("+a+", "+i+jr),u!==Br&&(b+="rotate("+u+jr),c!==Br&&(b+="rotateY("+c+jr),f!==Br&&(b+="rotateX("+f+jr),l===Br&&p===Br||(b+="skew("+l+", "+p+jr),1===d&&1===h||(b+="scale("+d+", "+h+jr),g.style[or]=b||"translate(0, 0)"},Hr=function(e,t){var n,r,o,a,i,s=t||this,u=s.xPercent,c=s.yPercent,f=s.x,l=s.y,p=s.rotation,d=s.skewX,h=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,y=s.xOrigin,b=s.yOrigin,_=s.xOffset,x=s.yOffset,T=s.forceCSS,A=parseFloat(f),E=parseFloat(l);p=parseFloat(p),d=parseFloat(d),(h=parseFloat(h))&&(d+=h=parseFloat(h),p+=h),p||d?(p*=Un,d*=Un,n=Math.cos(p)*m,r=Math.sin(p)*m,o=Math.sin(p-d)*-v,a=Math.cos(p-d)*v,d&&(h*=Un,i=Math.tan(d-h),o*=i=Math.sqrt(1+i*i),a*=i,h&&(i=Math.tan(h),n*=i=Math.sqrt(1+i*i),r*=i)),n=be(n),r=be(r),o=be(o),a=be(a)):(n=m,a=v,r=o=0),(A&&!~(f+"").indexOf("px")||E&&!~(l+"").indexOf("px"))&&(A=Ar(g,"x",f,"px"),E=Ar(g,"y",l,"px")),(y||b||_||x)&&(A=be(A+y-(y*n+b*o)+_),E=be(E+b-(y*r+b*a)+x)),(u||c)&&(i=g.getBBox(),A=be(A+u/100*i.width),E=be(E+c/100*i.height)),i="matrix("+n+","+r+","+o+","+a+","+A+","+E+")",g.setAttribute("transform",i),T&&(g.style[or]=i)},Gr=function(e,t,n,r,o){var a,i,s=360,u=k(o),c=parseFloat(o)*(u&&~o.indexOf("rad")?Bn:1)-r,f=r+c+"deg";return u&&("short"===(a=o.split("_")[1])&&(c%=s)!=c%180&&(c+=c<0?s:-360),"cw"===a&&c<0?c=(c+36e9)%s-~~(c/s)*s:"ccw"===a&&c>0&&(c=(c-36e9)%s-~~(c/s)*s)),e._pt=i=new gn(e._pt,t,n,r,c,Wn),i.e=f,i.u="deg",e._props.push(n),i},Xr=function(e,t){for(var n in t)e[n]=t[n];return e},qr=function(e,t,n){var r,o,a,i,s,u,c,f=Xr({},n._gsap),l=n.style;for(o in f.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),l[or]=t,r=Fr(n,1),br(n,or),n.setAttribute("transform",a)):(a=getComputedStyle(n)[or],l[or]=t,r=Fr(n,1),l[or]=a),zn)(a=f[o])!==(i=r[o])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(o)<0&&(s=rt(a)!==(c=rt(i))?Ar(n,o,a,c):parseFloat(a),u=parseFloat(i),e._pt=new gn(e._pt,r,o,s,u-s,qn),e._pt.u=c||0,e._props.push(o));Xr(r,f)};ye("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",o="Bottom",a="Left",i=(t<3?[n,r,o,a]:[n+a,n+r,o+r,o+a]).map((function(n){return t<2?e+n:"border"+n+e}));Ir[t>1?"border"+e:e]=function(e,t,n,r,o){var a,s;if(arguments.length<4)return a=i.map((function(t){return Er(e,t,n)})),5===(s=a.join(" ")).split(a[0]).length?a[0]:s;a=(r+"").split(" "),s={},i.forEach((function(e,t){return s[e]=a[t]=a[t]||a[(t-1)/2|0]})),e.init(t,s,o)}}));var Wr,Yr,Qr={name:"css",register:hr,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,o){var a,i,s,u,c,f,l,p,d,h,m,v,g,y,b,_,x,T,A,w,S=this._props,C=e.style,I=n.vars.startAt;for(l in Pn||hr(),this.styles=this.styles||cr(e),_=this.styles.props,this.tween=n,t)if("autoRound"!==l&&(i=t[l],!fe[l]||!Kt(l,t,n,r,e,o)))if(c=typeof i,f=Ir[l],"function"===c&&(c=typeof(i=i.call(n,r,e,o))),"string"===c&&~i.indexOf("random(")&&(i=ht(i)),f)f(this,e,l,i,n)&&(b=1);else if("--"===l.substr(0,2))a=(getComputedStyle(e).getPropertyValue(l)+"").trim(),i+="",Ct.lastIndex=0,Ct.test(a)||(p=rt(a),d=rt(i)),d?p!==d&&(a=Ar(e,l,a,d)+d):p&&(i+=p),this.add(C,"setProperty",a,i,r,o,0,0,l),S.push(l),_.push(l,0,C[l]);else if("undefined"!==c){if(I&&l in I?(a="function"==typeof I[l]?I[l].call(n,r,e,o):I[l],k(a)&&~a.indexOf("random(")&&(a=ht(a)),rt(a+"")||(a+=E.units[l]||rt(Er(e,l))||""),"="===(a+"").charAt(1)&&(a=Er(e,l))):a=Er(e,l),u=parseFloat(a),(h="string"===c&&"="===i.charAt(1)&&i.substr(0,2))&&(i=i.substr(2)),s=parseFloat(i),l in Xn&&("autoAlpha"===l&&(1===u&&"hidden"===Er(e,"visibility")&&s&&(u=0),_.push("visibility",0,C.visibility),_r(this,C,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==l&&"transform"!==l&&~(l=Xn[l]).indexOf(",")&&(l=l.split(",")[0])),m=l in zn)if(this.styles.save(l),v||((g=e._gsap).renderTransform&&!t.parseTransform||Fr(e,t.parseTransform),y=!1!==t.smoothOrigin&&g.smooth,(v=this._pt=new gn(this._pt,C,or,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===l)this._pt=new gn(this._pt,g,"scaleY",g.scaleY,(h?xe(g.scaleY,h+s):s)-g.scaleY||0,qn),this._pt.u=0,S.push("scaleY",l),l+="X";else{if("transformOrigin"===l){_.push(ar,0,C[ar]),T=void 0,A=void 0,w=void 0,A=(T=(x=i).split(" "))[0],w=T[1]||"50%","top"!==A&&"bottom"!==A&&"left"!==w&&"right"!==w||(x=A,A=w,w=x),T[0]=Sr[A]||A,T[1]=Sr[w]||w,i=T.join(" "),g.svg?kr(e,i,0,y,0,this):((d=parseFloat(i.split(" ")[2])||0)!==g.zOrigin&&_r(this,g,"zOrigin",g.zOrigin,d),_r(this,C,l,Lr(a),Lr(i)));continue}if("svgOrigin"===l){kr(e,i,1,y,0,this);continue}if(l in Or){Gr(this,g,l,u,h?xe(u,h+i):i);continue}if("smoothOrigin"===l){_r(this,g,"smooth",g.smooth,i);continue}if("force3D"===l){g[l]=i;continue}if("transform"===l){qr(this,i,e);continue}}else l in C||(l=dr(l)||l);if(m||(s||0===s)&&(u||0===u)&&!Gn.test(i)&&l in C)s||(s=0),(p=(a+"").substr((u+"").length))!==(d=rt(i)||(l in E.units?E.units[l]:p))&&(u=Ar(e,l,a,d)),this._pt=new gn(this._pt,m?g:C,l,u,(h?xe(u,h+s):s)-u,m||"px"!==d&&"zIndex"!==l||!1===t.autoRound?qn:Qn),this._pt.u=d||0,p!==d&&"%"!==d&&(this._pt.b=a,this._pt.r=Yn);else if(l in C)wr.call(this,e,l,a,h?h+i:i);else if(l in e)this.add(e,l,a||e[l],h?h+i:i,r,o);else if("parseTransform"!==l){ee(l,i);continue}m||(l in C?_.push(l,0,C[l]):_.push(l,1,a||e[l])),S.push(l)}b&&vn(this)},render:function(e,t){if(t.tween._time||!Ln())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Er,aliases:Xn,getSetter:function(e,t,n){var r=Xn[t];return r&&r.indexOf(",")<0&&(t=r),t in zn&&t!==ar&&(e._gsap.x||Er(e,"x"))?n&&Fn===n?"scale"===t?tr:er:(Fn=n||{})&&("scale"===t?nr:rr):e.style&&!N(e.style[t])?Zn:~t.indexOf("-")?$n:un(e,t)},core:{_removeProperty:br,_getMatrix:Pr}};Mn.utils.checkPrefix=dr,Mn.core.getStyleSaver=cr,Yr=ye("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Wr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){zn[e]=1})),ye(Wr,(function(e){E.units[e]="deg",Or[e]=1})),Xn[Yr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Wr,ye("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Xn[t[1]]=Yr[t[0]]})),ye("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){E.units[e]="px"})),Mn.registerPlugin(Qr);var Kr=Mn.registerPlugin(Qr)||Mn;function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function Zr(){Zr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof l?t:l,a=Object.create(o.prototype),i=new A(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=_(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function l(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(E([])));v&&v!==t&&n.call(v,o)&&(h=v);var g=d.prototype=l.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(o,a,i,s){var u=c(e[o],e,a);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"==Jr(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){f.value=e,i(f)}),(function(e){return r("throw",e,i,s)}))}s(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:w}}function w(){return{value:void 0,done:!0}}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new b(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function $r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function to(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function no(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){to(a,r,o,i,s,"next",e)}function s(e){to(a,r,o,i,s,"throw",e)}i(void 0)}))}}Kr.core.Tween;var ro=document.getElementById("canvas");ro.width=1*window.innerWidth,ro.height=1*window.innerHeight;var oo="LIGHT",ao="DARK",io=document.getElementById("root"),so=o()({canvas:ro}),uo=t().find((function(e){return"morph"==e.name})),co=i()(so,uo),fo=mo().isNight?ao:oo;!function e(){var t=mo(),n=t.isNight,r=t.offset;document.body.classList.toggle("dark",n),vo(n?ao:oo),setTimeout(e,r+1e3)}(),window.addEventListener("resize",(function(){vo(fo)}));var lo={started:"page-started",withRules:"page-with-rules",main:"page-main"},po=lo.started;function ho(e){po=e,Object.values(lo).forEach((function(e){return io.classList.remove(e)})),io.classList.add(e)}function mo(){var e=new Date,t=new Date,n=new Date;t.setHours(18,0,0),n.setHours(6,0,0),e>=t&&n.setDate(n.getDate()+1);var r=!1,o=Math.min(Math.abs(t-e),Math.abs(n-e));return t-e<0&&n-e>=0&&(o=n-e),t-e>=0&&n-e<0&&(o=t-e),(e>=t||e<=n)&&(r=!0),e<=t&&e>=n&&(r=!1),{isNight:r,offset:o}}function vo(e){return go.apply(this,arguments)}function go(){return go=no(Zr().mark((function e(t){var n,r,o,a,i,s,u,c,f,l;return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector(".started__background-inner.light").currentSrc,r=document.querySelector(".started__background-inner.dark").currentSrc,o=t==ao?[n,r]:[r,n],e.next=5,Promise.all(o.map(yo));case 5:if(a=e.sent,i=a.map((function(e){return so.texture(e)})),s=$r(i,2),u=s[0],c=s[1],t!==fo){e.next=10;break}return co({from:u,to:c,progress:1}),e.abrupt("return");case 10:fo=t,f={from:u,to:c,strength:.1,progress:0},l=so.frame((function(){co(f)})),Kr.fromTo(f,{progress:0},{progress:1,duration:3,onComplete:function(){l.cancel()}});case 14:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function yo(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.onabort=n,r.src=e}))}document.addEventListener("click",(function(e){e.target.closest("[data-route-to]")&&ho(e.target.closest("[data-route-to]").getAttribute("data-route-to"))})),ho(po)})()})();
//# sourceMappingURL=index.js.map